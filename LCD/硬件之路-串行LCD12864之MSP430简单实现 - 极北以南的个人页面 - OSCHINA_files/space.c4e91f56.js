!function(){var d;(d={},function(i,e){var t,n,a,r=i?e?"is"+e+"IE"+i:"isIE"+i:"isIE",o=d[r];return void 0!==o?o:(i?(t=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:|Edge\/)(\d+)/))?(n=parseInt(t[1]),o=e?"lt"===e?n<i:"gt"===e?i<n:void 0:n===i):i<=9&&((a=document.createElement("b")).innerHTML="\x3c!--[if "+(e||"")+" IE "+i+"]><i></i><![endif]--\x3e",o=1===a.getElementsByTagName("i").length):o=-1!==navigator.userAgent.indexOf("MSIE")||-1<navigator.appVersion.indexOf("Trident/"),d[r]=o)})(11,"lt")&&-1===document.cookie.indexOf("ie_compatibility_hide=")&&(location.href="/ie_compatibility")}();
window.OSCRequire={module:{},base:{},page:{define:null},stringUtil:{isNull:function(e){return!("string"==typeof e&&e&&e.replace(/(^\s*)|(\s*$)/g,""))}},fetchBase:function(e){if("function"==typeof this.base[e]){var t=this.base[e].apply(Object);this.base[e]="function"==typeof t?new t:t}return this.base[e]},buildModule:function(e,t,n){var i,r,u,o=this.stringUtil,a={require:null,target:null};if(!o.isNull(e)&&n instanceof Function){if(a.target=n,t instanceof Array){for(r in i=[],t){if(u=t[r],o.isNull(u)||!this.base.hasOwnProperty(u))throw new Error("依赖参数错误!");i.push(u)}i.length&&(a.require=i)}this.module[e]=a}},initPage:function(){var e,t,n,i,r,u,o=document.querySelector("[data-define]")||document.querySelector("x-foo-define");for(o instanceof HTMLElement&&(this.page.define=o.getAttribute("data-define")),e=null,n=t="",r=0,u=(i=document.querySelectorAll("val")).length;r<u;++r)(e=i[r])instanceof HTMLElement&&(t=e.getAttribute("data-name"),n=e.getAttribute("data-value"),t&&("true"!==n&&"false"!==n||(n="true"===n),this.page[t]=n));return this.page},initModule:function(e,t){var n,i,r=[];if("function"!=typeof e)throw new Error("非法模块调用!");if(Array.isArray(t)&&0<t.length)for(n in t)i=t[n],r.push(this.fetchBase(i));return new(e.apply(Object,r))}},window.OSCDefine=function(){var e,t,n,i,r,u=arguments,o=u.length;2<=o&&(n=u[0],i=u[1],r=3===o?u[2]:null,i instanceof Function&&(e=i),r instanceof Function&&(e=r),i instanceof Array&&(t=i),OSCRequire.stringUtil.isNull(n)||OSCRequire.buildModule(n,t,e))},window.OSCPlugin=function(e,t){"string"==typeof e&&/^object|function$/.test(typeof t)&&""!==e&&void 0===OSCRequire.base[e]&&(OSCRequire.base[e]=t)};
!function(a,t){var e="暂没有未读消息",s="未读消息",n=24e4,o=function(){this._timer=null,this._totalCountTransitionTimer=null,this._messageEl=a("#message"),this._messageTotalCountEl=this._messageEl.find(".total-count"),this._messageHeaderEl=this._messageEl.find(".message-header"),this._messageActionWrap=this._messageEl.find(".action"),this._messageMarkReadAllEl=this._messageEl.find(".mark-read-all")};o.prototype.init=function(){this._messageEl.dropdown({on:"hover"}),this.bindMarkReadAll();var t=this.getPageMsgCountData();this.setAll(t)},o.prototype.markReadAll=function(){var e=this;a.post(page.space_user_url+"/msg/updateReadStatu",{userId:page.g_user_id},function(t){1===t.code?(e.setAll({totalMsgCount:0}),"space-admin-inbox"!==page.define&&"space-admin-msgs"!==page.define||(a(".messages-wrap").find(".private-message.un-read").removeClass("un-read"),a("body").toast({type:"success",content:"成功设置全部已读"}))):a("body").toast({type:"error",content:"网络错误，请稍后再试"})})},o.prototype.bindMarkReadAll=function(){var e=this;this._messageEl.on("click",".mark-read-all",function(t){t.stopPropagation(),e.markReadAll()})},o.prototype.getPageMsgCountData=function(){return{totalMsgCount:parseInt(page.g_unread_msg_total_count),fansCount:parseInt(page.g_unread_msg_fans_count),privateMsgCount:parseInt(page.g_unread_msg_private_count),repliesCount:parseInt(page.g_unread_msg_reply_count),refMeCount:parseInt(page.g_unread_msg_ref_count)}},o.prototype.setAll=function(t){this.setMsgTotalCount(t),this.setMsgHeader(t),this.setMsgList(t),this.setMsgMarkReadAll(t),this.setSpaceAdminSidebar(t)},o.prototype.setMsgTotalCount=function(t){var e=this,s=void 0===t?0:t.totalMsgCount||0;e._messageTotalCountEl.html(s),0<s?(e._messageTotalCountEl.show(),e._totalCountTransitionTimer&&(clearInterval(e._totalCountTransitionTimer),e._totalCountTransitionTimer=null),e._totalCountTransitionTimer=setInterval(function(){e._messageTotalCountEl.transition("flash")},4e3)):(clearInterval(e._totalCountTransitionTimer),e._totalCountTransitionTimer=null,e._messageTotalCountEl.transition("hide"))},o.prototype.setMsgHeader=function(t){0<(void 0===t?0:t.totalMsgCount||0)?this._messageHeaderEl.html(s):this._messageHeaderEl.html(e)},o.prototype.setMsgList=function(t){var e,s;if(!t)return!1;e=t.totalMsgCount||0,this._messageEl.find(".message-item").remove(),0<e&&(s="",0<t.fansCount&&(s+=page.g_unread_msg_fans_tpl.replace("{{fansCount}}",t.fansCount)),0<t.privateMsgCount&&(s+=page.g_unread_msg_private_tpl.replace("{{privateMsgCount}}",t.privateMsgCount)),0<t.repliesCount&&(s+=page.g_unread_msg_reply_tpl.replace("{{repliesCount}}",t.repliesCount)),0<t.refMeCount&&(s+=page.g_unread_msg_ref_tpl.replace("{{refMeCount}}",t.refMeCount)),this._messageActionWrap.before(s))},o.prototype.setMsgMarkReadAll=function(t){0<(void 0===t?0:t.totalMsgCount||0)?this._messageMarkReadAllEl.show():this._messageMarkReadAllEl.hide()},o.prototype.setSpaceAdminSidebar=function(t){var e,s=page.define||"";-1<s.indexOf("space-admin")&&(0<(e=void 0===t?0:t.privateMsgCount||0)?a(".un-read-count-label").text(e).show():a(".un-read-count-label").hide())},o.prototype.fetchMsgCount=function(){var s=this;a.post(page.space_user_url+"/msg/findAllMsgCount",{user_code:page.g_user_code,userId:page.g_user_id},function(t,e){1===t.code&&t.result&&s.setAll(t.result)})},o.prototype.startPolling=function(){this._timer&&(clearInterval(this._timer),this._timer=null);var t=this;this._timer=setInterval(function(){t.fetchMsgCount()},n)},o.prototype.stopPolling=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},t.OSCPollingMsg=o}(window.jQuery||window.$,window);
!function(u){u.common={dynamicLoader:function(){function l(e,t,n,i,r){function o(e,t){return null!=e&&null!=t&&-1!==e.indexOf(t,e.length-t.length)}var c,a=this,s=!1!==i;for(this.log=function(e){},this.getFileName=function(e){var t=u.__STATIC_DOMAIN||"";return/^http(s?):\/\//.test(e)||(e=t+e),s||(-1===e.indexOf("?")?e+="?no_cache="+(new Date).getTime():e+="&no_cache="+(new Date).getTime()),e},this.execStyleCallback=function(){"function"==typeof n&&n()},this.execScriptCallback=function(){"function"==typeof t&&t()},this.loadStyle=function(e){function t(){e+1<a._css_files.length?a.loadStyle(e+1):a.execStyleCallback()}function n(){r||(r=!0,s&&a.cssCacheList.push(o),a.log('Loaded style "'+o+'".'),t())}var i,r,o=a._css_files[e];if(s&&-1!==a.cssCacheList.indexOf(o))return a.log('Skip style file "'+o+'" cached.'),void t();i=document.createElement("link"),r=!1,i.rel="stylesheet",i.type="text/css",i.href=a.getFileName(o),i.onload=n,i.onreadystatechange=function(){r||"complete"!==i.readyState||n()},i.onerror=function(){r||(r=!0,a.log('Error loading style "'+o+'".'),t())},a.log("Loading style "+o),a._head.appendChild(i)},this.loadScript=function(e){function t(){e+1<a._js_files.length?a.loadScript(e+1):a.execScriptCallback()}function n(){r||(r=!0,s&&a.scriptCacheList.push(o),a.log('Loaded script "'+o+'".'),t())}var i,r,o=a._js_files[e];if(s&&-1!==a.scriptCacheList.indexOf(o))return a.log('Skip script file "'+o+'" cached.'),void t();i=document.createElement("script"),r=!1,i.type="text/javascript",i.src=a.getFileName(o),i.onload=n,i.onreadystatechange=function(){r||"complete"!==i.readyState||n()},i.onerror=function(){r||(r=!0,a.log('Error loading script "'+o+'".'),t())},a.log('Loading script "'+o+'".'),a._head.appendChild(i)},this.loadFiles=function(){0<a._css_files.length&&a.loadStyle(0),0<a._js_files.length&&a.loadScript(0)},this.cssCacheList=l.cssCacheList,this.scriptCacheList=l.scriptCacheList,this._js_files=[],this._css_files=[],this._head=document.getElementsByTagName("head")[0],c=0;c<e.length;++c)o(e[c],".css")||o(e[c].split("?")[0],".css")?this._css_files.push(e[c]):o(e[c],".js")||o(e[c].split("?")[0],".js")?this._js_files.push(e[c]):this.log('Error unknown filetype "'+e[c]+'".')}return l.cssCacheList=[],l.scriptCacheList=[],l}(),throttle:function(n,i,r){var o,c,a,s,l=Date.now||function(){return(new Date).getTime()},u=null,h=0;return r||(r={}),s=function(){h=!1===r.leading?0:l(),u=null,a=n.apply(o,c),u||(o=c=null)},function(){var e,t=l();return h||!1!==r.leading||(h=t),o=this,c=arguments,(e=i-(t-h))<=0||i<e?(clearTimeout(u),u=null,h=t,a=n.apply(o,c),u||(o=c=null)):u||!1===r.trailing||(u=setTimeout(s,e)),a}},getImagesBySizeFilter:function(e,t){var n,i,r,o,c=[],a=$(e);for(n=0;n<a.length;n++)i=a.eq(n),r=parseInt(i.css("width")),o=parseInt(i.css("height")),i[0]&&i[0].naturalWidth&&(r=i[0].naturalWidth,o=i[0].naturalHeight),$.isFunction(t)&&t(r,o)&&c.push(i);return c},getWeChatShareImgUrl:function(e){var n=[],t=this.getImagesBySizeFilter(e,function(e,t){return 300<=e&&300<=t});return t.forEach(function(e){var t=e.attr("src");/http(s?):\/\//.test(t)&&n.push(t)}),0<n.length?n[0]:""},checkLogin:function(){if(page.g_user_code)return!0;var e=page.login_page?'点击<a href="'+page.login_page+'" target="_blank">此处</a>':"请先";return $("body").toast({type:"error",content:"您还没有登录，"+e+"登录",duration:0}),!1},checkPC:function(){var e,t=navigator.userAgent,n=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],i=!0;for(e=0;e<n.length;e++)if(-1<t.indexOf(n[e])){i=!1;break}return i},checkWeChat:function(){var e,t=navigator.userAgent,n=["MicroMessenger"],i=!1;for(e=0;e<n.length;e++)if(-1<t.indexOf(n[e])){i=!0;break}return i},formatNumberK:function(e){var t,n=Number(e)||0;return 1<=n/1e3?(t=(t=n/1e3).toFixed(1),-1<String(t).indexOf(".0")&&(t=parseInt(t)),t+"K"):n},queryString:function(t){return Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")},setCookie:function(e,t,n){var i,r="";n&&((i=new Date).setTime(i.getTime()+864e5*n),r="; expires="+i.toUTCString()),document.cookie=e+"="+(t||"")+r+"; path=/"},getCookie:function(e){var t,n,i=e+"=",r=document.cookie.split(";");for(t=0;t<r.length;t++){for(n=r[t];" "==n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(i))return n.substring(i.length,n.length)}return null},eraseCookie:function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/"},htmlEncode:function(e){return $("<div/>").text(e).html()},htmlDecode:function(e){return $("<div/>").html(e).text()}},$(function(){if(u.page=u.OSCRequire.initPage(),page.define){var e=u.OSCRequire.module[page.define];if(e instanceof Object){u.currentModule=u.OSCRequire.initModule(e.target,e.require);try{"function"==typeof currentModule.ready&&currentModule.ready(),"function"==typeof currentModule.register&&currentModule.register()}catch(e){}}}})}(window);
$(function(){var e,n,i,o,t,a,s,r,c=$("#headerNavMenu");c.find(".dropdown").dropdown(),$("#btnDownloadApp").popup({position:"right center",popup:$("#btnDownloadAppContent")}),(e=$("#mobileNavSidebar")).sidebar({dimPage:!0,transition:"overlay",mobileTransition:"overlay",useLegacy:!1,exclusive:!0}),e.sidebar("attach events",".toggle-mobile-nav-sidebar"),(n=$("#mobileUserSidebar")).sidebar({dimPage:!0,transition:"overlay",mobileTransition:"overlay",useLegacy:!1,exclusive:!0}),n.sidebar("attach events",".toggle-mobile-user-sidebar"),(i=$("#userSidebar")).sidebar({dimPage:!0,transition:"uncover",useLegacy:"auto",duration:500,exclusive:!0}),$(".toggle-user-sidebar").on("click",function(e){i.sidebar("toggle"),e.preventDefault()}),o=$(".back-to-top"),(t=function(){200<$(window).scrollTop()&&768<=window.innerWidth?o.fadeIn(100):o.fadeOut(100)})(),window.addEventListener("scroll",window.common.throttle(t,300),!1),$(document).on("click",".back-to-top-toggle",function(){$("html, body").stop().animate({scrollTop:0},500,"swing")}),$(document).on("click",'a[href*="#"]:not([href="#"]), area[href*="#"]',function(){var e,n,i;location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname&&(e=(e=$(this.hash)).length&&e||$('[name="'+this.hash.slice(1)+'"]')).length&&(n=e.offset().top,i=parseInt(e.data("offset"))||0,0<n-80&&(n-=80),isNaN(i)||(n+=i),$("html, body").stop(!0).animate({scrollTop:n},500,"swing"))}),$(document).on("click",".logout-btn",function(){$.post(page.api_prefix+"/user/logout",{session:page.g_user_code},function(e){200===e.code?($("body").toast({type:"success",content:"退出成功"}),setTimeout(function(){location.reload()},0)):$("body").toast({type:"error",content:e.message||"退出失败，请稍后再试"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}),c.on("click",".search-item .search.link.icon",function(){var e=$(this).parents(".search-item:eq(0)"),n=e.find("input[name=q]").val().trim();0<n.length&&e.submit()}),window.name||(a=(a=$(location.hash)).length&&a||$('[name="'+location.hash.slice(1)+'"]')).length&&(s=a.offset().top,r=parseInt(a.data("offset"))||0,0<s-80&&(s-=80),isNaN(r)||(s+=r),$("html, body").stop(!0).animate({scrollTop:s},500,"swing"),window.name="opened"),page.g_user&&(window.pollingMsg=new OSCPollingMsg,pollingMsg.init(),pollingMsg.startPolling()),function(){var e,n=page.weixinAppId,i=page.weixinTimestamp,o=page.weixinNonceStr,t=page.weixinSignature;if(!(n&&i&&o&&t))return;e={title:page.weixinShareTitle||document.title,desc:page.weixinShareDescription||$('meta[name="description"]').attr("content")||"",imgUrl:page.weixinShareImgUrl||"https://static.oschina.net/uploads/space/2017/0606/104418_CPLl_2733728.png",link:page.weixinShareUrl||location.href},page.beforeWeChatShareHook&&"function"==typeof page.beforeWeChatShareHook&&(e=page.beforeWeChatShareHook(e)),wx.config({debug:!1,appId:n,timestamp:i,nonceStr:o,signature:t,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]}),wx.ready(function(){wx.onMenuShareTimeline({title:e.title,link:e.link,imgUrl:e.imgUrl,success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl,type:"link",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl,success:function(){},cancel:function(){}}),wx.onMenuShareWeibo({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl,success:function(){},cancel:function(){}}),wx.onMenuShareQZone({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl,success:function(){},cancel:function(){}})})}(),$(document).on("click","[check-login]",function(e){if(window.common&&window.common.checkLogin&&!window.common.checkLogin())return e.preventDefault(),!1}),function(){if(!page.is_detail_page)return;new window.common.dynamicLoader(["/new-osc/js/utils/plugins/viewer/viewer.min.css","/new-osc/js/utils/plugins/viewer/viewer.min.js","/new-osc/js/utils/plugins/viewer/jquery-viewer.min.js"],function(){window.common.getImagesBySizeFilter(".article-detail .content img:not(.ad-wrap img)",function(e,n){return 200<=e||200<=n}).forEach(function(e){if(e.parent().is("a"))return!1;e.addClass("zoom-in-cursor"),e.viewer({button:!0,navbar:!1,title:!1,toolbar:!1,zoomRatio:.2,maxZoomRatio:2,viewed:function(){this.viewer.options.minZoomRatio=this.viewer.initialImageData.ratio}})})}).loadFiles()}(),$(".osc-gitee-6th-label").popup()});
!function(t){var e,n,o,l,c,i,a,d,s='<svg><symbol id="oicon-world" viewBox="0 0 1024 1024"><path d="M921.6 204.8h-1.024A510.464 510.464 0 0 0 512 0C229.696 0 0 229.696 0 512s229.696 512 512 512c167.04 0 315.072-80.64 408.576-204.8h1.024v-1.28C985.6 732.416 1024 626.816 1024 512s-38.4-220.416-102.4-305.92V204.8zM358.4 891.456A409.984 409.984 0 0 1 102.4 512c0-17.408 1.408-34.432 3.52-51.2H153.6l51.2 102.4v102.4L307.2 768l51.2 51.2v72.256zM512 921.6a408.32 408.32 0 0 1-96.448-11.904L460.8 819.2l51.2-102.4V614.4H409.6l-51.2-51.2h-51.2L256 460.8l51.2-102.4 51.2-51.2 51.2-51.2 51.2-102.4v-47.68c16.768-2.112 33.792-3.52 51.2-3.52a407.04 407.04 0 0 1 256 90.368V256l-51.2 102.4 51.2 51.2v51.2l-102.4 51.2-51.2 52.032 51.2 50.368 51.2 51.2 51.2 102.4 33.472 33.472A408.32 408.32 0 0 1 512 921.6z"  ></path></symbol><symbol id="oicon-setting" viewBox="0 0 1162 1024"><path d="M1055.479204 128.810127H442.676311c-10.415913-55.551537-57.287523-97.21519-116.311031-97.21519-57.287523 0-105.895118 41.663653-116.31103 97.21519H53.815552c-10.415913 0-19.095841 8.679928-19.095841 20.831826s8.679928 20.831826 20.831826 20.831826h156.238698c10.415913 55.551537 57.287523 97.21519 116.311031 97.21519 57.287523 0 105.895118-41.663653 116.311031-97.21519h611.066907c12.151899 0 20.831826-8.679928 20.831827-20.831826s-8.679928-20.831826-20.831827-20.831826zM328.101266 224.289331c-41.663653 0-76.383363-34.719711-76.383364-76.383364 0-41.663653 34.719711-76.383363 76.383364-76.383363 41.663653 0 76.383363 34.719711 76.383363 76.383363 0 41.663653-34.719711 76.383363-76.383363 76.383364zM1055.479204 840.564195H637.106691c-10.415913-55.551537-57.287523-97.21519-116.311031-97.21519-57.287523 0-105.895118 41.663653-116.311031 97.21519H55.551537c-12.151899 0-20.831826 8.679928-20.831826 20.831827s8.679928 20.831826 20.831826 20.831826h348.933092c10.415913 55.551537 57.287523 97.21519 116.311031 97.21519 57.287523 0 105.895118-41.663653 116.311031-97.21519H1055.479204c12.151899 0 20.831826-8.679928 20.831827-20.831826 0-10.415913-8.679928-20.831826-20.831827-20.831827z m-534.683544 97.21519c-41.663653 0-76.383363-34.719711-76.383363-76.383363 0-41.663653 34.719711-76.383363 76.383363-76.383364 41.663653 0 76.383363 34.719711 76.383364 76.383364-1.735986 41.663653-34.719711 76.383363-76.383364 76.383363zM1055.479204 484.687161h-67.703435c-10.415913-55.551537-57.287523-97.21519-116.311031-97.21519-57.287523 0-105.895118 41.663653-116.311031 97.21519H55.551537c-12.151899 0-20.831826 8.679928-20.831826 20.831826s8.679928 20.831826 20.831826 20.831827h699.60217c10.415913 55.551537 57.287523 97.21519 116.311031 97.21519 57.287523 0 105.895118-41.663653 116.311031-97.21519h67.703435c12.151899 0 20.831826-8.679928 20.831827-20.831827s-8.679928-20.831826-20.831827-20.831826z m-184.014466 97.21519c-41.663653 0-76.383363-34.719711-76.383364-76.383364 0-41.663653 34.719711-76.383363 76.383364-76.383363 41.663653 0 76.383363 34.719711 76.383363 76.383363 0 41.663653-34.719711 76.383363-76.383363 76.383364z"  ></path></symbol><symbol id="oicon-gitee" viewBox="0 0 1024 1024"><path d="M966.524718 400.672821H456.520205c-24.497231 0-44.347077 19.954872-44.347077 44.557128v133.540102c0 24.602256 19.849846 44.530872 44.347077 44.530872h288.295385c33.266872 0 44.320821 11.132718 44.347077 44.530872 0.026256 89.035487-50.884923 133.566359-133.041231 133.566359h-376.779487c-24.602256 0-44.530872-19.954872-44.530872-44.530872v-400.67282c0-73.780513 59.575795-133.592615 133.014974-133.592616h598.593641c24.470974 0 44.320821-19.928615 44.320821-44.504615V44.530872C1010.740513 19.928615 990.916923 0 966.419692 0H367.826051C171.979487 0 13.128205 159.455179 13.128205 356.168205v623.32718C13.128205 1004.045128 32.978051 1024 57.475282 1024h598.646154c196.187897 0 352.439795-170.325333 354.619077-367.327179 0.131282-11.106462 0.131282-200.33641 0.131282-211.442872a44.478359 44.478359 0 0 0-44.347077-44.530872z"  ></path></symbol><symbol id="oicon-trending" viewBox="0 0 1106 1024"><path d="M0 290.766798m55.308301 0l0 0q55.308301 0 55.3083 55.3083l0 608.391307q0 55.308301-55.3083 55.3083l0 0q-55.308301 0-55.308301-55.3083l0-608.391307q0-55.308301 55.308301-55.3083Z" fill="#F5A623" ></path><path d="M331.849803 14.225295m55.308301 0l0 0q55.308301 0 55.308301 55.3083l0 884.93281q0 55.308301-55.308301 55.3083l0 0q-55.308301 0-55.308301-55.3083l0-884.93281q0-55.308301 55.308301-55.3083Z" fill="#F5A623" opacity=".8" ></path><path d="M663.699607 401.383399m55.3083 0l0 0q55.308301 0 55.308301 55.3083l0 497.774706q0 55.308301-55.308301 55.3083l0 0q-55.308301 0-55.3083-55.3083l0-497.774706q0-55.308301 55.3083-55.3083Z" fill="#F5A623" opacity=".6" ></path><path d="M995.54941 124.841896m55.308301 0l0 0q55.308301 0 55.3083 55.308301l0 774.316208q0 55.308301-55.3083 55.3083l0 0q-55.308301 0-55.308301-55.3083l0-774.316208q0-55.308301 55.308301-55.308301Z" fill="#F5A623" opacity=".4" ></path></symbol></svg>';if((e=document.getElementsByTagName("script"))[e.length-1].getAttribute("data-injectcss")&&!t.__oicon__svg__cssinject__){t.__oicon__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(e){console}}n=function(){var t,e,n,o,l,c;(t=document.createElement("div")).innerHTML=s,s=null,(e=t.getElementsByTagName("svg")[0])&&(e.setAttribute("aria-hidden","true"),e.style.position="absolute",e.style.width=0,e.style.height=0,e.style.overflow="hidden",n=e,(o=document.body).firstChild?(l=n,(c=o.firstChild).parentNode.insertBefore(l,c)):o.appendChild(n))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(n,0):(o=function(){document.removeEventListener("DOMContentLoaded",o,!1),n()},document.addEventListener("DOMContentLoaded",o,!1)):document.attachEvent&&(l=n,c=t.document,i=!1,a=function(){i||(i=!0,l())},(d=function(){try{c.documentElement.doScroll("left")}catch(t){return void setTimeout(d,50)}a()})(),c.onreadystatechange=function(){"complete"==c.readyState&&(c.onreadystatechange=null,a())})}(window);
!function(x){function t(t,e,n){return n=u(e,n),this.on("click.pjax",t,function(t){var e=n;e.container||((e=x.extend({},n)).container=x(this).attr("data-pjax")),a(t,e)})}function a(t,e,n){var a,r,o,i,c;if(n=u(e,n),a=t.currentTarget,r=x(a),"A"!==a.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";1<t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||location.protocol===a.protocol&&location.hostname===a.hostname&&(-1<a.href.indexOf("#")&&s(a)==s(location)||t.isDefaultPrevented()||(o={url:a.href,container:r.attr("data-pjax"),target:a},i=x.extend({},o,n),c=x.Event("pjax:click"),r.trigger(c,[i]),c.isDefaultPrevented()||(g(i),t.preventDefault(),r.trigger("pjax:clicked",[i]))))}function e(t,e,n){var a,r,o;if(n=u(e,n),a=t.currentTarget,r=x(a),"FORM"!==a.tagName.toUpperCase())throw"$.pjax.submit requires a form element";if("GET"!==(o={type:(r.attr("method")||"GET").toUpperCase(),url:r.attr("action"),container:r.attr("data-pjax"),target:a}).type&&void 0!==window.FormData)o.data=new FormData(a),o.processData=!1,o.contentType=!1;else{if(r.find(":file").length)return;o.data=r.serializeArray()}g(x.extend({},o,n)),t.preventDefault()}function g(d){function f(t,e,n){n||(n={}),n.relatedTarget=d.target;var a=x.Event(t,n);return m.trigger(a,e),!a.isDefaultPrevented()}var h,t,m,a,e,n,r;if(d=x.extend(!0,{},x.ajaxSettings,g.defaults,d),x.isFunction(d.url)&&(d.url=d.url()),h=w(d.url).hash,"string"!==(t=x.type(d.container)))throw"expected string value for 'container' option; got "+t;if(!(m=d.context=x(d.container)).length)throw"the container selector '"+d.container+"' did not match anything";return d.data||(d.data={}),x.isArray(d.data)?d.data.push({name:"_pjax",value:d.container}):d.data._pjax=d.container,d.beforeSend=function(t,e){if("GET"!==e.type&&(e.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",d.container),!f("pjax:beforeSend",[t,e]))return!1;0<e.timeout&&(a=setTimeout(function(){f("pjax:timeout",[t,d])&&t.abort("timeout")},e.timeout),e.timeout=0);var n=w(e.url);h&&(n.hash=h),d.requestUrl=l(n)},d.complete=function(t,e){a&&clearTimeout(a),f("pjax:complete",[t,e,d]),f("pjax:end",[t,d])},d.error=function(t,e,n){var a=b("",t,d),r=f("pjax:error",[t,e,n,d]);"GET"==d.type&&"abort"!==e&&r&&v(a.url)},d.success=function(t,e,n){var a,r,o,i,c=g.state,s="function"==typeof x.pjax.defaults.version?x.pjax.defaults.version():x.pjax.defaults.version,u=n.getResponseHeader("X-PJAX-Version"),l=b(t,n,d),p=w(l.url);if(h&&(p.hash=h,l.url=p.href),s&&u&&s!==u)v(l.url);else if(l.contents){if(g.state={id:d.id||y(),url:l.url,title:l.title,container:d.container,fragment:d.fragment,timeout:d.timeout},(d.push||d.replace)&&window.history.replaceState(g.state,l.title,l.url),x.contains(m,document.activeElement))try{document.activeElement.blur()}catch(t){}l.title&&(document.title=l.title),f("pjax:beforeReplace",[l.contents,d],{state:g.state,previousState:c}),m.html(l.contents),(a=m.find("input[autofocus], textarea[autofocus]").last()[0])&&document.activeElement!==a&&a.focus(),function(t){if(!t)return;var r=x("script[src]");t.each(function(){var t,e,n=this.src,a=r.filter(function(){return this.src===n});a.length||(t=document.createElement("script"),(e=x(this).attr("type"))&&(t.type=e),t.src=x(this).attr("src"),document.head.appendChild(t))})}(l.scripts),r=d.scrollTo,h&&(o=decodeURIComponent(h.slice(1)),(i=document.getElementById(o)||document.getElementsByName(o)[0])&&(r=x(i).offset().top)),"number"==typeof r&&x(window).scrollTop(r),f("pjax:success",[t,e,n,d])}else v(l.url)},g.state||(g.state={id:y(),url:window.location.href,title:document.title,container:d.container,fragment:d.fragment,timeout:d.timeout},window.history.replaceState(g.state,document.title)),p(g.xhr),g.options=d,0<(e=g.xhr=x.ajax(d)).readyState&&(d.push&&!d.replace&&(n=g.state.id,r=[d.container,j(m)],E[n]=r,P.push(n),T(S,0),T(P,g.defaults.maxCacheLength),window.history.pushState(null,"",d.requestUrl)),f("pjax:start",[e,d]),f("pjax:send",[e,d])),g.xhr}function n(t,e){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return g(x.extend(n,u(t,e)))}function v(t){window.history.replaceState(null,"",g.state.url),window.location.replace(t)}function r(t){var e,n,a,r,o,i,c,s,u,l;if(m||p(g.xhr),e=g.state,(n=t.state)&&n.container){if(m&&C==n.url)return;if(e){if(e.id===n.id)return;a=e.id<n.id?"forward":"back"}o=(r=E[n.id]||[])[0]||n.container,i=x(o),c=r[1],i.length?(e&&function(t,e,n){var a,r;E[e]=n,r="forward"===t?(a=P,S):(a=S,P);a.push(e),(e=r.pop())&&delete E[e];T(a,g.defaults.maxCacheLength)}(a,e.id,[o,j(i)]),s=x.Event("pjax:popstate",{state:n,direction:a}),i.trigger(s),u={id:n.id,url:n.url,container:o,push:!1,fragment:n.fragment,timeout:n.timeout,scrollTo:!1},c?(i.trigger("pjax:start",[null,u]),(g.state=n).title&&(document.title=n.title),l=x.Event("pjax:beforeReplace",{state:n,previousState:e}),i.trigger(l,[c,u]),i.html(c),i.trigger("pjax:end",[null,u])):g(u),i[0].offsetHeight):v(location.href)}m=!1}function o(t){var e,n,a=x.isFunction(t.url)?t.url():t.url,r=t.type?t.type.toUpperCase():"GET",o=x("<form>",{method:"GET"===r?"GET":"POST",action:a,style:"display:none"});if("GET"!==r&&"POST"!==r&&o.append(x("<input>",{type:"hidden",name:"_method",value:r.toLowerCase()})),"string"==typeof(e=t.data))x.each(e.split("&"),function(t,e){var n=e.split("=");o.append(x("<input>",{type:"hidden",name:n[0],value:n[1]}))});else if(x.isArray(e))x.each(e,function(t,e){o.append(x("<input>",{type:"hidden",name:e.name,value:e.value}))});else if("object"==typeof e)for(n in e)o.append(x("<input>",{type:"hidden",name:n,value:e[n]}));x(document.body).append(o),o.submit()}function p(t){t&&t.readyState<4&&(t.onreadystatechange=x.noop,t.abort())}function y(){return(new Date).getTime()}function j(t){var e=t.clone();return e.find("script").each(function(){this.src||x._data(this,"globalEval",!1)}),e.contents()}function l(t){return t.search=t.search.replace(/([?&])(_pjax|_)=[^&]*/g,"").replace(/^&/,""),t.href.replace(/\?($|#)/,"$1")}function w(t){var e=document.createElement("a");return e.href=t,e}function s(t){return t.href.replace(/#.*/,"")}function u(t,e){return t&&e?((e=x.extend({},e)).container=t,e):x.isPlainObject(t)?t:{container:t}}function d(t,e){return t.filter(e).add(t.find(e))}function f(t){return x.parseHTML(t,document,!0)}function b(t,e,n){var a,r,o,i,c={},s=/<html/i.test(t),u=e.getResponseHeader("X-PJAX-URL");return c.url=u?l(w(u)):n.requestUrl,a=s?(r=x(f(t.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0])),null!=(o=t.match(/<head[^>]*>([\s\S.]*)<\/head>/i))?x(f(o[0])):r):r=x(f(t)),0===r.length||(c.title=d(a,"title").last().text(),n.fragment?(i=r,"body"!==n.fragment&&(i=d(i,n.fragment).first()),i.length&&(c.contents="body"===n.fragment?i:i.contents(),c.title||(c.title=i.attr("title")||i.data("title")))):s||(c.contents=r),c.contents&&(c.contents=c.contents.not(function(){return x(this).is("title")}),c.contents.find("title").remove(),c.scripts=d(c.contents,"script[src]").remove(),c.contents=c.contents.not(c.scripts)),c.title&&(c.title=x.trim(c.title))),c}function T(t,e){for(;t.length>e;)delete E[t.shift()]}function i(){return x("meta").filter(function(){var t=x(this).attr("http-equiv");return t&&"X-PJAX-VERSION"===t.toUpperCase()}).attr("content")}function c(){x.fn.pjax=t,x.pjax=g,x.pjax.enable=x.noop,x.pjax.disable=h,x.pjax.click=a,x.pjax.submit=e,x.pjax.reload=n,x.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:i},x(window).on("popstate.pjax",r)}function h(){x.fn.pjax=function(){return this},x.pjax=o,x.pjax.enable=c,x.pjax.disable=x.noop,x.pjax.click=x.noop,x.pjax.submit=x.noop,x.pjax.reload=function(){window.location.reload()},x(window).off("popstate.pjax",r)}var E,S,P,m=!0,C=window.location.href,A=window.history.state;A&&A.container&&(g.state=A),"state"in window.history&&(m=!1),E={},S=[],P=[],x.event.props&&x.inArray("state",x.event.props)<0?x.event.props.push("state"):"state"in x.Event.prototype||x.event.addProp("state"),x.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),x.support.pjax?c():h()}(jQuery);
!function(e,r){if("function"==typeof define&&define.amd)define(["exports","jquery"],function(e,i){return r(e,i)});else if("undefined"!=typeof exports){var i=require("jquery");r(exports,i)}else r(e,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,u){function i(t,r){function a(e,i,r){return e[i]=r,e}function e(){return n}var n={},s={};this.addPair=function(e){if(!f.validate.test(e.name))return this;var i=function(e,i){var r,t,n;for(t=e.match(f.key);void 0!==(r=t.pop());)f.push.test(r)?(n=e.replace(/\[\]$/,""),void 0===s[n]&&(s[n]=0),i=a([],s[n]++,i)):f.fixed.test(r)?i=a([],r,i):f.named.test(r)&&(i=a({},r,i));return i}(e.name,function(e){switch(u('[name="'+e.name+'"]',r).attr("type")){case"checkbox":return"on"===e.value||e.value;default:return e.value}}(e));return n=t.extend(!0,n,i),this},this.addPairs=function(e){if(!t.isArray(e))throw new Error("formSerializer.addPairs expects an Array");for(var i=0,r=e.length;i<r;i++)this.addPair(e[i]);return this},this.serialize=e,this.serializeJSON=function(){return JSON.stringify(e())}}var f={validate:/^[a-z_][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i};return i.patterns=f,i.serializeObject=function(){return new i(u,this).addPairs(this.serializeArray()).serialize()},i.serializeJSON=function(){return new i(u,this).addPairs(this.serializeArray()).serializeJSON()},void 0!==u.fn&&(u.fn.serializeObject=i.serializeObject,u.fn.serializeJSON=i.serializeJSON),e.FormSerializer=i});
!function(o){var a={type:"info",header:"",content:"",closeable:!1,disappear:0},e=function(e){var i,n,s,t,d;if("string"!=typeof e)return"object"==typeof e?(i=o.extend({},a,e),n=o(this),s=0<i.type.length?"."+i.type:"",t=n.find(".ui.message.osc"+s),d="",i.closeable&&(d+='<i class="close icon"></i>',t.on("click",".close",function(){t.transition("fade")})),0<i.header.length&&(d+='<div class="header">'+i.header+"</div>"),0<i.content.length&&(d+="<p>"+i.content+"</p>"),t.html(d),t.removeClass("hidden"),void(0<i.disappear&&setTimeout(function(){t.addClass("hidden")},i.disappear))):void 0;o.isFunction(c[e])&&c[e].call(this)},c={hideAll:function(){o(this).find(".ui.message.osc").addClass("hidden")}};o.fn.message=e}(window.jQuery||window.$);
!function(a,t){a.fn.toast=function(t){var o=a(this),n={type:"success",position:"fixed",duration:3e3,animateDuration:1e3,content:"提示",top:"50%",left:"50%",zIndex:1002,closePrev:!0},e=a.extend(n,t||{}),i=function(){var t,n,i=e.content||"";0===e.duration&&(i+='<i class="close icon close-btn"></i>'),e.closePrev&&a(".cpt-toast").remove(),t=-1<["info","success","positive","error","negative","warning"].indexOf(e.type)?e.type:"info",(n=a("<div class='ui "+t+" message compact transition cpt-toast'></div>").css({position:e.position,top:e.top,left:e.left,"z-index":e.zIndex,"-webkit-transform":"translate3d(-50%, -50%, 0)","-moz-transform":"translate3d(-50%, -50%, 0)",transform:"translate3d(-50%, -50%, 0)","-webkit-animation-duration":e.animateDuration/1e3+"s","-moz-animation-duration":e.animateDuration/1e3+"s","animation-duration":e.animateDuration/1e3+"s"}).html(i)).appendTo(o),n.fadeIn("this",function(){0===e.duration&&n.find(".close-btn").on("click",function(){n.fadeOut(400,function(){n.remove()})})}),0<e.duration&&setTimeout(function(){n.fadeOut(400,function(){a(this).remove()})},e.duration)};i()}}(jQuery,window);
!function(){var e={bindLink:function(){var a=this;$(document).on("click",".send-message-btn",function(){var e,t,s;if(!window.common.checkLogin())return!1;e=$(this),t=e.attr("data-user-id"),s=e.attr("data-user-name"),0===$.find(".send-message.modal").length&&!0!==window.oscSendMessageLoading?(window.oscSendMessageLoading=!0,$.get(page.space_user_url+"/widgets/private_message_modal",function(e){var n=document.createElement("div");n.innerHTML=e,document.body.appendChild(n),a.initModal(),a.showModal(t,s)}).always(function(){window.oscSendMessageLoading=!1})):a.showModal(t,s)})},initModal:function(){var s=$(".send-message.modal"),a=$("#sendMessageForm");a.form({inline:!0,fields:{content:{rules:[{type:"empty",prompt:"请输入内容"},{type:"maxLength[250]",prompt:"内容长度不能超过 {ruleValue} 个字"}]}}}).api({url:page.space_user_url+"/msg/send",method:"post",serializeForm:!0,beforeSend:function(e){var n,t;return $(this).message("hideAll"),n=s.attr("data-user-id"),t=e.data,e.data={receiver:n,content:t.content},e},onSuccess:function(e,n,t){1===e.code?($(this).message({type:"positive",content:e.message||"发送成功"}),a.form("reset"),setTimeout(function(){s.modal("hide")},2e3)):$(this).message({type:"negative",content:e.message||"发送失败"})},onFailure:function(e,n){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}}),s.modal({onShow:function(){a.form("reset"),a.message("hideAll");var e=$(this).attr("data-user-name")||"";0<(e=e.trim()).length&&s.find("span.user-name").html(e)},onApprove:function(){return a.message("hideAll"),a.form("submit"),!1}}),s.on("keydown",function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&s.find(".positive.button").click()})},showModal:function(e,n){var t=$(".send-message.modal");t.attr("data-user-id",e),t.attr("data-user-name",n),t.modal("show")}},n=new window.common.dynamicLoader(["/new-osc/js/utils/plugins/jquery.serialize-object.min.js","/new-osc/js/utils/plugins/osc-message.js"]);n.loadFiles(),e.bindLink()}();
({statusCode:{UN_FOLLOW:1,FOLLOWED:2,FOLLOW_EACH_OTHER:3},statusConf:{UN_FOLLOW:{normal:{text:"关注",icon:"heart outline icon"},hover:{text:"关注",icon:"heart icon"}},FOLLOWED:{normal:{text:"已关注",icon:"heart icon"},hover:{text:"取消关注",icon:"heart outline icon"}},FOLLOW_EACH_OTHER:{normal:{text:"互相关注",icon:"exchange icon"},hover:{text:"取消关注",icon:"heart outline icon"}}},init:function(){this.bindHover(),this.bindClick()},bindHover:function(){var n=this;$(document).on("mouseenter",".follow-btn",function(){var t=$(this),o=parseInt(t.attr("data-follow-status")),a=t.attr("data-icon-color");n.setBtnFollowStatus(o,"hover",t,a)}),$(document).on("mouseleave",".follow-btn",function(){var t=$(this),o=parseInt(t.attr("data-follow-status")),a=t.attr("data-icon-color");n.setBtnFollowStatus(o,"normal",t,a)})},bindClick:function(){var e=this;$(document).on("click",".follow-btn",function(){var o,a,n;if(!window.common.checkLogin())return!1;o=$(this),a=o.attr("data-user-id"),n=o.attr("data-icon-color"),$.post(page.space_user_url+"/user/switch_follow",{friendid:a},function(t){1===t.code?(e.setBtnFollowStatus(t.result.status,"normal",o,n),e.setGlobalFollowCount(page.g_user_id,t.result.meFollowing||0,t.result.meFollowers||0),e.setGlobalFollowCount(a,t.result.friendFollowing||0,t.result.friendFollowers||0)):$("body").toast({type:"error",content:t.message||"操作失败"})})})},setBtnFollowStatus:function(t,o,a,n){var e,s,l,r;switch(o="normal"===o?"normal":"hover",n="red"===n?"red":"",e=this,s=a.find(".text"),l=a.find("i"),t){case e.statusCode.UN_FOLLOW:a.attr("data-follow-status",e.statusCode.UN_FOLLOW),s.text(e.statusConf.UN_FOLLOW[o].text),s&&0===s.length&&a.attr("title",e.statusConf.UN_FOLLOW[o].text),r=e.statusConf.UN_FOLLOW[o].icon,l.attr("class","hover"===o?r+" "+n:r);break;case e.statusCode.FOLLOWED:a.attr("data-follow-status",e.statusCode.FOLLOWED),s.text(e.statusConf.FOLLOWED[o].text),s&&0===s.length&&a.attr("title",e.statusConf.FOLLOWED[o].text),r=e.statusConf.FOLLOWED[o].icon,l.attr("class","normal"===o?r+" "+n:r);break;case e.statusCode.FOLLOW_EACH_OTHER:a.attr("data-follow-status",e.statusCode.FOLLOW_EACH_OTHER),s.text(e.statusConf.FOLLOW_EACH_OTHER[o].text),s&&0===s.length&&a.attr("title",e.statusConf.FOLLOW_EACH_OTHER[o].text),r=e.statusConf.FOLLOW_EACH_OTHER[o].icon,l.attr("class","normal"===o?r+" "+n:r)}},setGlobalFollowCount:function(t,s,l){if(null==t||""===t||""===t.trim())return!1;$('[data-following-count][data-user-id="'+t+'"]').each(function(t,o){var a=$(o),n=a.data("format"),e=s;n&&(e=window.common.formatNumberK(s)),a.text(e),a.attr("data-following-count",s)}),$('[data-followers-count][data-user-id="'+t+'"]').each(function(t,o){var a=$(o),n=a.data("format"),e=l;n&&(e=window.common.formatNumberK(l)),a.text(e),a.attr("data-followers-count",l)})}}).init();
!function(c){c.fn.imgOptimize=function(a,n){function s(t,i,h){var a,n;if(void 0===i||void 0===h)return!1;c(t).data("init")||(c(t).data("init",!0),a=t.naturalWidth,n=t.naturalHeight,a<i&&n<h?(c(t).css("width","100%"),c(t).css("height","100%"),c(t).css("object-fit","fill")):i/h<a/n?(c(t).css("width","auto"),c(t).css("height","100%")):(c(t).css("width","100%"),c(t).css("height","auto")))}return this.each(function(){var t=this,i=a,h=n;void 0!==i&&void 0!==h||(i=c(this).data("width"),h=c(this).data("height")),t.onload=function(){s(t,i,h)},t.complete&&s(t,i,h)})}}(jQuery);
!function(s){s.fn.emoticon=function(e){var r=s.extend({},e),n="bowtie,smile,laughing,blush,smiley,relaxed,smirk,heart_eyes,kissing_heart,kissing_closed_eyes,flushed,relieved,satisfied,grin,wink,stuck_out_tongue_winking_eye,stuck_out_tongue_closed_eyes,grinning,kissing,kissing_smiling_eyes,stuck_out_tongue,sleeping,worried,frowning,anguished,open_mouth,grimacing,confused,hushed,expressionless,unamused,sweat_smile,sweat,disappointed_relieved,weary,pensive,disappointed,confounded,fearful,cold_sweat,persevere,cry,sob,joy,astonished,scream,neckbeard,tired_face,angry,rage,triumph,sleepy,yum,mask,sunglasses,dizzy_face,imp,smiling_imp,neutral_face,no_mouth,innocent,alien,yellow_heart,blue_heart,purple_heart,heart,green_heart,broken_heart,heartbeat,heartpulse,two_hearts,revolving_hearts,cupid,sparkling_heart,sparkles,star,star2,dizzy,boom,collision,anger,exclamation,question,grey_exclamation,grey_question,zzz,dash,sweat_drops,notes,musical_note,fire,hankey,poop,shit,+1,thumbsup,-1,thumbsdown,ok_hand,punch,facepunch,fist,v,wave,hand,raised_hand,open_hands,point_up,point_down,point_left,point_right,raised_hands,pray,point_up_2,clap,muscle,metal,fu,walking,runner,running,couple,family,two_men_holding_hands,two_women_holding_hands,dancer,dancers,ok_woman,no_good,information_desk_person,raising_hand,bride_with_veil,person_with_pouting_face,person_frowning,bow,couplekiss,couple_with_heart,massage,haircut,nail_care,boy,girl,woman,man,baby,older_woman,older_man,person_with_blond_hair,man_with_gua_pi_mao,man_with_turban,construction_worker,cop,angel,princess,smiley_cat,smile_cat,heart_eyes_cat,kissing_cat,smirk_cat,scream_cat,crying_cat_face,joy_cat,pouting_cat,japanese_ogre,japanese_goblin,see_no_evil,hear_no_evil,speak_no_evil,guardsman,skull,feet,lips,kiss,droplet,ear,eyes,nose,tongue,love_letter,bust_in_silhouette,busts_in_silhouette,speech_balloon,thought_balloon,feelsgood,finnadie,goberserk,godmode,hurtrealbad,rage1,rage2,rage3,rage4,suspect,trollface,sunny,umbrella,cloud,snowflake,snowman,zap,cyclone,foggy,ocean,cat,dog,mouse,hamster,rabbit,wolf,frog,tiger,koala,bear,pig,pig_nose,cow,boar,monkey_face,monkey,horse,racehorse,camel,sheep,elephant,panda_face,snake,bird,baby_chick,hatched_chick,hatching_chick,chicken,penguin,turtle,bug,honeybee,ant,beetle,snail,octopus,tropical_fish,fish,whale,whale2,dolphin,cow2,ram,rat,water_buffalo,tiger2,rabbit2,dragon,goat,rooster,dog2,pig2,mouse2,ox,dragon_face,blowfish,crocodile,dromedary_camel,leopard,cat2,poodle,paw_prints,bouquet,cherry_blossom,tulip,four_leaf_clover,rose,sunflower,hibiscus,maple_leaf,leaves,fallen_leaf,herb,mushroom,cactus,palm_tree,evergreen_tree,deciduous_tree,chestnut,seedling,blossom,ear_of_rice,shell,globe_with_meridians,sun_with_face,full_moon_with_face,new_moon_with_face,new_moon,waxing_crescent_moon,first_quarter_moon,waxing_gibbous_moon,full_moon,waning_gibbous_moon,last_quarter_moon,waning_crescent_moon,last_quarter_moon_with_face,first_quarter_moon_with_face,moon,earth_africa,earth_americas,earth_asia,volcano,milky_way,partly_sunny,octocat,squirrel,bamboo,gift_heart,dolls,school_satchel,mortar_board,flags,fireworks,sparkler,wind_chime,rice_scene,jack_o_lantern,ghost,santa,christmas_tree,gift,bell,no_bell,tanabata_tree,tada,confetti_ball,balloon,crystal_ball,cd,dvd,floppy_disk,camera,video_camera,movie_camera,computer,tv,iphone,phone,telephone,telephone_receiver,pager,fax,minidisc,vhs,sound,speaker,mute,loudspeaker,mega,hourglass,hourglass_flowing_sand,alarm_clock,watch,radio,satellite,loop,mag,mag_right,unlock,lock,lock_with_ink_pen,closed_lock_with_key,key,bulb,flashlight,high_brightness,low_brightness,electric_plug,battery,calling,email,mailbox,postbox,bath,bathtub,shower,toilet,wrench,nut_and_bolt,hammer,seat,moneybag,yen,dollar,pound,euro,credit_card,money_with_wings,e-mail,inbox_tray,outbox_tray,envelope,incoming_envelope,postal_horn,mailbox_closed,mailbox_with_mail,mailbox_with_no_mail,package,door,smoking,bomb,gun,hocho,pill,syringe,page_facing_up,page_with_curl,bookmark_tabs,bar_chart,chart_with_upwards_trend,chart_with_downwards_trend,scroll,clipboard,calendar,date,card_index,file_folder,open_file_folder,scissors,pushpin,paperclip,black_nib,pencil2,straight_ruler,triangular_ruler,closed_book,green_book,blue_book,orange_book,notebook,notebook_with_decorative_cover,ledger,books,bookmark,name_badge,microscope,telescope,newspaper,football,basketball,soccer,baseball,tennis,8ball,rugby_football,bowling,golf,mountain_bicyclist,bicyclist,horse_racing,snowboarder,swimmer,surfer,ski,spades,hearts,clubs,diamonds,gem,ring,trophy,musical_score,musical_keyboard,violin,space_invader,video_game,black_joker,flower_playing_cards,game_die,dart,mahjong,clapper,memo,pencil,book,art,microphone,headphones,trumpet,saxophone,guitar,shoe,sandal,high_heel,lipstick,boot,shirt,tshirt,necktie,womans_clothes,dress,running_shirt_with_sash,jeans,kimono,bikini,ribbon,tophat,crown,womans_hat,mans_shoe,closed_umbrella,briefcase,handbag,pouch,purse,eyeglasses,fishing_pole_and_fish,coffee,tea,sake,baby_bottle,beer,beers,cocktail,tropical_drink,wine_glass,fork_and_knife,pizza,hamburger,fries,poultry_leg,meat_on_bone,spaghetti,curry,fried_shrimp,bento,sushi,fish_cake,rice_ball,rice_cracker,rice,ramen,stew,oden,dango,egg,bread,doughnut,custard,icecream,ice_cream,shaved_ice,birthday,cake,cookie,chocolate_bar,candy,lollipop,honey_pot,apple,green_apple,tangerine,lemon,cherries,grapes,watermelon,strawberry,peach,melon,banana,pear,pineapple,sweet_potato,eggplant,tomato,corn,house,house_with_garden,school,office,post_office,hospital,bank,convenience_store,love_hotel,hotel,wedding,church,department_store,european_post_office,city_sunrise,city_sunset,japanese_castle,european_castle,tent,factory,tokyo_tower,japan,mount_fuji,sunrise_over_mountains,sunrise,stars,statue_of_liberty,bridge_at_night,carousel_horse,rainbow,ferris_wheel,fountain,roller_coaster,ship,speedboat,boat,sailboat,rowboat,anchor,rocket,airplane,helicopter,steam_locomotive,tram,mountain_railway,bike,aerial_tramway,suspension_railway,mountain_cableway,tractor,blue_car,oncoming_automobile,car,red_car,taxi,oncoming_taxi,articulated_lorry,bus,oncoming_bus,rotating_light,police_car,oncoming_police_car,fire_engine,ambulance,minibus,truck,train,station,train2,bullettrain_front,bullettrain_side,light_rail,monorail,railway_car,trolleybus,ticket,fuelpump,vertical_traffic_light,traffic_light,warning,construction,beginner,atm,slot_machine,busstop,barber,hotsprings,checkered_flag,crossed_flags,izakaya_lantern,moyai,circus_tent,performing_arts,round_pushpin,triangular_flag_on_post,jp,kr,cn,us,fr,es,it,ru,gb,uk,de,one,two,three,four,five,six,seven,eight,nine,keycap_ten,1234,zero,hash,symbols,arrow_backward,arrow_down,arrow_forward,arrow_left,capital_abcd,abcd,abc,arrow_lower_left,arrow_lower_right,arrow_right,arrow_up,arrow_upper_left,arrow_upper_right,arrow_double_down,arrow_double_up,arrow_down_small,arrow_heading_down,arrow_heading_up,leftwards_arrow_with_hook,arrow_right_hook,left_right_arrow,arrow_up_down,arrow_up_small,arrows_clockwise,arrows_counterclockwise,rewind,fast_forward,information_source,ok,twisted_rightwards_arrows,repeat,repeat_one,new,top,up,cool,free,ng,cinema,koko,signal_strength,u5272,u5408,u55b6,u6307,u6708,u6709,u6e80,u7121,u7533,u7a7a,u7981,sa,restroom,mens,womens,baby_symbol,no_smoking,parking,wheelchair,metro,baggage_claim,accept,wc,potable_water,put_litter_in_its_place,secret,congratulations,m,passport_control,left_luggage,customs,ideograph_advantage,cl,sos,id,no_entry_sign,underage,no_mobile_phones,do_not_litter,non-potable_water,no_bicycles,no_pedestrians,children_crossing,no_entry,eight_spoked_asterisk,sparkle,eight_pointed_black_star,heart_decoration,vs,vibration_mode,mobile_phone_off,chart,currency_exchange,aries,taurus,gemini,cancer,leo,virgo,libra,scorpius,sagittarius,capricorn,aquarius,pisces,ophiuchus,six_pointed_star,negative_squared_cross_mark,a,b,ab,o2,diamond_shape_with_a_dot_inside,recycle,end,back,on,soon,clock1,clock130,clock10,clock1030,clock11,clock1130,clock12,clock1230,clock2,clock230,clock3,clock330,clock4,clock430,clock5,clock530,clock6,clock630,clock7,clock730,clock8,clock830,clock9,clock930,heavy_dollar_sign,copyright,registered,tm,x,heavy_exclamation_mark,bangbang,interrobang,o,heavy_multiplication_x,heavy_plus_sign,heavy_minus_sign,heavy_division_sign,white_flower,100,heavy_check_mark,ballot_box_with_check,radio_button,link,curly_loop,wavy_dash,part_alternation_mark,trident,black_small_square,white_small_square,black_medium_small_square,white_medium_small_square,black_medium_square,white_medium_square,black_large_square,white_large_square,white_check_mark,black_square_button,white_square_button,black_circle,white_circle,red_circle,large_blue_circle,large_blue_diamond,large_orange_diamond,small_blue_diamond,small_orange_diamond,small_red_triangle,small_red_triangle_down,shipit",t=/:\w+?:/gi,_=/\[\d+?]/gi,i={replaceEmoticonText:function(e){var i=this,a=e.replace(t,function(e){var a=e.replace(/:/g,""),o=n.split(","),r=o.some(function(e){return e===a});return r?i.emojiRenderText(a):e}),o=a.replace(_,function(e){var a=e.replace(/\[*]*/g,"");return 0<=a&&a<=134?i.qqEmoticonRenderText(a):e});return o},emojiRenderText:function(e){return'<emoji align="absmiddle" data-emoji="emoji '+e+'" data-name="'+e+'"></emoji>'},qqEmoticonRenderText:function(e){return'<img data-emoticon="qq" src="'+(window.__STATIC_DOMAIN||"")+"/new-osc/js/ke/plugins/emoticons/"+e+'.gif" alt="'+e+'">'}};return this.each(function(){var e=this,a=s(e).html(),o=i.replaceEmoticonText(a)||a;s(e).html(o),"function"==typeof r.callback&&r.callback(o)})}}(jQuery);
!function(){var e={bindLink:function(){var r=this;$(document).on("click","a.ban[ban-report]",function(e){var t,a,o,n,i;if(!window.common.checkLogin())return!1;t=$(this),a=t.attr("data-id"),o=t.attr("data-key"),n=t.attr("data-obj-type"),i=t.attr("data-url"),0===$.find(".ban-report.modal").length&&!0!==window.oscBanReportLoading?(window.oscBanReportLoading=!0,$.get(page.space_user_url+"/widgets/ban_report_modal",function(e){var t=document.createElement("div");t.innerHTML=e,document.body.appendChild(t),r.initModal(),r.showModal(a,o,n,i)}).always(function(){window.oscBanReportLoading=!1})):r.showModal(a,o,n,i)})},initModal:function(){var r=$(".ban-report.modal"),e=$("#banReportForm");r.find(".checkbox").checkbox(),e.form({inline:!0,fields:{reason:{identifier:"reason",rules:[{type:"empty",prompt:"请选择原因"}]},memo:{identifier:"memo",rules:[{type:"maxLength[250]",prompt:"原因内容长度不能超过 {ruleValue} 个字"}]}}}).api({url:page.space_user_url+"/communityManage/reportv2",method:"post",serializeForm:!0,beforeSend:function(e){var t,a,o,n,i;return $(this).message("hideAll"),t=r.attr("data-id"),a=r.attr("data-key"),o=r.attr("data-obj-type"),n=r.attr("data-url"),i=e.data,e.data={reason:i.reason,memo:i.memo,obj_type:o,url:n,user_code:i.user_code},t&&""!==t&&0<parseInt(t)?e.data.obj_id=t:a&&""!==a&&(e.data.articleKey=a),e},onSuccess:function(e,t,a){1===e.code?($(this).message({type:"positive",content:e.message||"举报成功"}),setTimeout(function(){r.modal("hide")},2e3)):$(this).message({type:"negative",content:e.message||"网络错误，请稍后再试"})},onFailure:function(e,t){$(this).message({type:"negative",content:e.message||"网络错误，请稍后再试"})}}),r.modal({onShow:function(){e.form("reset"),e.message("hideAll")},onApprove:function(){return e.message("hideAll"),e.form("submit"),!1}}),r.on("keydown",function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&r.find(".positive.button").click()})},showModal:function(e,t,a,o){var n=$(".ban-report.modal");n.attr("data-id",e),n.attr("data-key",t),n.attr("data-obj-type",a),n.attr("data-url",o),n.modal("show")}},t=new window.common.dynamicLoader(["/new-osc/js/utils/plugins/jquery.serialize-object.min.js","/new-osc/js/utils/plugins/osc-message.js"]);t.loadFiles(),e.bindLink()}();
$(function(){var t,e={blockedBtnStatusCode:{UN_BLOCK:0,BLOCKED:1},bindLink:function(){var a=this;$(document).on("click","[user-block]",function(t){var e,o,n;if(!window.common.checkLogin())return!1;e=$(this),o=e.attr("data-id"),n=e.attr("data-status"),0===$.find(".user-block.modal").length&&!0!==window.oscuserBlockLoading?(window.oscuserBlockLoading=!0,$.get(page.space_user_url+"/widgets/user_block_modal",function(t){var e=document.createElement("div");e.innerHTML=t,document.body.appendChild(e),a.initModal(),a.showModal(o,n)}).always(function(){window.oscuserBlockLoading=!1})):a.showModal(o,n)})},initModal:function(){var c=this,l=$(".user-block.modal");l.find(".checkbox").checkbox(),l.modal({onShow:function(){var t=l.attr("data-status"),e=parseInt(t)===c.blockedBtnStatusCode.BLOCKED;e?(l.find(".header").text("解除加灰"),l.find(".content p").text("确定解除加灰该用户吗？"),l.find(".actions .ok.button").text("解除")):(l.find(".header").text("确认加灰"),l.find(".content p").text("将用户加入加灰名单后，对方将不可评论你的动态，同时你也不能看到对方的动态。"),l.find(".actions .ok.button").text("加灰"))},onApprove:function(){var a=l.attr("data-id"),s=l.attr("data-status"),t=parseInt(s)===c.blockedBtnStatusCode.BLOCKED,d=t?"解除加灰":"加灰";$.ajax({url:page.space_user_url+"/user/update_blacklist",method:"post",data:{blackId:a},success:function(t,e,o){var n;1===t.code?($("body").toast({type:"success",content:t.message||d+"成功"}),n=$('[user-block][data-id="'+a+'"][data-status="'+s+'"]'),!!t.result?(n.attr("data-status",c.blockedBtnStatusCode.BLOCKED),n.find(".text").text("解除加灰")):(n.attr("data-status",c.blockedBtnStatusCode.UN_BLOCK),n.find(".text").text("加灰")),l.modal("hide")):$("body").toast({type:"error",content:t.message||d+"失败"})},error:function(t,e,o){$("body").toast({type:"error",content:"网络错误，请稍后再试"})}})}})},showModal:function(t,e){var o=$(".user-block.modal");o.attr("data-id",t),o.attr("data-status",e),o.modal("show")}};e.bindLink(),(t={blockedBtnStatusCode:{UN_BLOCK:0,BLOCKED:1},blockedBtnStatusConf:{UN_BLOCK:{normal:{selfRemoveClass:"green",selfAddClass:"",text:"加灰",icon:"plus icon",textIcon:"+",textIconClass:"plus"},hover:{selfRemoveClass:"green",selfAddClass:"",text:"加灰",icon:"plus icon",textIcon:"+",textIconClass:"plus"}},BLOCKED:{normal:{selfRemoveClass:"green",selfAddClass:"green",text:"解除加灰",icon:"check icon",textIcon:"×",textIconClass:"check"},hover:{selfRemoveClass:"green",selfAddClass:"green",text:"解除加灰",icon:"",textIcon:"×",textIconClass:"check"}}},setBlockedBtnStatus:function(t,e,o){var n,a,s,d,c,l,i,r,u,k;switch(e="normal"===e?"normal":"hover",n=this,a=o.find(".text"),s=o.find("i"),d=o.find(".text-icon"),t){case n.blockedBtnStatusCode.UN_BLOCK:c=n.blockedBtnStatusConf.UN_BLOCK[e],o.attr("data-blocked-status",n.blockedBtnStatusCode.UN_BLOCK);break;case n.blockedBtnStatusCode.BLOCKED:c=n.blockedBtnStatusConf.BLOCKED[e],o.attr("data-blocked-status",n.blockedBtnStatusCode.BLOCKED)}a.text(c.text),l=c.icon,s.attr("class",l),i=c.textIcon,r=c.textIconClass,d.text(i),d.attr("class","").addClass("text-icon").addClass(r),u=c.selfRemoveClass,k=c.selfAddClass,o.removeClass(u).addClass(k)},bindBlockedBtnHover:function(){var o=this;$(document).on("mouseenter",".blocked-btn",function(){var t=$(this),e=parseInt(t.attr("data-blocked-status"));o.setBlockedBtnStatus(e,"hover",t)}),$(document).on("mouseleave",".blocked-btn",function(){var t=$(this),e=parseInt(t.attr("data-blocked-status"));o.setBlockedBtnStatus(e,"normal",t)})},bindBlockedBtnClick:function(){var c=this;$(document).on("click",".blocked-btn",function(t){var e,o,n,a,s,d;if(t.preventDefault(),e=$(this),o=this,n=parseInt(e.attr("data-blocked-status"))===c.blockedBtnStatusCode.BLOCKED,a=n?"解除加灰":"加灰",s=e.attr("data-id"),!window.common.checkLogin())return!1;d=$('.blocked-btn[data-id="'+s+'"]'),$.post(page.space_user_url+"/user/update_blacklist",{blackId:s},function(t){var e;1===t.code?(e=!!t.result?c.blockedBtnStatusCode.BLOCKED:c.blockedBtnStatusCode.UN_BLOCK,c.setBlockedBtnStatus(e,"normal",d)):$("body").toast({type:"error",content:t.message||a+"失败"})}).always(function(){var t=document.createEvent("Event");t.initEvent("subscribe",!0,!0),o.dispatchEvent(t)})})}}).bindBlockedBtnHover(),t.bindBlockedBtnClick(),$(document).on("mouseenter",".blocked",function(){var t=$(this);0===t.find(".blocked-cover-tip").length&&t.append('<div class="blocked-cover-tip"><span>亲，是不是眼花了？还是此人已被你“加灰” ？</span></div>'),setTimeout(function(){t.find(".blocked-cover-tip").addClass("hover")},0)}),$(document).on("mouseleave",".blocked",function(){$(this).find(".blocked-cover-tip").removeClass("hover")})});
!function(e){var t="object"==typeof window&&window||"object"==typeof self&&self;"undefined"!=typeof exports?e(exports):t&&(t.hljs=e({}),"function"==typeof define&&define.amd&&define([],function(){return t.hljs}))}(function(n){function h(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function b(e){return e.nodeName.toLowerCase()}function v(e,t){var r=e&&e.exec(t);return r&&0===r.index}function p(e){return a.test(e)}function l(e){var t,r={},a=Array.prototype.slice.call(arguments,1);for(t in e)r[t]=e[t];return a.forEach(function(e){for(t in e)r[t]=e[t]}),r}function m(e){var n=[];return function e(t,r){for(var a=t.firstChild;a;a=a.nextSibling)3===a.nodeType?r+=a.nodeValue.length:1===a.nodeType&&(n.push({event:"start",offset:r,node:a}),r=e(a,r),b(a).match(/br|hr|img|input/)||n.push({event:"stop",offset:r,node:a}));return r}(e,0),n}function y(s){function c(e){return e&&e.source||e}function o(e,t){return new RegExp(c(e),"m"+(s.cI?"i":"")+(t?"g":""))}!function t(r,e){var a,n,i;r.compiled||(r.compiled=!0,r.k=r.k||r.bK,r.k&&(a={},n=function(r,e){s.cI&&(e=e.toLowerCase()),e.split(" ").forEach(function(e){var t=e.split("|");a[t[0]]=[r,t[1]?Number(t[1]):1]})},"string"==typeof r.k?n("keyword",r.k):d(r.k).forEach(function(e){n(e,r.k[e])}),r.k=a),r.lR=o(r.l||/\w+/,!0),e&&(r.bK&&(r.b="\\b("+r.bK.split(" ").join("|")+")\\b"),r.b||(r.b=/\B|\b/),r.bR=o(r.b),r.e||r.eW||(r.e=/\B|\b/),r.e&&(r.eR=o(r.e)),r.tE=c(r.e)||"",r.eW&&e.tE&&(r.tE+=(r.e?"|":"")+e.tE)),r.i&&(r.iR=o(r.i)),null==r.r&&(r.r=1),r.c||(r.c=[]),r.c=Array.prototype.concat.apply([],r.c.map(function(e){return(t="self"===e?r:e).v&&!t.cached_variants&&(t.cached_variants=t.v.map(function(e){return l(t,{v:null},e)})),t.cached_variants||t.eW&&[l(t)]||[t];var t})),r.c.forEach(function(e){t(e,r)}),r.starts&&t(r.starts,e),i=r.c.map(function(e){return e.bK?"\\.?("+e.b+")\\.?":e.b}).concat([r.tE,r.i]).map(c).filter(Boolean),r.t=i.length?o(i.join("|"),!0):{exec:function(){return null}})}(s)}function w(e,t,c,r){function o(e,t,r,a){var n='<span class="'+(a?"":M.classPrefix);return(n+=e+'">')+t+(r?"":E)}function l(){var e,t;b+=null!=u.sL?(t="string"==typeof u.sL)&&!x[u.sL]?h(p):(e=t?w(u.sL,p,!0,i[u.sL]):N(p,u.sL.length?u.sL:void 0),0<u.r&&(m+=e.r),t&&(i[u.sL]=e.top),o(e.language,e.value,!1,!0)):function(){var e,t,r,a,n,i,s;if(!u.k)return h(p);for(a="",t=0,u.lR.lastIndex=0,r=u.lR.exec(p);r;)a+=h(p.substring(t,r.index)),n=u,i=r,s=_.cI?i[0].toLowerCase():i[0],(e=n.k.hasOwnProperty(s)&&n.k[s])?(m+=e[1],a+=o(e[0],h(r[0]))):a+=h(r[0]),t=u.lR.lastIndex,r=u.lR.exec(p);return a+h(p.substr(t))}(),p=""}function d(e){b+=e.cN?o(e.cN,"",!0):"",u=Object.create(e,{parent:{value:u}})}function a(e,t){var r,a,n,i,s;if(p+=e,null==t)return l(),0;if(r=function(e,t){var r,a;for(r=0,a=t.c.length;r<a;r++)if(v(t.c[r].bR,e))return t.c[r]}(t,u))return r.skip?p+=t:(r.eB&&(p+=t),l(),r.rB||r.eB||(p=t)),d(r),r.rB?0:t.length;if(a=function e(t,r){if(v(t.eR,r)){for(;t.endsParent&&t.parent;)t=t.parent;return t}return t.eW?e(t.parent,r):void 0}(u,t)){for((n=u).skip?p+=t:(n.rE||n.eE||(p+=t),l(),n.eE&&(p=t));u.cN&&(b+=E),u.skip||(m+=u.r),(u=u.parent)!==a.parent;);return a.starts&&d(a.starts),n.rE?0:t.length}if(i=t,s=u,!c&&v(s.iR,i))throw new Error('Illegal lexeme "'+t+'" for mode "'+(u.cN||"<unnamed>")+'"');return p+=t,t.length||1}var n,u,i,b,p,m,s,f,g,_=k(e);if(!_)throw new Error('Unknown language: "'+e+'"');for(y(_),i={},b="",n=u=r||_;n!==_;n=n.parent)n.cN&&(b=o(n.cN,"",!0)+b);p="",m=0;try{for(g=0;u.t.lastIndex=g,s=u.t.exec(t);)f=a(t.substring(g,s.index),s[0]),g=s.index+f;for(a(t.substr(g)),n=u;n.parent;n=n.parent)n.cN&&(b+=E);return{r:m,value:b,language:e,top:u}}catch(e){if(e.message&&-1!==e.message.indexOf("Illegal"))return{r:0,value:h(t)};throw e}}function N(r,e){e=e||M.languages||d(x);var a={r:0,value:h(r)},n=a;return e.filter(k).forEach(function(e){var t=w(e,r,!1);t.language=e,t.r>n.r&&(n=t),t.r>a.r&&(n=a,a=t)}),n.language&&(a.second_best=n),a}function f(e){return M.tabReplace||M.useBR?e.replace(i,function(e,t){return M.useBR&&"\n"===e?"<br>":M.tabReplace?t.replace(/\t/g,M.tabReplace):""}):e}function t(e){var t,r,a,n,i,s,c,o,l,d,u=function(e){var t,r,a,n,i=e.className+" ";if(i+=e.parentNode?e.parentNode.className:"",r=C.exec(i))return k(r[1])?r[1]:"no-highlight";for(t=0,a=(i=i.split(/\s+/)).length;t<a;t++)if(p(n=i[t])||k(n))return n}(e);p(u)||(M.useBR?(t=document.createElementNS("http://www.w3.org/1999/xhtml","div")).innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n"):t=e,i=t.textContent,a=u?w(u,i,!0):N(i),(r=m(t)).length&&((n=document.createElementNS("http://www.w3.org/1999/xhtml","div")).innerHTML=a.value,a.value=function(e,t,r){function a(){return e.length&&t.length?e[0].offset!==t[0].offset?e[0].offset<t[0].offset?e:t:"start"===t[0].event?e:t:e.length?e:t}function n(e){o+="<"+b(e)+g.map.call(e.attributes,function(e){return" "+e.nodeName+'="'+h(e.value).replace('"',"&quot;")+'"'}).join("")+">"}function i(e){o+="</"+b(e)+">"}function s(e){("start"===e.event?n:i)(e.node)}var c,o,l,d;for(c=0,o="",l=[];e.length||t.length;)if(d=a(),o+=h(r.substring(c,d[0].offset)),c=d[0].offset,d===e){for(l.reverse().forEach(i);s(d.splice(0,1)[0]),(d=a())===e&&d.length&&d[0].offset===c;);l.reverse().forEach(n)}else"start"===d[0].event?l.push(d[0].node):l.pop(),s(d.splice(0,1)[0]);return o+h(r.substr(c))}(r,m(n),i)),a.value=f(a.value),e.innerHTML=a.value,e.className=(s=e.className,c=u,o=a.language,l=c?_[c]:o,d=[s.trim()],s.match(/\bhljs\b/)||d.push("hljs"),-1===s.indexOf(l)&&d.push(l),d.join(" ").trim()),e.result={language:a.language,re:a.r},a.second_best&&(e.second_best={language:a.second_best.language,re:a.second_best.r}))}function r(){if(!r.called){r.called=!0;var e=document.querySelectorAll("pre code");g.forEach.call(e,t)}}function k(e){return e=(e||"").toLowerCase(),x[e]||x[_[e]]}var g=[],d=Object.keys,x={},_={},a=/^(no-?highlight|plain|text)$/i,C=/\blang(?:uage)?-([\w-]+)\b/i,i=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,E="</span>",M={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0};return n.highlight=w,n.highlightAuto=N,n.fixMarkup=f,n.highlightBlock=t,n.configure=function(e){M=l(M,e)},n.initHighlighting=r,n.initHighlightingOnLoad=function(){addEventListener("DOMContentLoaded",r,!1),addEventListener("load",r,!1)},n.registerLanguage=function(t,e){var r=x[t]=e(n);r.aliases&&r.aliases.forEach(function(e){_[e]=t})},n.listLanguages=function(){return d(x)},n.getLanguage=k,n.inherit=l,n.IR="[a-zA-Z]\\w*",n.UIR="[a-zA-Z_]\\w*",n.NR="\\b\\d+(\\.\\d+)?",n.CNR="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",n.BNR="\\b(0b[01]+)",n.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",n.BE={b:"\\\\[\\s\\S]",r:0},n.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[n.BE]},n.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[n.BE]},n.PWM={b:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},n.C=function(e,t,r){var a=n.inherit({cN:"comment",b:e,e:t,c:[]},r||{});return a.c.push(n.PWM),a.c.push({cN:"doctag",b:"(?:TODO|FIXME|NOTE|BUG|XXX):",r:0}),a},n.CLCM=n.C("//","$"),n.CBCM=n.C("/\\*","\\*/"),n.HCM=n.C("#","$"),n.NM={cN:"number",b:n.NR,r:0},n.CNM={cN:"number",b:n.CNR,r:0},n.BNM={cN:"number",b:n.BNR,r:0},n.CSSNM={cN:"number",b:n.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},n.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[n.BE,{b:/\[/,e:/\]/,r:0,c:[n.BE]}]},n.TM={cN:"title",b:n.IR,r:0},n.UTM={cN:"title",b:n.UIR,r:0},n.METHOD_GUARD={b:"\\.\\s*"+n.UIR,r:0},n}),hljs.registerLanguage("apache",function(e){var t={cN:"number",b:"[\\$%]\\d+"};return{aliases:["apacheconf"],cI:!0,c:[e.HCM,{cN:"section",b:"</?",e:">"},{cN:"attribute",b:/\w+/,r:0,k:{nomarkup:"order deny allow setenv rewriterule rewriteengine rewritecond documentroot sethandler errordocument loadmodule options header listen serverroot servername"},starts:{e:/$/,r:0,k:{literal:"on off all"},c:[{cN:"meta",b:"\\s\\[",e:"\\]$"},{cN:"variable",b:"[\\$%]\\{",e:"\\}",c:["self",t]},t,e.QSM]}}],i:/\S/}}),hljs.registerLanguage("bash",function(e){var t={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)}/}]},r={cN:"string",b:/"/,e:/"/,c:[e.BE,t,{cN:"variable",b:/\$\(/,e:/\)/,c:[e.BE]}]};return{aliases:["sh","zsh"],l:/\b-?[a-z\._]+\b/,k:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",_:"-ne -eq -lt -gt -f -d -e -s -l -a"},c:[{cN:"meta",b:/^#![^\n]+sh\s*$/,r:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[e.inherit(e.TM,{b:/\w[\w\d_]*/})],r:0},e.HCM,r,{cN:"string",b:/'/,e:/'/},t]}}),hljs.registerLanguage("shell",function(e){return{aliases:["console"],c:[{cN:"meta",b:"^\\s{0,3}[\\w\\d\\[\\]()@-]*[>%$#]",starts:{e:"$",sL:"bash"}}]}}),hljs.registerLanguage("javascript",function(e){var t,r="[A-Za-z$_][0-9A-Za-z$_]*",a={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},n={cN:"number",v:[{b:"\\b(0[bB][01]+)"},{b:"\\b(0[oO][0-7]+)"},{b:e.CNR}],r:0},i={cN:"subst",b:"\\$\\{",e:"\\}",k:a,c:[]},s={cN:"string",b:"`",e:"`",c:[e.BE,i]};return i.c=[e.ASM,e.QSM,s,n,e.RM],t=i.c.concat([e.CBCM,e.CLCM]),{aliases:["js","jsx"],k:a,c:[{cN:"meta",r:10,b:/^\s*['"]use (strict|asm)['"]/},{cN:"meta",b:/^#!/,e:/$/},e.ASM,e.QSM,s,e.CLCM,e.CBCM,n,{b:/[{,]\s*/,r:0,c:[{b:r+"\\s*:",rB:!0,r:0,c:[{cN:"attr",b:r,r:0}]}]},{b:"("+e.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[e.CLCM,e.CBCM,e.RM,{cN:"function",b:"(\\(.*?\\)|"+r+")\\s*=>",rB:!0,e:"\\s*=>",c:[{cN:"params",v:[{b:r},{b:/\(\s*\)/},{b:/\(/,e:/\)/,eB:!0,eE:!0,k:a,c:t}]}]},{b:/</,e:/(\/\w+|\w+\/)>/,sL:"xml",c:[{b:/<\w+\s*\/>/,skip:!0},{b:/<\w+/,e:/(\/\w+|\w+\/)>/,skip:!0,c:[{b:/<\w+\s*\/>/,skip:!0},"self"]}]}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[e.inherit(e.TM,{b:r}),{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,c:t}],i:/\[|%/},{b:/\$[(.]/},e.METHOD_GUARD,{cN:"class",bK:"class",e:/[{;=]/,eE:!0,i:/[:"\[\]]/,c:[{bK:"extends"},e.UTM]},{bK:"constructor",e:/\{/,eE:!0}],i:/#(?!!)/}}),hljs.registerLanguage("ini",function(e){var t={cN:"string",c:[e.BE],v:[{b:"'''",e:"'''",r:10},{b:'"""',e:'"""',r:10},{b:'"',e:'"'},{b:"'",e:"'"}]};return{aliases:["toml"],cI:!0,i:/\S/,c:[e.C(";","$"),e.HCM,{cN:"section",b:/^\s*\[+/,e:/\]+/},{b:/^[a-z0-9\[\]_-]+\s*=\s*/,e:"$",rB:!0,c:[{cN:"attr",b:/[a-z0-9\[\]_-]+/},{b:/=/,eW:!0,r:0,c:[{cN:"literal",b:/\bon|off|true|false|yes|no\b/},{cN:"variable",v:[{b:/\$[\w\d"][\w\d_]*/},{b:/\$\{(.*?)}/}]},t,{cN:"number",b:/([\+\-]+)?[\d]+_[\d_]+/},e.NM]}]}]}}),hljs.registerLanguage("coffeescript",function(e){var t,r,a,n={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super yield import export from as default await then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off",built_in:"npm require console print module global window document"},i="[A-Za-z$_][0-9A-Za-z$_]*",s={cN:"subst",b:/#\{/,e:/}/,k:n},c=[e.BNM,e.inherit(e.CNM,{starts:{e:"(\\s*/)?",r:0}}),{cN:"string",v:[{b:/'''/,e:/'''/,c:[e.BE]},{b:/'/,e:/'/,c:[e.BE]},{b:/"""/,e:/"""/,c:[e.BE,s]},{b:/"/,e:/"/,c:[e.BE,s]}]},{cN:"regexp",v:[{b:"///",e:"///",c:[s,e.HCM]},{b:"//[gim]*",r:0},{b:/\/(?![ *])(\\\/|.)*?\/[gim]*(?=\W|$)/}]},{b:"@"+i},{sL:"javascript",eB:!0,eE:!0,v:[{b:"```",e:"```"},{b:"`",e:"`"}]}];return s.c=c,t=e.inherit(e.TM,{b:i}),r="(\\(.*\\))?\\s*\\B[-=]>",a={cN:"params",b:"\\([^\\(]",rB:!0,c:[{b:/\(/,e:/\)/,k:n,c:["self"].concat(c)}]},{aliases:["coffee","cson","iced"],k:n,i:/\/\*/,c:c.concat([e.C("###","###"),e.HCM,{cN:"function",b:"^\\s*"+i+"\\s*=\\s*"+r,e:"[-=]>",rB:!0,c:[t,a]},{b:/[:\(,=]\s*/,r:0,c:[{cN:"function",b:r,e:"[-=]>",rB:!0,c:[a]}]},{cN:"class",bK:"class",e:"$",i:/[:="\[\]]/,c:[{bK:"extends",eW:!0,i:/[:="\[\]]/,c:[t]},t]},{b:i+":",e:":",rB:!0,rE:!0,r:0}])}}),hljs.registerLanguage("ruby",function(e){var t,r="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",a={keyword:"and then defined module in return redo if BEGIN retry end for self when next until do begin unless END rescue else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor",literal:"true false nil"},n={cN:"doctag",b:"@[A-Za-z]+"},i={b:"#<",e:">"},s=[e.C("#","$",{c:[n]}),e.C("^\\=begin","^\\=end",{c:[n],r:10}),e.C("^__END__","\\n$")],c={cN:"subst",b:"#\\{",e:"}",k:a},o={cN:"string",c:[e.BE,c],v:[{b:/'/,e:/'/},{b:/"/,e:/"/},{b:/`/,e:/`/},{b:"%[qQwWx]?\\(",e:"\\)"},{b:"%[qQwWx]?\\[",e:"\\]"},{b:"%[qQwWx]?{",e:"}"},{b:"%[qQwWx]?<",e:">"},{b:"%[qQwWx]?/",e:"/"},{b:"%[qQwWx]?%",e:"%"},{b:"%[qQwWx]?-",e:"-"},{b:"%[qQwWx]?\\|",e:"\\|"},{b:/\B\?(\\\d{1,3}|\\x[A-Fa-f0-9]{1,2}|\\u[A-Fa-f0-9]{4}|\\?\S)\b/},{b:/<<(-?)\w+$/,e:/^\s*\w+$/}]},l={cN:"params",b:"\\(",e:"\\)",endsParent:!0,k:a},d=[o,i,{cN:"class",bK:"class module",e:"$|;",i:/=/,c:[e.inherit(e.TM,{b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?"}),{b:"<\\s*",c:[{b:"("+e.IR+"::)?"+e.IR}]}].concat(s)},{cN:"function",bK:"def",e:"$|;",c:[e.inherit(e.TM,{b:r}),l].concat(s)},{b:e.IR+"::"},{cN:"symbol",b:e.UIR+"(\\!|\\?)?:",r:0},{cN:"symbol",b:":(?!\\s)",c:[o,{b:r}],r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{cN:"params",b:/\|/,e:/\|/,k:a},{b:"("+e.RSR+"|unless)\\s*",k:"unless",c:[i,{cN:"regexp",c:[e.BE,c],i:/\n/,v:[{b:"/",e:"/[a-z]*"},{b:"%r{",e:"}[a-z]*"},{b:"%r\\(",e:"\\)[a-z]*"},{b:"%r!",e:"![a-z]*"},{b:"%r\\[",e:"\\][a-z]*"}]}].concat(s),r:0}].concat(s);return c.c=d,t=[{b:/^\s*=>/,starts:{e:"$",c:l.c=d}},{cN:"meta",b:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+>"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d(p\\d+)?[^>]+>"+")",starts:{e:"$",c:d}}],{aliases:["rb","gemspec","podspec","thor","irb"],k:a,i:/\/\*/,c:s.concat(t).concat(d)}}),hljs.registerLanguage("sql",function(e){var t=e.C("--","$");return{cI:!0,i:/[<>{}*#]/,c:[{bK:"begin end start commit rollback savepoint lock alter create drop rename call delete do handler insert load replace select truncate update set show pragma grant merge describe use explain help declare prepare execute deallocate release unlock purge reset change stop analyze cache flush optimize repair kill install uninstall checksum restore check backup revoke comment",e:/;/,eW:!0,l:/[\w\.]+/,k:{keyword:"abort abs absolute acc acce accep accept access accessed accessible account acos action activate add addtime admin administer advanced advise aes_decrypt aes_encrypt after agent aggregate ali alia alias allocate allow alter always analyze ancillary and any anydata anydataset anyschema anytype apply archive archived archivelog are as asc ascii asin assembly assertion associate asynchronous at atan atn2 attr attri attrib attribu attribut attribute attributes audit authenticated authentication authid authors auto autoallocate autodblink autoextend automatic availability avg backup badfile basicfile before begin beginning benchmark between bfile bfile_base big bigfile bin binary_double binary_float binlog bit_and bit_count bit_length bit_or bit_xor bitmap blob_base block blocksize body both bound buffer_cache buffer_pool build bulk by byte byteordermark bytes cache caching call calling cancel capacity cascade cascaded case cast catalog category ceil ceiling chain change changed char_base char_length character_length characters characterset charindex charset charsetform charsetid check checksum checksum_agg child choose chr chunk class cleanup clear client clob clob_base clone close cluster_id cluster_probability cluster_set clustering coalesce coercibility col collate collation collect colu colum column column_value columns columns_updated comment commit compact compatibility compiled complete composite_limit compound compress compute concat concat_ws concurrent confirm conn connec connect connect_by_iscycle connect_by_isleaf connect_by_root connect_time connection consider consistent constant constraint constraints constructor container content contents context contributors controlfile conv convert convert_tz corr corr_k corr_s corresponding corruption cos cost count count_big counted covar_pop covar_samp cpu_per_call cpu_per_session crc32 create creation critical cross cube cume_dist curdate current current_date current_time current_timestamp current_user cursor curtime customdatum cycle data database databases datafile datafiles datalength date_add date_cache date_format date_sub dateadd datediff datefromparts datename datepart datetime2fromparts day day_to_second dayname dayofmonth dayofweek dayofyear days db_role_change dbtimezone ddl deallocate declare decode decompose decrement decrypt deduplicate def defa defau defaul default defaults deferred defi defin define degrees delayed delegate delete delete_all delimited demand dense_rank depth dequeue des_decrypt des_encrypt des_key_file desc descr descri describ describe descriptor deterministic diagnostics difference dimension direct_load directory disable disable_all disallow disassociate discardfile disconnect diskgroup distinct distinctrow distribute distributed div do document domain dotnet double downgrade drop dumpfile duplicate duration each edition editionable editions element ellipsis else elsif elt empty enable enable_all enclosed encode encoding encrypt end end-exec endian enforced engine engines enqueue enterprise entityescaping eomonth error errors escaped evalname evaluate event eventdata events except exception exceptions exchange exclude excluding execu execut execute exempt exists exit exp expire explain export export_set extended extent external external_1 external_2 externally extract failed failed_login_attempts failover failure far fast feature_set feature_value fetch field fields file file_name_convert filesystem_like_logging final finish first first_value fixed flash_cache flashback floor flush following follows for forall force form forma format found found_rows freelist freelists freepools fresh from from_base64 from_days ftp full function general generated get get_format get_lock getdate getutcdate global global_name globally go goto grant grants greatest group group_concat group_id grouping grouping_id groups gtid_subtract guarantee guard handler hash hashkeys having hea head headi headin heading heap help hex hierarchy high high_priority hosts hour http id ident_current ident_incr ident_seed identified identity idle_time if ifnull ignore iif ilike ilm immediate import in include including increment index indexes indexing indextype indicator indices inet6_aton inet6_ntoa inet_aton inet_ntoa infile initial initialized initially initrans inmemory inner innodb input insert install instance instantiable instr interface interleaved intersect into invalidate invisible is is_free_lock is_ipv4 is_ipv4_compat is_not is_not_null is_used_lock isdate isnull isolation iterate java join json json_exists keep keep_duplicates key keys kill language large last last_day last_insert_id last_value lax lcase lead leading least leaves left len lenght length less level levels library like like2 like4 likec limit lines link list listagg little ln load load_file lob lobs local localtime localtimestamp locate locator lock locked log log10 log2 logfile logfiles logging logical logical_reads_per_call logoff logon logs long loop low low_priority lower lpad lrtrim ltrim main make_set makedate maketime managed management manual map mapping mask master master_pos_wait match matched materialized max maxextents maximize maxinstances maxlen maxlogfiles maxloghistory maxlogmembers maxsize maxtrans md5 measures median medium member memcompress memory merge microsecond mid migration min minextents minimum mining minus minute minvalue missing mod mode model modification modify module monitoring month months mount move movement multiset mutex name name_const names nan national native natural nav nchar nclob nested never new newline next nextval no no_write_to_binlog noarchivelog noaudit nobadfile nocheck nocompress nocopy nocycle nodelay nodiscardfile noentityescaping noguarantee nokeep nologfile nomapping nomaxvalue nominimize nominvalue nomonitoring none noneditionable nonschema noorder nopr nopro noprom nopromp noprompt norely noresetlogs noreverse normal norowdependencies noschemacheck noswitch not nothing notice notrim novalidate now nowait nth_value nullif nulls num numb numbe nvarchar nvarchar2 object ocicoll ocidate ocidatetime ociduration ociinterval ociloblocator ocinumber ociref ocirefcursor ocirowid ocistring ocitype oct octet_length of off offline offset oid oidindex old on online only opaque open operations operator optimal optimize option optionally or oracle oracle_date oradata ord ordaudio orddicom orddoc order ordimage ordinality ordvideo organization orlany orlvary out outer outfile outline output over overflow overriding package pad parallel parallel_enable parameters parent parse partial partition partitions pascal passing password password_grace_time password_lock_time password_reuse_max password_reuse_time password_verify_function patch path patindex pctincrease pctthreshold pctused pctversion percent percent_rank percentile_cont percentile_disc performance period period_add period_diff permanent physical pi pipe pipelined pivot pluggable plugin policy position post_transaction pow power pragma prebuilt precedes preceding precision prediction prediction_cost prediction_details prediction_probability prediction_set prepare present preserve prior priority private private_sga privileges procedural procedure procedure_analyze processlist profiles project prompt protection public publishingservername purge quarter query quick quiesce quota quotename radians raise rand range rank raw read reads readsize rebuild record records recover recovery recursive recycle redo reduced ref reference referenced references referencing refresh regexp_like register regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy reject rekey relational relative relaylog release release_lock relies_on relocate rely rem remainder rename repair repeat replace replicate replication required reset resetlogs resize resource respect restore restricted result result_cache resumable resume retention return returning returns reuse reverse revoke right rlike role roles rollback rolling rollup round row row_count rowdependencies rowid rownum rows rtrim rules safe salt sample save savepoint sb1 sb2 sb4 scan schema schemacheck scn scope scroll sdo_georaster sdo_topo_geometry search sec_to_time second section securefile security seed segment select self sequence sequential serializable server servererror session session_user sessions_per_user set sets settings sha sha1 sha2 share shared shared_pool short show shrink shutdown si_averagecolor si_colorhistogram si_featurelist si_positionalcolor si_stillimage si_texture siblings sid sign sin size size_t sizes skip slave sleep smalldatetimefromparts smallfile snapshot some soname sort soundex source space sparse spfile split sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_small_result sql_variant_property sqlcode sqldata sqlerror sqlname sqlstate sqrt square standalone standby start starting startup statement static statistics stats_binomial_test stats_crosstab stats_ks_test stats_mode stats_mw_test stats_one_way_anova stats_t_test_ stats_t_test_indep stats_t_test_one stats_t_test_paired stats_wsr_test status std stddev stddev_pop stddev_samp stdev stop storage store stored str str_to_date straight_join strcmp strict string struct stuff style subdate subpartition subpartitions substitutable substr substring subtime subtring_index subtype success sum suspend switch switchoffset switchover sync synchronous synonym sys sys_xmlagg sysasm sysaux sysdate sysdatetimeoffset sysdba sysoper system system_user sysutcdatetime table tables tablespace tan tdo template temporary terminated tertiary_weights test than then thread through tier ties time time_format time_zone timediff timefromparts timeout timestamp timestampadd timestampdiff timezone_abbr timezone_minute timezone_region to to_base64 to_date to_days to_seconds todatetimeoffset trace tracking transaction transactional translate translation treat trigger trigger_nestlevel triggers trim truncate try_cast try_convert try_parse type ub1 ub2 ub4 ucase unarchived unbounded uncompress under undo unhex unicode uniform uninstall union unique unix_timestamp unknown unlimited unlock unpivot unrecoverable unsafe unsigned until untrusted unusable unused update updated upgrade upped upper upsert url urowid usable usage use use_stored_outlines user user_data user_resources users using utc_date utc_timestamp uuid uuid_short validate validate_password_strength validation valist value values var var_samp varcharc vari varia variab variabl variable variables variance varp varraw varrawc varray verify version versions view virtual visible void wait wallet warning warnings week weekday weekofyear wellformed when whene whenev wheneve whenever where while whitespace with within without work wrapped xdb xml xmlagg xmlattributes xmlcast xmlcolattval xmlelement xmlexists xmlforest xmlindex xmlnamespaces xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltype xor year year_to_month years yearweek",literal:"true false null",built_in:"array bigint binary bit blob boolean char character date dec decimal float int int8 integer interval number numeric real record serial serial8 smallint text varchar varying void"},c:[{cN:"string",b:"'",e:"'",c:[e.BE,{b:"''"}]},{cN:"string",b:'"',e:'"',c:[e.BE,{b:'""'}]},{cN:"string",b:"`",e:"`",c:[e.BE]},e.CNM,e.CBCM,t]},e.CBCM,t]}}),hljs.registerLanguage("java",function(e){var t="false synchronized int abstract float private char boolean static null if const for true while long strictfp finally protected import native final void enum else break transient catch instanceof byte super volatile case assert short package default double public try this switch continue throws protected public private module requires exports do",r={cN:"number",b:"\\b(0[bB]([01]+[01_]+[01]+|[01]+)|0[xX]([a-fA-F0-9]+[a-fA-F0-9_]+[a-fA-F0-9]+|[a-fA-F0-9]+)|(([\\d]+[\\d_]+[\\d]+|[\\d]+)(\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))?|\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))([eE][-+]?\\d+)?)[lLfF]?",r:0};return{aliases:["jsp"],k:t,i:/<\/|#/,c:[e.C("/\\*\\*","\\*/",{r:0,c:[{b:/\w+@/,r:0},{cN:"doctag",b:"@[A-Za-z]+"}]}),e.CLCM,e.CBCM,e.ASM,e.QSM,{cN:"class",bK:"class interface",e:/[{;=]/,eE:!0,k:"class interface",i:/[:"\[\]]/,c:[{bK:"extends implements"},e.UTM]},{bK:"new throw return else",r:0},{cN:"function",b:"([À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*(<[À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*(\\s*,\\s*[À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*)*>)?\\s+)+"+e.UIR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:t,c:[{b:e.UIR+"\\s*\\(",rB:!0,r:0,c:[e.UTM]},{cN:"params",b:/\(/,e:/\)/,k:t,r:0,c:[e.ASM,e.QSM,e.CNM,e.CBCM]},e.CLCM,e.CBCM]},r,{cN:"meta",b:"@[A-Za-z]+"}]}}),hljs.registerLanguage("http",function(e){var t="HTTP/[0-9\\.]+";return{aliases:["https"],i:"\\S",c:[{b:"^"+t,e:"$",c:[{cN:"number",b:"\\b\\d{3}\\b"}]},{b:"^[A-Z]+ (.*?) "+t+"$",rB:!0,e:"$",c:[{cN:"string",b:" ",e:" ",eB:!0,eE:!0},{b:t},{cN:"keyword",b:"[A-Z]+"}]},{cN:"attribute",b:"^\\w",e:": ",eE:!0,i:"\\n|\\s|=",starts:{e:"$",r:0}},{b:"\\n\\n",starts:{sL:[],eW:!0}}]}}),hljs.registerLanguage("perl",function(e){var t="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",r={cN:"subst",b:"[$@]\\{",e:"\\}",k:t},a={b:"->{",e:"}"},n={v:[{b:/\$\d/},{b:/[\$%@](\^\w\b|#\w+(::\w+)*|{\w+}|\w+(::\w*)*)/},{b:/[\$%@][^\s\w{]/,r:0}]},i=[e.BE,r,n],s=[n,e.HCM,e.C("^\\=\\w","\\=cut",{eW:!0}),a,{cN:"string",c:i,v:[{b:"q[qwxr]?\\s*\\(",e:"\\)",r:5},{b:"q[qwxr]?\\s*\\[",e:"\\]",r:5},{b:"q[qwxr]?\\s*\\{",e:"\\}",r:5},{b:"q[qwxr]?\\s*\\|",e:"\\|",r:5},{b:"q[qwxr]?\\s*\\<",e:"\\>",r:5},{b:"qw\\s+q",e:"q",r:5},{b:"'",e:"'",c:[e.BE]},{b:'"',e:'"'},{b:"`",e:"`",c:[e.BE]},{b:"{\\w+}",c:[],r:0},{b:"-?\\w+\\s*\\=\\>",c:[],r:0}]},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{b:"(\\/\\/|"+e.RSR+"|\\b(split|return|print|reverse|grep)\\b)\\s*",k:"split return print reverse grep",r:0,c:[e.HCM,{cN:"regexp",b:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",r:10},{cN:"regexp",b:"(m|qr)?/",e:"/[a-z]*",c:[e.BE],r:0}]},{cN:"function",bK:"sub",e:"(\\s*\\(.*?\\))?[;{]",eE:!0,r:5,c:[e.TM]},{b:"-\\w\\b",r:0},{b:"^__DATA__$",e:"^__END__$",sL:"mojolicious",c:[{b:"^@@.*",e:"$",cN:"comment"}]}];return r.c=s,{aliases:["pl","pm"],l:/[\w\.]+/,k:t,c:a.c=s}}),hljs.registerLanguage("xml",function(e){var t={eW:!0,i:/</,r:0,c:[{cN:"attr",b:"[A-Za-z0-9\\._:-]+",r:0},{b:/=\s*/,r:0,c:[{cN:"string",endsParent:!0,v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist"],cI:!0,c:[{cN:"meta",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},e.C("\x3c!--","--\x3e",{r:10}),{b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{b:/<\?(php)?/,e:/\?>/,sL:"php",c:[{b:"/\\*",e:"\\*/",skip:!0}]},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{name:"style"},c:[t],starts:{e:"</style>",rE:!0,sL:["css","xml"]}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{name:"script"},c:[t],starts:{e:"<\/script>",rE:!0,sL:["actionscript","javascript","handlebars","xml"]}},{cN:"meta",v:[{b:/<\?xml/,e:/\?>/,r:10},{b:/<\?\w+/,e:/\?>/}]},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"name",b:/[^\/><\s]+/,r:0},t]}]}}),hljs.registerLanguage("cpp",function(e){var t={cN:"keyword",b:"\\b[a-z\\d_]*_t\\b"},r={cN:"string",v:[{b:'(u8?|U)?L?"',e:'"',i:"\\n",c:[e.BE]},{b:'(u8?|U)?R"',e:'"',c:[e.BE]},{b:"'\\\\?.",e:"'",i:"."}]},a={cN:"number",v:[{b:"\\b(0b[01']+)"},{b:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{b:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],r:0},n={cN:"meta",b:/#\s*[a-z]+\b/,e:/$/,k:{"meta-keyword":"if else elif endif define undef warning error line pragma ifdef ifndef include"},c:[{b:/\\\n/,r:0},e.inherit(r,{cN:"meta-string"}),{cN:"meta-string",b:/<[^\n>]*>/,e:/$/,i:"\\n"},e.CLCM,e.CBCM]},i=e.IR+"\\s*\\(",s={keyword:"int float while private char catch import module export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue inline delete alignof constexpr decltype noexcept static_assert thread_local restrict _Bool complex _Complex _Imaginary atomic_bool atomic_char atomic_schar atomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llong atomic_ullong new throw return and or not",built_in:"std string cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr abort abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr",literal:"true false nullptr NULL"},c=[t,e.CLCM,e.CBCM,a,r];return{aliases:["c","cc","h","c++","h++","hpp"],k:s,i:"</",c:c.concat([n,{b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:s,c:["self",t]},{b:e.IR+"::",k:s},{v:[{b:/=/,e:/;/},{b:/\(/,e:/\)/},{bK:"new throw return else",e:/;/}],k:s,c:c.concat([{b:/\(/,e:/\)/,k:s,c:c.concat(["self"]),r:0}]),r:0},{cN:"function",b:"("+e.IR+"[\\*&\\s]+)+"+i,rB:!0,e:/[{;=]/,eE:!0,k:s,i:/[^\w\s\*&]/,c:[{b:i,rB:!0,c:[e.TM],r:0},{cN:"params",b:/\(/,e:/\)/,k:s,r:0,c:[e.CLCM,e.CBCM,r,a,t]},e.CLCM,e.CBCM,n]},{cN:"class",bK:"class struct",e:/[{;:]/,c:[{b:/</,e:/>/,c:["self"]},e.TM]}]),exports:{preprocessor:n,strings:r,k:s}}}),hljs.registerLanguage("json",function(e){var t={literal:"true false null"},r=[e.QSM,e.CNM],a={e:",",eW:!0,eE:!0,c:r,k:t},n={b:"{",e:"}",c:[{cN:"attr",b:/"/,e:/"/,c:[e.BE],i:"\\n"},e.inherit(a,{b:/:/})],i:"\\S"},i={b:"\\[",e:"\\]",c:[e.inherit(a)],i:"\\S"};return r.splice(r.length,0,n,i),{c:r,k:t,i:"\\S"}}),hljs.registerLanguage("cs",function(e){var t,r,a={keyword:"abstract as base bool break byte case catch char checked const continue decimal default delegate do double enum event explicit extern finally fixed float for foreach goto if implicit in int interface internal is lock long nameof object operator out override params private protected public readonly ref sbyte sealed short sizeof stackalloc static string struct switch this try typeof uint ulong unchecked unsafe ushort using virtual void volatile while add alias ascending async await by descending dynamic equals from get global group into join let on orderby partial remove select set value var where yield",literal:"null false true"},n={cN:"string",b:'@"',e:'"',c:[{b:'""'}]},i=e.inherit(n,{i:/\n/}),s={cN:"subst",b:"{",e:"}",k:a},c=e.inherit(s,{i:/\n/}),o={cN:"string",b:/\$"/,e:'"',i:/\n/,c:[{b:"{{"},{b:"}}"},e.BE,c]},l={cN:"string",b:/\$@"/,e:'"',c:[{b:"{{"},{b:"}}"},{b:'""'},s]},d=e.inherit(l,{i:/\n/,c:[{b:"{{"},{b:"}}"},{b:'""'},c]});return s.c=[l,o,n,e.ASM,e.QSM,e.CNM,e.CBCM],c.c=[d,o,i,e.ASM,e.QSM,e.CNM,e.inherit(e.CBCM,{i:/\n/})],t={v:[l,o,n,e.ASM,e.QSM]},r=e.IR+"(<"+e.IR+"(\\s*,\\s*"+e.IR+")*>)?(\\[\\])?",{aliases:["csharp"],k:a,i:/::/,c:[e.C("///","$",{rB:!0,c:[{cN:"doctag",v:[{b:"///",r:0},{b:"\x3c!--|--\x3e"},{b:"</?",e:">"}]}]}),e.CLCM,e.CBCM,{cN:"meta",b:"#",e:"$",k:{"meta-keyword":"if else elif endif define undef warning error line region endregion pragma checksum"}},t,e.CNM,{bK:"class interface",e:/[{;=]/,i:/[^\s:]/,c:[e.TM,e.CLCM,e.CBCM]},{bK:"namespace",e:/[{;=]/,i:/[^\s:]/,c:[e.inherit(e.TM,{b:"[a-zA-Z](\\.?\\w)*"}),e.CLCM,e.CBCM]},{cN:"meta",b:"^\\s*\\[",eB:!0,e:"\\]",eE:!0,c:[{cN:"meta-string",b:/"/,e:/"/}]},{bK:"new return throw await else",r:0},{cN:"function",b:"("+r+"\\s+)+"+e.IR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:a,c:[{b:e.IR+"\\s*\\(",rB:!0,c:[e.TM],r:0},{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,k:a,r:0,c:[t,e.CNM,e.CBCM]},e.CLCM,e.CBCM]}]}}),hljs.registerLanguage("nginx",function(e){var t={cN:"variable",v:[{b:/\$\d+/},{b:/\$\{/,e:/}/},{b:"[\\$\\@]"+e.UIR}]},r={eW:!0,l:"[a-z/_]+",k:{literal:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},r:0,i:"=>",c:[e.HCM,{cN:"string",c:[e.BE,t],v:[{b:/"/,e:/"/},{b:/'/,e:/'/}]},{b:"([a-z]+):/",e:"\\s",eW:!0,eE:!0,c:[t]},{cN:"regexp",c:[e.BE,t],v:[{b:"\\s\\^",e:"\\s|{|;",rE:!0},{b:"~\\*?\\s+",e:"\\s|{|;",rE:!0},{b:"\\*(\\.[a-z\\-]+)+"},{b:"([a-z\\-]+\\.)+\\*"}]},{cN:"number",b:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{cN:"number",b:"\\b\\d+[kKmMgGdshdwy]*\\b",r:0},t]};return{aliases:["nginxconf"],c:[e.HCM,{b:e.UIR+"\\s+{",rB:!0,e:"{",c:[{cN:"section",b:e.UIR}],r:0},{b:e.UIR+"\\s",e:";|{",rB:!0,c:[{cN:"attribute",b:e.UIR,starts:r}],r:0}],i:"[^\\s\\}]"}}),hljs.registerLanguage("markdown",function(e){return{aliases:["md","mkdown","mkd"],c:[{cN:"section",v:[{b:"^#{1,6}",e:"$"},{b:"^.+?\\n[=-]{2,}$"}]},{b:"<",e:">",sL:"xml",r:0},{cN:"bullet",b:"^([*+-]|(\\d+\\.))\\s+"},{cN:"strong",b:"[*_]{2}.+?[*_]{2}"},{cN:"emphasis",v:[{b:"\\*.+?\\*"},{b:"_.+?_",r:0}]},{cN:"quote",b:"^>\\s+",e:"$"},{cN:"code",v:[{b:"^```w*s*$",e:"^```s*$"},{b:"`.+?`"},{b:"^( {4}|\t)",e:"$",r:0}]},{b:"^[-\\*]{3,}",e:"$"},{b:"\\[.+?\\][\\(\\[].*?[\\)\\]]",rB:!0,c:[{cN:"string",b:"\\[",e:"\\]",eB:!0,rE:!0,r:0},{cN:"link",b:"\\]\\(",e:"\\)",eB:!0,eE:!0},{cN:"symbol",b:"\\]\\[",e:"\\]",eB:!0,eE:!0}],r:10},{b:/^\[[^\n]+\]:/,rB:!0,c:[{cN:"symbol",b:/\[/,e:/\]/,eB:!0,eE:!0},{cN:"link",b:/:\s*/,e:/$/,eB:!0}]}]}}),hljs.registerLanguage("css",function(e){var t={b:/[A-Z\_\.\-]+\s*:/,rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:/\S/,e:":",eE:!0,starts:{eW:!0,eE:!0,c:[{b:/[\w-]+\(/,rB:!0,c:[{cN:"built_in",b:/[\w-]+/},{b:/\(/,e:/\)/,c:[e.ASM,e.QSM]}]},e.CSSNM,e.QSM,e.ASM,e.CBCM,{cN:"number",b:"#[0-9A-Fa-f]+"},{cN:"meta",b:"!important"}]}}]};return{cI:!0,i:/[=\/|'\$]/,c:[e.CBCM,{cN:"selector-id",b:/#[A-Za-z0-9_-]+/},{cN:"selector-class",b:/\.[A-Za-z0-9_-]+/},{cN:"selector-attr",b:/\[/,e:/\]/,i:"$"},{cN:"selector-pseudo",b:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{b:"@",e:"[{;]",i:/:/,c:[{cN:"keyword",b:/\w+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[e.ASM,e.QSM,e.CSSNM]}]},{cN:"selector-tag",b:"[a-zA-Z-][a-zA-Z0-9_-]*",r:0},{b:"{",e:"}",i:/\S/,c:[e.CBCM,t]}]}}),hljs.registerLanguage("python",function(e){var t={keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10 None True False",built_in:"Ellipsis NotImplemented"},r={cN:"meta",b:/^(>>>|\.\.\.) /},a={cN:"subst",b:/\{/,e:/\}/,k:t,i:/#/},n={cN:"string",c:[e.BE],v:[{b:/(u|b)?r?'''/,e:/'''/,c:[r],r:10},{b:/(u|b)?r?"""/,e:/"""/,c:[r],r:10},{b:/(fr|rf|f)'''/,e:/'''/,c:[r,a]},{b:/(fr|rf|f)"""/,e:/"""/,c:[r,a]},{b:/(u|r|ur)'/,e:/'/,r:10},{b:/(u|r|ur)"/,e:/"/,r:10},{b:/(b|br)'/,e:/'/},{b:/(b|br)"/,e:/"/},{b:/(fr|rf|f)'/,e:/'/,c:[a]},{b:/(fr|rf|f)"/,e:/"/,c:[a]},e.ASM,e.QSM]},i={cN:"number",r:0,v:[{b:e.BNR+"[lLjJ]?"},{b:"\\b(0o[0-7]+)[lLjJ]?"},{b:e.CNR+"[lLjJ]?"}]},s={cN:"params",b:/\(/,e:/\)/,c:["self",r,i,n]};return a.c=[n,i,r],{aliases:["py","gyp"],k:t,i:/(<\/|->|\?)|=>/,c:[r,i,n,e.HCM,{v:[{cN:"function",bK:"def"},{cN:"class",bK:"class"}],e:/:/,i:/[${=;\n,]/,c:[e.UTM,s,{b:/->/,eW:!0,k:"None"}]},{cN:"meta",b:/^[\t ]*@/,e:/$/},{b:/\b(print|exec)\(/}]}});hljs.registerLanguage("objectivec",function(e){var t=/[a-zA-Z@][a-zA-Z0-9_]*/,r="@interface @class @protocol @implementation";return{aliases:["mm","objc","obj-c"],k:{keyword:"int float while char export sizeof typedef const struct for union unsigned long volatile static bool mutable if do return goto void enum else break extern asm case short default double register explicit signed typename this switch continue wchar_t inline readonly assign readwrite self @synchronized id typeof nonatomic super unichar IBOutlet IBAction strong weak copy in out inout bycopy byref oneway __strong __weak __block __autoreleasing @private @protected @public @try @property @end @throw @catch @finally @autoreleasepool @synthesize @dynamic @selector @optional @required @encode @package @import @defs @compatibility_alias __bridge __bridge_transfer __bridge_retained __bridge_retain __covariant __contravariant __kindof _Nonnull _Nullable _Null_unspecified __FUNCTION__ __PRETTY_FUNCTION__ __attribute__ getter setter retain unsafe_unretained nonnull nullable null_unspecified null_resettable class instancetype NS_DESIGNATED_INITIALIZER NS_UNAVAILABLE NS_REQUIRES_SUPER NS_RETURNS_INNER_POINTER NS_INLINE NS_AVAILABLE NS_DEPRECATED NS_ENUM NS_OPTIONS NS_SWIFT_UNAVAILABLE NS_ASSUME_NONNULL_BEGIN NS_ASSUME_NONNULL_END NS_REFINED_FOR_SWIFT NS_SWIFT_NAME NS_SWIFT_NOTHROW NS_DURING NS_HANDLER NS_ENDHANDLER NS_VALUERETURN NS_VOIDRETURN",literal:"false true FALSE TRUE nil YES NO NULL",built_in:"BOOL dispatch_once_t dispatch_queue_t dispatch_sync dispatch_async dispatch_once"},l:t,i:"</",c:[{cN:"built_in",b:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},e.CLCM,e.CBCM,e.CNM,e.QSM,{cN:"string",v:[{b:'@"',e:'"',i:"\\n",c:[e.BE]},{b:"'",e:"[^\\\\]'",i:"[^\\\\][^']"}]},{cN:"meta",b:"#",e:"$",c:[{cN:"meta-string",v:[{b:'"',e:'"'},{b:"<",e:">"}]}]},{cN:"class",b:"("+r.split(" ").join("|")+")\\b",e:"({|$)",eE:!0,k:r,l:t,c:[e.UTM]},{b:"\\."+e.UIR,r:0}]}}),hljs.registerLanguage("php",function(e){var t={b:"\\$+[a-zA-Z_-ÿ][a-zA-Z0-9_-ÿ]*"},r={cN:"meta",b:/<\?(php)?|\?>/},a={cN:"string",c:[e.BE,r],v:[{b:'b"',e:'"'},{b:"b'",e:"'"},e.inherit(e.ASM,{i:null}),e.inherit(e.QSM,{i:null})]},n={v:[e.BNM,e.CNM]};return{aliases:["php3","php4","php5","php6"],cI:!0,k:"and include_once list abstract global private echo interface as static endswitch array null if endwhile or const for endforeach self var while isset public protected exit foreach throw elseif include __FILE__ empty require_once do xor return parent clone use __CLASS__ __LINE__ else break print eval new catch __METHOD__ case exception default die require __FUNCTION__ enddeclare final try switch continue endfor endif declare unset true false trait goto instanceof insteadof __DIR__ __NAMESPACE__ yield finally",c:[e.HCM,e.C("//","$",{c:[r]}),e.C("/\\*","\\*/",{c:[{cN:"doctag",b:"@[A-Za-z]+"}]}),e.C("__halt_compiler.+?;",!1,{eW:!0,k:"__halt_compiler",l:e.UIR}),{cN:"string",b:/<<<['"]?\w+['"]?$/,e:/^\w+;?$/,c:[e.BE,{cN:"subst",v:[{b:/\$\w+/},{b:/\{\$/,e:/\}/}]}]},r,{cN:"keyword",b:/\$this\b/},t,{b:/(::|->)+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/},{cN:"function",bK:"function",e:/[;{]/,eE:!0,i:"\\$|\\[|%",c:[e.UTM,{cN:"params",b:"\\(",e:"\\)",c:["self",t,e.CBCM,a,n]}]},{cN:"class",bK:"class interface",e:"{",eE:!0,i:/[:\(\$"]/,c:[{bK:"extends implements"},e.UTM]},{bK:"namespace",e:";",i:/[\.']/,c:[e.UTM]},{bK:"use",e:";",c:[e.UTM]},{b:"=>"},a,n]}}),hljs.registerLanguage("diff",function(e){return{aliases:["patch"],c:[{cN:"meta",r:10,v:[{b:/^@@ +\-\d+,\d+ +\+\d+,\d+ +@@$/},{b:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{b:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{cN:"comment",v:[{b:/Index: /,e:/$/},{b:/={3,}/,e:/$/},{b:/^\-{3}/,e:/$/},{b:/^\*{3} /,e:/$/},{b:/^\+{3}/,e:/$/},{b:/\*{5}/,e:/\*{5}$/}]},{cN:"addition",b:"^\\+",e:"$"},{cN:"deletion",b:"^\\-",e:"$"},{cN:"addition",b:"^\\!",e:"$"}]}}),hljs.registerLanguage("makefile",function(e){var t={cN:"variable",v:[{b:"\\$\\("+e.UIR+"\\)",c:[e.BE]},{b:/\$[@%<?\^\+\*]/}]},r={cN:"string",b:/"/,e:/"/,c:[e.BE,t]},a={cN:"variable",b:/\$\([\w-]+\s/,e:/\)/,k:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},c:[t]},n={b:"^"+e.UIR+"\\s*[:+?]?=",i:"\\n",rB:!0,c:[{b:"^"+e.UIR,e:"[:+?]?=",eE:!0}]},i={cN:"section",b:/^[^\s]+:/,e:/$/,c:[t]};return{aliases:["mk","mak"],k:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath",l:/[\w-]+/,c:[e.HCM,t,r,a,n,{cN:"meta",b:/^\.PHONY:/,e:/$/,k:{"meta-keyword":".PHONY"},l:/[\.\w]+/},i]}});
var selectRange=function(e){this.__element=e};selectRange.of=function(e){return e?new selectRange(e):{}},selectRange.prototype={constructor:selectRange,getCurPos:function(){var e,t=this,n=t.__element,c=0;return document.selection?(n.focus(),(e=document.selection.createRange()).moveStart("character",-n.value.length),c=e.text.length):(n.selectionStart||"0"==n.selectionStart)&&(c=n.selectionStart),c},setCurPos:function(e){var t,n=this,c=n.__element;c.setSelectionRange?(c.focus(),c.setSelectionRange(e,e)):c.createTextRange&&((t=c.createTextRange()).collapse(!0),t.moveEnd("character",e),t.moveStart("character",e),t.select())},getSelectText:function(){var e,t="";return window.getSelection?e=window.getSelection():document.selection&&(e=document.selection.createRange()),(t=e.text)||(t=e),t},setSelectText:function(e,t){var n,c,a=this,o=a.__element;e=parseInt(e),t=parseInt(t),(n=o.value.length)&&(e||(e=0),t||(t=n),n<e&&(e=n),n<t&&(t=n),e<0&&(e=n+e),t<0&&(t=n+t),o.createTextRange?((c=o.createTextRange()).moveStart("character",-n),c.moveEnd("character",-n),c.moveStart("character",e),c.moveEnd("character",t),c.select()):(o.setSelectionRange(e,t),o.focus()))},insertAfterText:function(e){var t,n,c,a=this,o=a.__element;document.selection?(o.focus(),document.selection.createRange().text=e,o.focus()):o.selectionStart||"0"==o.selectionStart?(t=o.selectionStart,n=o.selectionEnd,c=o.scrollTop,o.value=o.value.substring(0,t)+e+o.value.substring(n,o.value.length),o.focus(),o.selectionStart=t+e.length,o.selectionEnd=t+e.length,o.scrollTop=c):(o.value+=e,o.focus())}};
!function(r){var o={commentFormSelector:"#commentForm",commentsWrapEl:r(".comments-wrap"),toggleLoadComments:r.noop(),url:"",params:{},commentedAutoScrollToTop:!0,contentField:"content"},e=function(e){"object"!=typeof e||(this.option=r.extend({},o,e))};e.prototype.init=function(){var e=this;e.commentsWrapEl=e.option.commentsWrapEl,e.initCommentForm(),e.initToolBoxPopup()},e.prototype.initCommentForm=function(){var n=this;n.commentFormVue=new Vue({el:n.option.commentFormSelector,data:function(){return{commentMaxLength:1e3,commentContent:"",commentPublishLoading:!1,tipMessage:{show:!1,content:"",className:""},curEmojiType:"People",emojiList:[{type:"People",items:["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","disappointed_relieved","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","cry","sob","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","fu","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","dancer","dancers","ok_woman","no_good","information_desk_person","raising_hand","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface"]},{type:"Nature",items:["sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel"]},{type:"Objects",items:["bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","package","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn"]},{type:"Places",items:["house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de"]},{type:"Symbols",items:["one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","sparkle","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","back","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_small_square","white_small_square","black_medium_small_square","white_medium_small_square","black_medium_square","white_medium_square","black_large_square","white_large_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"]}]}},computed:{curEmojiItems:function(){for(var e=0,o=this.emojiList.length;e<o;e++)if(this.emojiList[e].type===this.curEmojiType)return this.emojiList[e].items;return this.emojiList[0].items},commentContentIsEmpty:function(){return 0===this.commentContent.length},commentCountText:function(){return this.commentContent.length+"/"+this.commentMaxLength}},methods:{insertEmoji:function(e){this.clearMessage();var o=":"+e+":";this.insertContent(o),r(this.$refs.showEmojiBox).popup("hide")},insertProject:function(){var e,o,t;this.clearMessage(),e="#此处输入软件#",this.insertContent(e)&&(t=(o=selectRange.of(this.$refs.commentTextarea)).getCurPos(),o.setSelectText(t-(e.length-1),t-1))},publishComment:function(){var a,e;(a=this).tweetPublishLoading||(a.clearMessage(),a.commentContentIsEmpty?a.showMessage("error","内容不能为空",2e3):a.commentContent.length>a.commentMaxLength?a.showMessage("error","最多只能输入"+a.commentMaxLength+"个字符！",2e3):(a.commentPublishLoading=!0,(e={})[n.option.contentField]=a.commentContent,"object"==typeof n.option.params&&(e=r.extend({},e,n.option.params)),r.post(n.option.url,e,function(e){var o,t;1===e.code?(a.commentContent="",r.isFunction(n.option.toggleLoadComments)&&n.option.toggleLoadComments.call(this),o=r(".float-menu .comment-btn"),e.result&&void 0!==e.result.replyCount&&(t=e.result.replyCount,r("[data-article-reply-count]").html(t),o.attr("title","共有 "+t+" 条评论")),o.find(".icon").removeClass("outline"),!0===n.option.commentedAutoScrollToTop&&r("html, body").stop().animate({scrollTop:n.commentsWrapEl.offset().top-80},500,"swing"),a.removeCommentForm()):a.showMessage("error",e.message||"发布失败",2e3)}).fail(function(){a.showMessage("error","网络错误，请稍后再试！",2e3)}).always(function(){a.commentPublishLoading=!1})))},commentContentOnKeyDown:function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&this.publishComment()},insertContent:function(e){return!this.commentPublishLoading&&(this.commentContent.length>=this.commentMaxLength||this.commentContent.length+e.length>this.commentMaxLength?void this.showMessage("error","最多只能输入"+this.commentMaxLength+"个字符！",2e3):(selectRange.of(this.$refs.commentTextarea).insertAfterText(e),this.commentContent=this.$refs.commentTextarea.value,!0))},showMessage:function(e,o,t){var a,n=this;n.tipMessage.className="success"===e?"positive":"negative",n.tipMessage.content=o,a=parseInt(t)||0,n.tipMessage.show=!0,0<a&&setTimeout(function(){n.clearMessage()},a)},clearMessage:function(){var e=this;e.tipMessage.className="",e.tipMessage.content="",e.tipMessage.show=!1},focus:function(){this.$refs.commentTextarea.focus()},removeCommentForm:function(){this.$el.remove(),this.$destroy()}}}),n.commentFormVue.$el.vueInstance=n.commentFormVue},e.prototype.focus=function(){var e=this;e.commentFormVue&&r.isFunction(e.commentFormVue.focus)&&e.commentFormVue.focus()},e.prototype.insertContent=function(e){var o=this;o.commentFormVue&&r.isFunction(o.commentFormVue.insertContent)&&o.commentFormVue.insertContent(e)},e.prototype.initToolBoxPopup=function(){r(this.commentFormVue.$el).find(".toolbox > .item[data-popup]").each(function(e,o){var t=r(o),a=r(t).parent(),n=a.find(".toolbox-popup."+t.attr("data-popup"));t.popup({position:"bottom left",popup:n,on:"toolbox-picture"===t.attr("data-popup")?"manual":"click",exclusive:!0})})},window.OSCCommentForm=e}(window.jQuery||window.$);
!function(e,i){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("jquery")):e.jQueryBridget=i(e,e.jQuery)}(window,function(t,e){"use strict";function i(h,o,c){(c=c||e||t.jQuery)&&(o.prototype.option||(o.prototype.option=function(t){c.isPlainObject(t)&&(this.options=c.extend(!0,this.options,t))}),c.fn[h]=function(t){if("string"!=typeof t)return n=t,this.each(function(t,e){var i=c.data(e,h);i?(i.option(n),i._init()):(i=new o(e,n),c.data(e,h,i))}),this;var e,s,r,l,a,n,i=u.call(arguments,1);return r=i,a="$()."+h+'("'+(s=t)+'")',(e=this).each(function(t,e){var i,n,o=c.data(e,h);o?(i=o[s])&&"_"!=s.charAt(0)?(n=i.apply(o,r),l=void 0===l?n:l):d(a+" is not a valid method"):d(h+" not initialized. Cannot call methods, i.e. "+a)}),void 0!==l?l:e},n(c))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var u=Array.prototype.slice,o=t.console,d=void 0===o?function(){}:function(t){o.error(t)};return n(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i,n=this._events&&this._events[t];if(n&&n.length)return-1!=(i=n.indexOf(e))&&n.splice(i,1),this},e.emitEvent=function(t,e){var i,n,o,s=this._events&&this._events[t];if(s&&s.length){for(s=s.slice(0),e=e||[],i=this._onceEvents&&this._onceEvents[t],n=0;n<s.length;n++)o=s[n],i&&i[o]&&(this.off(t,o),delete i[o]),o.apply(this,e);return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var i=function(){var t,e,i,n=window.Element.prototype;if(n.matches)return"matches";if(n.matchesSelector)return"matchesSelector";for(t=["webkit","moz","ms","o"],e=0;e<t.length;e++)if(n[i=t[e]+"MatchesSelector"])return i}();return function(t,e){return t[i](e)}}),function(e,i){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("desandro-matches-selector")):e.fizzyUIUtils=i(e,e.matchesSelector)}(window,function(h,s){var e,c,u={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}};return e=Array.prototype.slice,u.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?e.call(t):[t]},u.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},u.getParent=function(t,e){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,s(t,e))return t},u.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},u.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},u.filterFindElements=function(t,n){t=u.makeArray(t);var o=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!n)return void o.push(t);s(t,n)&&o.push(t);for(var e=t.querySelectorAll(n),i=0;i<e.length;i++)o.push(e[i])}}),o},u.debounceMethod=function(t,e,n){n=n||100;var o=t.prototype[e],s=e+"Timeout";t.prototype[e]=function(){var t,e,i=this[s];clearTimeout(i),t=arguments,(e=this)[s]=setTimeout(function(){o.apply(e,t),delete e[s]},n)}},u.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},u.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()},c=h.console,u.htmlInit=function(l,a){u.docReady(function(){var t=u.toDashed(a),o="data-"+t,e=document.querySelectorAll("["+o+"]"),i=document.querySelectorAll(".js-"+t),n=u.makeArray(e).concat(u.makeArray(i)),s=o+"-options",r=h.jQuery;n.forEach(function(e){var t,i,n=e.getAttribute(o)||e.getAttribute(s);try{t=n&&JSON.parse(n)}catch(t){return void(c&&c.error("Error parsing "+o+" on "+e.className+": "+t))}i=new l(e,t),r&&r.data(e,a,i)})})},u}),function(i,n){"function"==typeof define&&define.amd?define("infinite-scroll/js/core",["ev-emitter/ev-emitter","fizzy-ui-utils/utils"],function(t,e){return n(i,t,e)}):"object"==typeof module&&module.exports?module.exports=n(i,require("ev-emitter"),require("fizzy-ui-utils")):i.InfiniteScroll=n(i,i.EvEmitter,i.fizzyUIUtils)}(window,function(e,t,o){function s(t,e){var i,n=o.getQueryElement(t);if(n)return(t=n).infiniteScrollGUID?((i=h[t.infiniteScrollGUID]).option(e),i):(this.element=t,this.options=o.extend({},s.defaults),this.option(e),a&&(this.$element=a(this.element)),void this.create())}var i,n,r,l,a=e.jQuery,h={};return s.defaults={},s.create={},s.destroy={},i=s.prototype,o.extend(i,t.prototype),n=0,i.create=function(){var t,e=this.guid=++n;if(this.element.infiniteScrollGUID=e,(h[e]=this).pageIndex=1,this.loadCount=0,this.updateGetPath(),this.getPath&&this.getPath())for(t in this.updateGetAbsolutePath(),this.log("initialized",[this.element.className]),this.callOnInit(),s.create)s.create[t].call(this)},i.option=function(t){o.extend(this.options,t)},i.callOnInit=function(){var t=this.options.onInit;t&&t.call(this,this)},i.dispatchEvent=function(t,e,i){var n,o,s;this.log(t,i),n=e?[e].concat(i):i,this.emitEvent(t,n),a&&this.$element&&(o=t+=".infiniteScroll",e&&((s=a.Event(e)).type=t,o=s),this.$element.trigger(o,i))},r={initialized:function(t){return"on "+t},request:function(t){return"URL: "+t},load:function(t,e){return(t.title||"")+". URL: "+e},error:function(t,e){return t+". URL: "+e},append:function(t,e,i){return i.length+" items. URL: "+e},last:function(t,e){return"URL: "+e},history:function(t,e){return"URL: "+e},pageIndex:function(t,e){return"current page determined to be: "+t+" from "+e}},i.log=function(t,e){if(this.options.debug){var i=r[t];i&&". "+i.apply(this,e)}},i.updateMeasurements=function(){this.windowHeight=e.innerHeight;var t=this.element.getBoundingClientRect();this.top=t.top+e.pageYOffset},i.updateScroller=function(){var t=this.options.elementScroll;if(t){if(this.scroller=!0===t?this.element:o.getQueryElement(t),!this.scroller)throw"Unable to find elementScroll: "+t}else this.scroller=e},i.updateGetPath=function(){var t,e=this.options.path;if(e){if("function"!=(t=typeof e))return"string"==t&&e.match("{{#}}")?void this.updateGetPathTemplate(e):void this.updateGetPathSelector(e);this.getPath=e}},i.updateGetPathTemplate=function(e){this.getPath=function(){var t=this.pageIndex+1;return e.replace("{{#}}",t)}.bind(this);var t=e.replace("{{#}}","(\\d\\d?\\d?)"),i=new RegExp(t),n=location.href.match(i);n&&(this.pageIndex=parseInt(n[1],10),this.log("pageIndex",[this.pageIndex,"template string"]))},l=[/^(.*?\/?page\/?)(\d\d?\d?)(.*?$)/,/^(.*?\/?\?page=)(\d\d?\d?)(.*?$)/,/(.*?)(\d\d?\d?)(?!.*\d)(.*?$)/],i.updateGetPathSelector=function(t){var e,i,n,o,s,r=document.querySelector(t);if(r){for(n=r.getAttribute("href"),o=0;n&&o<l.length;o++)if(i=l[o],s=n.match(i)){e=s.slice(1);break}return e?(this.isPathSelector=!0,this.getPath=function(){var t=this.pageIndex+1;return e[0]+t+e[2]}.bind(this),this.pageIndex=parseInt(e[1],10)-1,void this.log("pageIndex",[this.pageIndex,"next link"])):void 0}},i.updateGetAbsolutePath=function(){var t,e,i=this.getPath(),n=i.match(/^http/)||i.match(/^\//);this.getAbsolutePath=n?this.getPath:(t=location.pathname,e=t.substring(0,t.lastIndexOf("/")),function(){return e+"/"+this.getPath()})},s.create.hideNav=function(){var t=o.getQueryElement(this.options.hideNav);t&&(t.style.display="none",this.nav=t)},s.destroy.hideNav=function(){this.nav&&(this.nav.style.display="")},i.destroy=function(){for(var t in this.allOff(),s.destroy)s.destroy[t].call(this);delete this.element.infiniteScrollGUID,delete h[this.guid]},s.throttle=function(n,o){var s,r;return o=o||200,function(){var t=+new Date,e=arguments,i=function(){s=t,n.apply(this,e)}.bind(this);s&&t<s+o?(clearTimeout(r),r=setTimeout(i,o)):i()}},s.data=function(t){var e=(t=o.getQueryElement(t))&&t.infiniteScrollGUID;return e&&h[e]},s.setJQuery=function(t){a=t},o.htmlInit(s,"infinite-scroll"),a&&a.bridget&&a.bridget("infiniteScroll",s),s}),function(e,i){"function"==typeof define&&define.amd?define("infinite-scroll/js/page-load",["./core"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("./core")):i(e,e.InfiniteScroll)}(window,function(n,o){function l(t){for(var e=document.createDocumentFragment(),i=0;t&&i<t.length;i++)e.appendChild(t[i]);return e}function s(t,e){var i,n,o;for(i=t.attributes,n=0;n<i.length;n++)o=i[n],e.setAttribute(o.name,o.value)}var t=o.prototype;return o.defaults.loadOnScroll=!0,o.defaults.checkLastPage=!0,o.defaults.responseType="document",o.create.pageLoad=function(){this.canLoad=!0,this.on("scrollThreshold",this.onScrollThresholdLoad),this.on("load",this.checkLastPage),this.options.outlayer&&this.on("append",this.onAppendOutlayer)},t.onScrollThresholdLoad=function(){this.options.loadOnScroll&&this.loadNextPage()},t.loadNextPage=function(){var e,t,i,n,o,s,r,l;!this.isLoading&&this.canLoad&&(e=this.getAbsolutePath(),this.isLoading=!0,t=function(t){this.onPageLoad(t,e)}.bind(this),i=function(t){this.onPageError(t,e)}.bind(this),n=e,o=this.options.responseType,s=t,r=i,(l=new XMLHttpRequest).open("GET",n,!0),l.responseType=o||"",l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.onload=function(){if(200==l.status)s(l.response);else{var t=new Error(l.statusText);r(t)}},l.onerror=function(){var t=new Error("Network error requesting "+n);r(t)},l.send(),this.dispatchEvent("request",null,[e]))},t.onPageLoad=function(t,e){return this.options.append||(this.isLoading=!1),this.pageIndex++,this.loadCount++,this.dispatchEvent("load",null,[t,e]),this.appendNextPage(t,e),t},t.appendNextPage=function(t,e){var i,n,o,s=this.options.append,r="document"==this.options.responseType;r&&s&&(i=t.querySelectorAll(s),n=l(i),o=function(){this.appendItems(i,n),this.isLoading=!1,this.dispatchEvent("append",null,[t,e,i])}.bind(this),this.options.outlayer?this.appendOutlayerItems(n,o):o())},t.appendItems=function(t,e){t&&t.length&&(function(t){var e,i,n,o;for(e=t.querySelectorAll("script"),i=0;i<e.length;i++)s(n=e[i],o=document.createElement("script")),o.innerHTML=n.innerHTML,n.parentNode.replaceChild(o,n)}(e=e||l(t)),this.element.appendChild(e))},t.appendOutlayerItems=function(t,e){var i=o.imagesLoaded||n.imagesLoaded;return i?void i(t,e):void(this.isLoading=!1)},t.onAppendOutlayer=function(t,e,i){this.options.outlayer.appended(i)},t.checkLastPage=function(t,e){var i,n,o=this.options.checkLastPage;if(o){if("function"==typeof(i=this.options.path)&&!this.getPath())return void this.lastPageReached(t,e);"string"==typeof o?n=o:this.isPathSelector&&(n=i),n&&t.querySelector&&(t.querySelector(n)||this.lastPageReached(t,e))}},t.lastPageReached=function(t,e){this.canLoad=!1,this.dispatchEvent("last",null,[t,e])},t.onPageError=function(t,e){return this.isLoading=!1,this.canLoad=!1,this.dispatchEvent("error",null,[t,e]),t},o.create.prefill=function(){if(this.options.prefill){var t=this.options.append;if(!t)return;this.updateMeasurements(),this.updateScroller(),this.isPrefilling=!0,this.on("append",this.prefill),this.once("error",this.stopPrefill),this.once("last",this.stopPrefill),this.prefill()}},t.prefill=function(){var t=this.getPrefillDistance();this.isPrefilling=0<=t,this.isPrefilling?(this.log("prefill"),this.loadNextPage()):this.stopPrefill()},t.getPrefillDistance=function(){return this.options.elementScroll?this.scroller.clientHeight-this.scroller.scrollHeight:this.windowHeight-this.element.clientHeight},t.stopPrefill=function(){this.log("stopPrefill"),this.off("append",this.prefill)},o}),function(i,n){"function"==typeof define&&define.amd?define("infinite-scroll/js/scroll-watch",["./core","fizzy-ui-utils/utils"],function(t,e){return n(i,t,e)}):"object"==typeof module&&module.exports?module.exports=n(i,require("./core"),require("fizzy-ui-utils")):n(i,i.InfiniteScroll,i.fizzyUIUtils)}(window,function(i,t,e){var n=t.prototype;return t.defaults.scrollThreshold=400,t.create.scrollWatch=function(){this.pageScrollHandler=this.onPageScroll.bind(this),this.resizeHandler=this.onResize.bind(this);var t=this.options.scrollThreshold;(t||0===t)&&this.enableScrollWatch()},t.destroy.scrollWatch=function(){this.disableScrollWatch()},n.enableScrollWatch=function(){this.isScrollWatching||(this.isScrollWatching=!0,this.updateMeasurements(),this.updateScroller(),this.on("last",this.disableScrollWatch),this.bindScrollWatchEvents(!0))},n.disableScrollWatch=function(){this.isScrollWatching&&(this.bindScrollWatchEvents(!1),delete this.isScrollWatching)},n.bindScrollWatchEvents=function(t){var e=t?"addEventListener":"removeEventListener";this.scroller[e]("scroll",this.pageScrollHandler),i[e]("resize",this.resizeHandler)},n.onPageScroll=t.throttle(function(){this.getBottomDistance()<=this.options.scrollThreshold&&this.dispatchEvent("scrollThreshold")}),n.getBottomDistance=function(){return this.options.elementScroll?this.getElementBottomDistance():this.getWindowBottomDistance()},n.getWindowBottomDistance=function(){return this.top+this.element.clientHeight-(i.pageYOffset+this.windowHeight)},n.getElementBottomDistance=function(){return this.scroller.scrollHeight-(this.scroller.scrollTop+this.scroller.clientHeight)},n.onResize=function(){this.updateMeasurements()},e.debounceMethod(t,"onResize",150),t}),function(i,n){"function"==typeof define&&define.amd?define("infinite-scroll/js/history",["./core","fizzy-ui-utils/utils"],function(t,e){return n(i,t,e)}):"object"==typeof module&&module.exports?module.exports=n(i,require("./core"),require("fizzy-ui-utils")):n(i,i.InfiniteScroll,i.fizzyUIUtils)}(window,function(n,t,e){var s,i=t.prototype;return t.defaults.history="replace",s=document.createElement("a"),t.create.history=function(){if(this.options.history)return s.href=this.getAbsolutePath(),(s.origin||s.protocol+"//"+s.host)==location.origin?void(this.options.append?this.createHistoryAppend():this.createHistoryPageLoad()):void 0},i.createHistoryAppend=function(){this.updateMeasurements(),this.updateScroller(),this.scrollPages=[{top:0,path:location.href,title:document.title}],this.scrollPageIndex=0,this.scrollHistoryHandler=this.onScrollHistory.bind(this),this.unloadHandler=this.onUnload.bind(this),this.scroller.addEventListener("scroll",this.scrollHistoryHandler),this.on("append",this.onAppendHistory),this.bindHistoryAppendEvents(!0)},i.bindHistoryAppendEvents=function(t){var e=t?"addEventListener":"removeEventListener";this.scroller[e]("scroll",this.scrollHistoryHandler),n[e]("unload",this.unloadHandler)},i.createHistoryPageLoad=function(){this.on("load",this.onPageLoadHistory)},t.destroy.history=i.destroyHistory=function(){this.options.history&&this.options.append&&this.bindHistoryAppendEvents(!1)},i.onAppendHistory=function(t,e,i){if(i&&i.length){var n=i[0],o=this.getElementScrollY(n);s.href=e,this.scrollPages.push({top:o,path:s.href,title:t.title})}},i.getElementScrollY=function(t){return this.options.elementScroll?this.getElementElementScrollY(t):this.getElementWindowScrollY(t)},i.getElementWindowScrollY=function(t){return t.getBoundingClientRect().top+n.pageYOffset},i.getElementElementScrollY=function(t){return t.offsetTop-this.top},i.onScrollHistory=function(){var t,e,i,n,o;for(i=this.getScrollViewY(),n=0;n<this.scrollPages.length&&!((o=this.scrollPages[n]).top>=i);n++)t=n,e=o;t!=this.scrollPageIndex&&(this.scrollPageIndex=t,this.setHistory(e.title,e.path))},e.debounceMethod(t,"onScrollHistory",150),i.getScrollViewY=function(){return this.options.elementScroll?this.scroller.scrollTop+this.scroller.clientHeight/2:n.pageYOffset+this.windowHeight/2},i.setHistory=function(t,e){var i=this.options.history;i&&history[i+"State"]&&(history[i+"State"](null,t,e),this.options.historyTitle&&(document.title=t),this.dispatchEvent("history",null,[t,e]))},i.onUnload=function(){var t,e,i=this.scrollPageIndex;0!==i&&(t=this.scrollPages[i],e=n.pageYOffset-t.top+this.top,this.destroyHistory(),scrollTo(0,e))},i.onPageLoadHistory=function(t,e){this.setHistory(t.title,e)},t}),function(i,n){"function"==typeof define&&define.amd?define("infinite-scroll/js/button",["./core","fizzy-ui-utils/utils"],function(t,e){return n(i,t,e)}):"object"==typeof module&&module.exports?module.exports=n(i,require("./core"),require("fizzy-ui-utils")):n(i,i.InfiniteScroll,i.fizzyUIUtils)}(window,function(t,e,i){function n(t,e){this.element=t,this.infScroll=e,this.clickHandler=this.onClick.bind(this),this.element.addEventListener("click",this.clickHandler),e.on("request",this.disable.bind(this)),e.on("load",this.enable.bind(this)),e.on("error",this.hide.bind(this)),e.on("last",this.hide.bind(this))}return e.create.button=function(){var t=i.getQueryElement(this.options.button);t&&(this.button=new n(t,this))},e.destroy.button=function(){this.button&&this.button.destroy()},n.prototype.onClick=function(t){t.preventDefault(),this.infScroll.loadNextPage()},n.prototype.enable=function(){this.element.removeAttribute("disabled")},n.prototype.disable=function(){this.element.disabled="disabled"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.destroy=function(){this.element.removeEventListener("click",this.clickHandler)},e.Button=n,e}),function(i,n){"function"==typeof define&&define.amd?define("infinite-scroll/js/status",["./core","fizzy-ui-utils/utils"],function(t,e){return n(i,t,e)}):"object"==typeof module&&module.exports?module.exports=n(i,require("./core"),require("fizzy-ui-utils")):n(i,i.InfiniteScroll,i.fizzyUIUtils)}(window,function(t,e,i){function n(t){s(t,"none")}function o(t){s(t,"block")}function s(t,e){t&&(t.style.display=e)}var r=e.prototype;return e.create.status=function(){var t=i.getQueryElement(this.options.status);t&&(this.statusElement=t,this.statusEventElements={request:t.querySelector(".infinite-scroll-request"),error:t.querySelector(".infinite-scroll-error"),last:t.querySelector(".infinite-scroll-last")},this.on("request",this.showRequestStatus),this.on("error",this.showErrorStatus),this.on("last",this.showLastStatus),this.bindHideStatus("on"))},r.bindHideStatus=function(t){var e=this.options.append?"append":"load";this[t](e,this.hideAllStatus)},r.showRequestStatus=function(){this.showStatus("request")},r.showErrorStatus=function(){this.showStatus("error")},r.showLastStatus=function(){this.showStatus("last"),this.bindHideStatus("off")},r.showStatus=function(t){o(this.statusElement),this.hideStatusEventElements(),o(this.statusEventElements[t])},r.hideAllStatus=function(){n(this.statusElement),this.hideStatusEventElements()},r.hideStatusEventElements=function(){var t;for(t in this.statusEventElements)n(this.statusEventElements[t])},e}),function(t,e){"function"==typeof define&&define.amd?define(["infinite-scroll/js/core","infinite-scroll/js/page-load","infinite-scroll/js/scroll-watch","infinite-scroll/js/history","infinite-scroll/js/button","infinite-scroll/js/status"],e):"object"==typeof module&&module.exports&&(module.exports=e(require("./core"),require("./page-load"),require("./scroll-watch"),require("./history"),require("./button"),require("./status")))}(window,function(t){return t}),function(e,i){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("ev-emitter")):e.imagesLoaded=i(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function s(t,e){for(var i in e)t[i]=e[i];return t}function r(t,e,i){if(!(this instanceof r))return new r(t,e,i);var n,o=t;return"string"==typeof t&&(o=document.querySelectorAll(t)),o?(this.elements=(n=o,Array.isArray(n)?n:"object"==typeof n&&"number"==typeof n.length?c.call(n):[n]),this.options=s({},this.options),"function"==typeof e?i=e:s(this.options,e),i&&this.on("always",i),this.getImages(),a&&(this.jqDeferred=new a.Deferred),void setTimeout(this.check.bind(this))):void h.error("Bad element for imagesLoaded "+(o||t))}function i(t){this.img=t}function n(t,e){this.url=t,this.element=e,this.img=new Image}var l,a=e.jQuery,h=e.console,c=Array.prototype.slice;return(r.prototype=Object.create(t.prototype)).options={},r.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},r.prototype.addElementImages=function(t){var e,i,n,o,s,r;if("IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t),(e=t.nodeType)&&l[e]){for(i=t.querySelectorAll("img"),n=0;n<i.length;n++)o=i[n],this.addImage(o);if("string"==typeof this.options.background)for(s=t.querySelectorAll(this.options.background),n=0;n<s.length;n++)r=s[n],this.addElementBackgroundImages(r)}},l={1:!0,9:!0,11:!0},r.prototype.addElementBackgroundImages=function(t){var e,i,n,o=getComputedStyle(t);if(o)for(i=(e=/url\((['"])?(.*?)\1\)/gi).exec(o.backgroundImage);null!==i;)(n=i&&i[2])&&this.addBackground(n,t),i=e.exec(o.backgroundImage)},r.prototype.addImage=function(t){var e=new i(t);this.images.push(e)},r.prototype.addBackground=function(t,e){var i=new n(t,e);this.images.push(i)},r.prototype.check=function(){function e(t,e,i){setTimeout(function(){n.progress(t,e,i)})}var n=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},r.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&h&&h.log("progress: "+i,t,e)},r.prototype.complete=function(){var t,e=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(t=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[t](this))},(i.prototype=Object.create(t.prototype)).check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},i.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},i.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},i.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},i.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(n.prototype=Object.create(i.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},n.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},r.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((a=t).fn.imagesLoaded=function(t,e){return new r(this,t,e).jqDeferred.promise(a(this))})},r.makeJQueryPlugin(),r});
!function(l){var n={pagePath:void 0,containerSelector:"",itemListSelector:".articles-list-container",itemSelector:".item",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",hideNav:".pagination",checkLastPage:!0,loadOnScroll:!0,scrollThreshold:400,defaultAutoLoadPageCount:2,debug:!1,history:!1,onRequest:l.noop,onLoad:l.noop,onAppend:l.noop,onError:l.noop,onLast:l.noop},o=function(o){var t=this;if("object"==typeof o)return t.option=l.extend({},n,o),t._loadMoreButton=function(){return l(t.getFullSelector(t.option.loadMoreBtnSelector))},void(t._loader=function(){return l(t.getFullSelector(t.option.statusSelector)).find(".infinite-scroll-request .loader")})};o.prototype.init=function(){var e=this;0!==l(e.getFullSelector(e.option.itemListSelector)).length&&(e._infScroll=new InfiniteScroll(e.getFullSelector(e.option.itemListSelector),{path:e.option.pagePath,history:e.option.history,loadOnScroll:e.option.loadOnScroll,scrollThreshold:e.option.scrollThreshold,append:e.option.itemSelector,button:e.getFullSelector(e.option.loadMoreBtnSelector),status:e.getFullSelector(e.option.statusSelector),checkLastPage:e.option.checkLastPage,hideNav:e.getFullSelector(e.option.hideNav),debug:e.option.debug}),e._infScroll.on("request",function(o){e._loadMoreButton().is(":visible")&&e._loadMoreButton().addClass("loading"),l.isFunction(e.option.onRequest)&&e.option.onRequest.bind(this)(o)}),e._infScroll.on("load",function(o,t){e._loadMoreButton().is(":visible")&&e._loadMoreButton().removeClass("loading"),l.isFunction(e.option.onLoad)&&e.option.onLoad.bind(this)(o,t)}),e._infScroll.on("load",function o(){0!==e.option.defaultAutoLoadPageCount&&e._infScroll.loadCount===e.option.defaultAutoLoadPageCount&&(e.disabledLoadOnScroll(),e._infScroll.off("load",o))}),e._infScroll.on("append",function(o,t,n){l.isFunction(e.option.onAppend)&&e.option.onAppend.bind(this)(o,t,n)}),e._infScroll.on("error",function(o,t){l.isFunction(e.option.onError)&&e.option.onError.bind(this)(o,t)}),e._infScroll.on("last",function(o,t){setTimeout(function(){e._loadMoreButton().hide()},0),l.isFunction(e.option.onLast)&&e.option.onLast.bind(this)(o,t)}),0!==e.option.defaultAutoLoadPageCount||e.option.loadOnScroll||(e._loadMoreButton().show(),e._loader().hide()))},o.prototype.destroy=function(){var o=this;0!==l(o.getFullSelector(o.option.itemListSelector)).length&&(o._infScroll&&o._infScroll.destroy(),o._loadMoreButton().hide(),o._loader().show())},o.prototype.disabledLoadOnScroll=function(){var o=this;o._infScroll.option({loadOnScroll:!1}),o._loadMoreButton().show(),o._loader().hide()},o.prototype.enabledLoadOnScroll=function(){var o=this;o._infScroll.option({loadOnScroll:!0}),o._loadMoreButton().hide(),o._loader().show()},o.prototype.getFullSelector=function(o){var t=this,n=o.trim();return t.option.containerSelector&&0<t.option.containerSelector.trim().length&&(n=t.option.containerSelector.trim()+" "+n),n},window.OSCInfiniteScroll=o}(window.jQuery||window.$);
!function(){var i={getRadarOption:function(a,t,r){var e={},n=a||[],i=t||[],d=[];return i.forEach(function(a,t){d.push(r)}),e.data={maxValue:d,value:i,description:n},e.config={scale:1,dataFill:{fillStyle:"rgba(24, 236, 111, .4)"},bg:{layer:4,evenFillStyle:"transparent",oddFillStyle:"transparent",evenStrokeStyle:"#dedede",oddStrokeStyle:"#dedede"},dataCircle:{r:1,strokeStyle:"#18ec6f",fillStyle:"#18ec6f",lineWidth:.5},dataLine:{strokeStyle:"#18ec6f",lineWidth:2},font:{fontColor:"#333"}},e},buildRadarPanel:function(t,r,e){var n=this,a=r.attr("data-user-id")||0,i=r.attr("data-skills-num")||5,d=void 0!==r.attr("data-empty-show");$.post(page.space_user_url+"/radar/getUserPortraitRadarMap",{userId:a,skillsNum:i},function(a){1===a.code&&a.result?(t.show(),radarChart.init(e[0],n.getRadarOption(a.result.skills,a.result.skillsScore,a.result.maxSkillScore)),n.bindLink(r)):d&&(t.addClass("empty"),t.show(),radarChart.init(e[0],n.getRadarOption(["社区活跃度","社区影响力","技术贡献度","活动活跃性","开源贡献度","学习积极性"],[0,0,0,0,0,0],5)))})},bindLink:function(a){var t=a.attr("data-detail-url");t?a.on("click",function(){window.open(t)}):a.css("cursor","default")}},a=new window.common.dynamicLoader(["/new-osc/js/utils/plugins/radarChart/radarChart.js"],function(){$(function(){var a=$("div[radar]");0<a.length&&a.each(function(a,t){var r=$(t),e=r.find(".radar-map"),n=r;r.attr("data-container")&&$(r.attr("data-container"))&&(n=$(r.attr("data-container"))),i.buildRadarPanel(n,r,e)})})});a.loadFiles()}();
$(function(){var t=page.gitee_contributions_url;if(!t||0===$(".gitee-contributions").length)return!1;new window.common.dynamicLoader([t],function(){function p(t){var n=0,i="less",e=8,o="little",a=15,r="some",d=25,c="many",s={name:"much"};return t===n?i:t<e?o:t<a?r:t<d?c:s.name}var n,g=$(".gitee-contributions");window.contributions&&window.contributions.last_year_total?function(t){var n,i,e,o,a,r,d,c,s,u,l,f;for(g.find(".git-pendant").attr({href:t.home_url,target:"_blank"}),(n=g.find(".gitee-statistics")).find(".hit-count").html(t.longest_streak),n.find(".fork-count").html(t.fork_count),n.find(".star-count").html(t.star_count),e=147,0<(i=(new Date).getDay())&&(e=140+i),a=[],a=(o=t.contribution_events_hash).length<=e?o:(r=o.length-e,o.slice(r)),c=d="",s=1;s<=a.length;s++)l=(l=(u=a[s-1]).date).replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"),c=c+"<div class='box "+p(f=u.count)+"' data-content='"+f+" 个贡献: "+l+"' data-variation='mini'></div>",s%7!=0&&s!==a.length||(d="<div class='vertical'>"+c+"</div>",c="",g.find(".contribution-box").append(d));g.find(".box").popup()}(window.contributions):function(){var t,n,i,e,o,a;for(g.find(".git-pendant").attr({href:"https://gitee.com",target:"_blank"}),(t=g.find(".gitee-statistics")).find(".hit-count").html(0),t.find(".fork-count").html(0),t.find(".star-count").html(0),i=147,0<(n=(new Date).getDay())&&(i=140+n),o=e="",a=1;a<=i;a++)o=o+"<div class='box "+p(0)+"'></div>",a%7!=0&&a!==i||(e="<div class='vertical'>"+o+"</div>",o="",g.find(".contribution-box").append(e));g.find(".box").popup()}(),g.show(),n=g.find(".popup-gitee-help"),g.find(".popup-gitee-help-toggle").popup({popup:n,hoverable:!0}),$.get(page.space_user_url+"/blog/getGiteeBindStatus",function(t){"0"!==t&&n.find(".register-gitee").remove()})}).loadFiles()});
!function(){var o,d,c,t;$(".space-sidebar .popup-oscer").popup({inline:!0,hoverable:!0,position:"top center",visible:"visible",delay:{show:300,hide:0}}),$(".space-sidebar .action .dropdown-more").dropdown({action:"select"}),o=function(e){var t,o=Number(e)||0;return 1<=o/1e3?(t=(t=o/1e3).toFixed(1),-1<String(t).indexOf(".0")&&(t=parseInt(t)),t+"K"):o},d=function(e,t){e.removeClass("grey yellow outline"),t?e.addClass("yellow"):e.addClass("grey outline")},c=function(e,t){e.text(o(t))},(t=$(".space-sidebar")).on("click",".software-works .software-collect-btn",function(e){var t,o,a,r,i,n,s;if(!window.common.checkLogin())return!1;t=$(this),o=t.find("i"),a=t.find("span"),r=t.attr("data-id"),i=t.attr("data-obj-type"),t.attr("data-user-id"),n=t.data("favorited"),s=page.g_user_id,n?$.post(page.space_user_url+"/favorites/cancel",{id:r,type:i,user:s},function(e){1===e.code?(d(o,!1),c(a,e.result),t.data("favorited",!1)):$("body").toast({type:"error",content:"取消收藏失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试！"})}):$.post(page.space_user_url+"/favorites/add",{id:r,type:i,user:s,tags:""},function(e){1===e.code?(d(o,!0),c(a,e.result),t.data("favorited",!0)):$("body").toast({type:"error",content:"收藏失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试！"})})}),t.on("click",".software-works .view-all-button",function(e){t.find(".software-works .default-hide.item").css("display","flex"),$(this).hide()})}();
!function(){function n(t){var n,r,a,s,e,h,i,l,d,g,o,m,c,u,p=t.element||null,f=t.getIndex||null,w=t.bigImgArr||[],v=t.smallImgArr||[],I=t.rawImgArr||[],b=t.showBigImgCallback,S=t.isBigImgMode;w.length<=0&&v<=0&&p.find('[data-multi-image-raw="item"] img').each(function(t,a){var i=$(a).attr("data-big-img"),e=$(a).attr("data-small-img"),n=$(a).attr("data-raw-img");w.push(i),v.push(e),I.push(n)}),n={createMultiImageWrapper:function(t){t=t||[];var n=$("<div>").attr("data-multi-image","wrapper");return t.forEach(function(t){var a=$("<div>").attr("data-multi-image","item"),i=$("<img>").attr("src",t),e=$("<div>").addClass("loading-gif");a.append(e).append(i),n.append(a)}),n},createStageWrapper:function(t){t=t||[];var e=$("<div>").attr("data-multi-image-stage","wrapper");return 1<t.length&&t.forEach(function(t){var a=$("<div>").attr("data-multi-image-stage","item"),i=$("<img>").attr("src",t);a.append(i),e.append(a)}),e},createToolbarWrapper:function(){var t,a,i,e,n=$("<div>").attr("data-multi-image","toolbar");return S?(e=$("<span>").attr("data-multi-image-tools","show_big_img").html('<i class="icon-svg icon-enlarge-gray"></i>查看原图'),n.append(e)):(t=$("<a>").attr({href:"",target:"_blank","data-multi-image-tools":"show_big_img"}).html('<i class="icon-svg icon-enlarge-gray"></i>查看原图'),a=$("<span>").attr("data-multi-image-tools","rotate_left").html('<i class="icon-svg icon-redo-gray"></i>向左旋转'),i=$("<span>").attr("data-multi-image-tools","rotate_right").html('<i class="icon-svg icon-rotate-right-gray"></i>向右旋转'),n.append(t).append(a).append(i)),n}},this.init=function(){var t,a=n.createMultiImageWrapper(I),i=n.createStageWrapper(v),e=n.createToolbarWrapper();S?((t=$("<div>").attr("data-multi-image-big","wrapper")).append(e).append(a).append(i),$("body").append(t)):((t=$("<div>").attr("data-multi-image","panel")).append(e).append(a).append(i),p.append(t),t.show())},"false"===(p.attr("data-init-multiImage")||"false")&&(this.init(),p.attr("data-init-multiImage","true")),e=p.find('[data-multi-image="panel"]'),h=e.find('[data-multi-image="wrapper"]'),i=p.find('[data-multi-image-raw="list"]'),l=h.find('[data-multi-image="item"]'),d=l.length,g=e.find('[data-multi-image-stage="wrapper"]'),o=g.find('[data-multi-image-stage="item"]'),m=0,c=h.width(),h.height(),u={left:.4*c,right:.6*c},s={closePanel:function(){i.show(),e.hide()},showPanel:function(){i.hide(),e.show()}},a={showCursor:function(){h.delegate('[data-multi-image="item"]',"mousemove",function(t){var a,i,e=$(this).find("img");0<e.length&&(a=e.width(),(i=t.pageX-e.offset().left)<=(u={left:.35*a,right:.65*a}).left&&0<m?h.attr("data-cursor","left"):i>=u.right&&m<d-1?h.attr("data-cursor","right"):h.attr("data-cursor","small"))})},switchImage:function(){h.delegate('[data-multi-image="item"]',"mousedown",function(t){var a,i,e=$(this).find("img");0<e.length&&3!==t.which&&(a=t.pageX-e.offset().left,i=e.width(),a<=(u={left:.35*i,right:.65*i}).left&&0<m?r.switchToPrev():a>=u.right&&m<d-1?r.switchToNext():s.closePanel())})},switchByStage:function(){g.delegate('[data-multi-image-stage="item"]',"click",function(t){var a=$(this).index()||0;$(this).addClass("active").siblings('[data-multi-image-stage="item"]').removeClass("active"),r.switchSlide(a)})},rotateLeft:function(){var i=this;e.delegate('[data-multi-image-tools="rotate_left"]',"click",function(){var t=l.eq(m),a=t.find("img");i.rotateImg(a,t,"left")})},rotateRight:function(){var i=this;e.delegate('[data-multi-image-tools="rotate_right"]',"click",function(){var t=l.eq(m),a=t.find("img");i.rotateImg(a,t,"right")})},rotateImg:function(t,a,i){var e,n,r,s=t.attr("data-isAppendWrapper")||"false",l=t.attr("data-rotate-count")||0,d=0,g=0,o=0;$(a).width(),$(a).height();if(t){switch(e={width:t.width()>=h.width()?h.width():t.width(),height:t.height()},"left"===i?l--:"right"===i&&l++,n=90*l,l%4){case 0:g=d=0,o=e.height;break;case-1:d=(e.width-e.height)/2,g=e.width,o=e.width;break;case-2:d=e.width,g=e.height,o=e.height;break;case-3:d=(e.width+e.height)/2,g=0,o=e.width;break;case-4:g=0,d=e.height/2,o=e.width;break;case 1:d=(e.width+e.height)/2,g=0,o=e.width;break;case 2:d=e.width,g=e.height,o=e.height;break;case 3:d=(e.width-e.height)/2,g=e.width,o=e.width;break;case 4:d=-e.width/2,g=0,o=e.height}t.css({"transform-origin":"0 0",transform:"rotateZ("+n+"deg)"}),t.attr("data-rotate-count",l),"false"==s?((r=$("<div>").height(o).css({left:d,top:g,position:"relative"}).addClass("image-rotate-wrapper")).append(t),a.append(r),t.attr("data-isAppendWrapper","true")):t.parents(".image-rotate-wrapper").height(o).css({left:d,top:g})}},showOriginImg:function(){e.delegate('[data-multi-image-tools="show_big_img"]',"click",function(){l.eq(m).find("img");"function"==typeof b&&b(m)})}},r={switchToNext:function(){m<d-1?m++:m=d-1,this.switchSlide(m)},switchToPrev:function(){0<m?m--:m=0,this.switchSlide(m)},switchToCur:function(){m=m,this.switchSlide(m)},switchSlide:function(t){m=t,l.eq(t).addClass("active").siblings('[data-multi-image="item"]').removeClass("active").removeClass("active-opacity"),o.eq(t).addClass("active").siblings('[data-multi-image-stage="item"]').removeClass("active"),e.find('[data-multi-image-tools="show_big_img"]').attr("href",I[t]),setTimeout(function(){l.eq(t).addClass("active-opacity")},0),"function"==typeof f&&f(t)}},this.switchIndex=function(t){r.switchSlide&&r.switchSlide(t)},this.closePanel=function(){s.closePanel()},this.showPanel=function(){s.showPanel()},$('[data-multi-image="item"] img').each(function(t,a){a.onload=function(){$(this).parents('[data-multi-image="item"]').find(".loading-gif").remove()}}),this.register=(a.showCursor(),a.switchImage(),a.switchByStage(),a.rotateLeft(),a.rotateRight(),void r.switchSlide(m))}var t={showMultiImages:{},initShowMultiImages:function(t,a){var i=t.attr("data-optlog-id")||0,e=t.attr("data-init-multiImage")||"false";"false"===e&&(this.showMultiImages[i]=new n({element:t}),t.attr("data-init-multiImage","true")),this.showMultiImages[i].switchIndex(a),this.showMultiImages[i].showPanel()},initSmallImages:function(){var i=function(t){var a=$(t).data("max-height"),i=$(t).data("max-width"),e=t.naturalWidth,n=t.naturalHeight;n<e?($(t).css("width","auto"),$(t).css("max-height",a)):($(t).css("max-width",i),$(t).css("height","auto"))};$('[data-multi-image-raw="item"] img').each(function(t,a){$(a).data("init")||($(a).data("init",!0),a.onload=function(){i(a)},a.complete&&i(a))})},bindSmallImages:function(){var i=this;$("body").delegate('[data-multi-image-raw="wrapper"] [data-multi-image-raw="item"]',"click",function(){var t=$(this).parents('[data-multi-image-raw="wrapper"]'),a=$(this).index()||0;i.initShowMultiImages(t,a)})}};t.bindSmallImages(),$(function(){t.initSmallImages()}),window.OSCMultipleImageViewer=t}();
$(function(){var e,t=function(){$(document).on("click",".tweet-item .meta a.like",function(e){var i=$(this),t=i.parents(".tweet-item:eq(0)"),n=t.attr("data-tweet-id"),a=t.attr("data-tweet-owner-id"),s=i.find("span");if(!window.common.checkLogin())return!1;$.get(page.space_user_url+"/tweet/tweet_love",{tweet_id:n,author_user_id:a},function(e){var t,a,o,r;1===e.code&&e.result?(t=e.result.isLove,a=e.result.loveCount,o=$('[data-tweet-like-btn][data-tweet-id="'+n+'"]'),t?(i.addClass("active"),i.find(".like.icon").removeClass("outline"),o.addClass("active"),o.find(".like.icon").removeClass("outline")):(i.removeClass("active"),i.find(".like.icon").addClass("outline"),o.removeClass("active"),o.find(".like.icon").addClass("outline")),s.text(a),$('[data-tweet-like-count][data-tweet-id="'+n+'"]').text(a),0<(r=$('[data-tweet-thumbups-list][data-tweet-id="'+n+'"]')).length&&$.get(page.space_user_url+"/widgets/_tweet_thumbups_ajax?tweetId="+n,function(e){r.html(e),$(".thumbups-wrap .thumbups .dropdown").dropdown()})):$("body").toast({type:"error",content:e.message||"点赞失败"})})})};t(),e=function(){var o,t,e,i;void 0!==window.Vue&&(o=new Vue({el:"#tweetShareForm",data:function(){return{tweetMaxLength:160,tweetContent:"",tweetPublishLoading:!1,tipMessage:{show:!1,content:"",className:""},curEmojiType:"People",emojiList:[{type:"People",items:["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","disappointed_relieved","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","cry","sob","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","fu","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","dancer","dancers","ok_woman","no_good","information_desk_person","raising_hand","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface"]},{type:"Nature",items:["sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel"]},{type:"Objects",items:["bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","package","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn"]},{type:"Places",items:["house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de"]},{type:"Symbols",items:["one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","sparkle","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","back","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_small_square","white_small_square","black_medium_small_square","white_medium_small_square","black_medium_square","white_medium_square","black_large_square","white_large_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"]}],repostId:""}},computed:{curEmojiItems:function(){for(var e=0,t=this.emojiList.length;e<t;e++)if(this.emojiList[e].type===this.curEmojiType)return this.emojiList[e].items;return this.emojiList[0].items},tweetContentIsEmpty:function(){return 0===this.tweetContent.length},tweetCountText:function(){return this.tweetContent.length+"/"+this.tweetMaxLength}},methods:{insertEmoji:function(e){this.clearMessage();var t=":"+e+":";this.insertContent(t),$(this.$refs.showEmojiBox).popup("hide")},insertTopic:function(){var e,t,a;this.clearMessage(),e="#此处输入话题#",this.insertContent(e)&&(a=(t=selectRange.of(this.$refs.tweetTextarea)).getCurPos(),t.setSelectText(a-(e.length-1),a-1))},publishTweet:function(){var t,e;if(t=this,!window.common.checkLogin())return!1;t.tweetPublishLoading||(t.clearMessage(),t.tweetContentIsEmpty?t.showMessage("error","内容不能为空",2e3):t.tweetContent.length>t.tweetMaxLength?t.showMessage("error","最多只能输入"+t.tweetMaxLength+"个字符！",2e3):(t.tweetPublishLoading=!0,e={content:t.tweetContent,userId:page.g_user_id||"",user_code:page.g_user_code||"",repost_id:t.repostId},$.post(page.space_user_url+"/tweet/pubForwardTweet",e,function(a){var e;1===a.code?(t.showMessage("success","动弹发布成功！",2e3),t.tweetContent="",a.result&&void 0!==a.result.refCount&&(e=a.result.refCount,$('[data-tweet-ref-count][data-tweet-id="'+t.repostId+'"]').html(e)),setTimeout(function(){var t,e;$(".tweet-share.modal").modal("hide"),a.result&&void 0!==a.result.log&&0<(t=$(".tweets-list-container[data-tweets-list]")).length&&(e=a.result.log,$.get("/tweets/widgets/_tweet_list_item_ajax?tweetId="+e,function(e){t.prepend(e),$(function(){$("[data-emoji-render]").emoticon()}),OSCMultipleImageViewer&&OSCMultipleImageViewer.initSmallImages()}))},500)):t.showMessage("error",a.message||"动弹发布失败，请稍后再试！",2e3)}).fail(function(){t.showMessage("error","网络错误，请稍后再试！",2e3)}).always(function(){t.tweetPublishLoading=!1})))},tweetContentOnKeyDown:function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&this.publishTweet()},insertContent:function(e){return!this.tweetPublishLoading&&(this.tweetContent.length>=this.tweetMaxLength||this.tweetContent.length+e.length>this.tweetMaxLength?(this.showMessage("error","最多只能输入"+this.tweetMaxLength+"个字符！",2e3),!1):(selectRange.of(this.$refs.tweetTextarea).insertAfterText(e),this.tweetContent=this.$refs.tweetTextarea.value,!0))},setCursor:function(e){var t=this.$refs.tweetTextarea;this.$nextTick(function(){selectRange.of(t).setCurPos(e)})},showMessage:function(e,t,a){var o,r=this;r.tipMessage.className="success"===e?"positive":"negative",r.tipMessage.content=t,o=parseInt(a)||0,r.tipMessage.show=!0,0<o&&setTimeout(function(){r.clearMessage()},o)},clearMessage:function(){var e=this;e.tipMessage.className="",e.tipMessage.content="",e.tipMessage.show=!1}}}),$(".tweet-share.modal").modal({onShow:function(){o.$data.repostId=$(this).attr("data-repost-id")||0,o.$data.tweetContent=$(this).attr("data-repost-content")||"",o.setCursor(0)}}),$("#tweetShareForm .tweet-form .toolbox > .item[data-popup]").each(function(e,t){var a=$(t),o=$(a).parent(),r=o.find(".toolbox-popup."+a.attr("data-popup"));a.popup({position:"bottom left",popup:r,on:"toolbox-picture"===a.attr("data-popup")?"manual":"click",exclusive:!0,onShow:function(){if(!window.common.checkLogin())return!1}})}),t=function(e){if(Array.isArray(e)&&0<e.length){var t=$("#tweetShareForm .tweet-textarea");t.atwho({at:"@",data:e,headerTpl:'<div class="atwho-header">我的关注 <small>↑&nbsp;↓&nbsp;</small></div>',searchKey:"searchKey",insertTpl:"${atwho-at}${name}",displayTpl:"<li>${name}</li>",limit:10}),t.on("inserted.atwho",function(e,t,a){o.tweetContent=o.$refs.tweetTextarea.value}),window.__LIKE_SHARE_ATWHO_INIT=!0}},e=function(a){$.post(page.space_user_url+"/tweet/atwho",function(e){var t=e;Array.isArray(t)&&0<t.length&&(window.__USER_FRIENDS=t,a(t))})},i=function(){page.g_user&&768<=window.innerWidth&&!window.__LIKE_SHARE_ATWHO_INIT&&(window.__USER_FRIENDS?t(window.__USER_FRIENDS):e(function(e){t(e)}))},$(document).on("click",".tweet-item .meta a.share",function(e){var t,a,o,r;if(!window.common.checkLogin())return!1;a=(t=$(this).parents(".tweet-item:eq(0)")).attr("data-tweet-id"),o=t.attr("data-repost-content"),(r=$(".tweet-share.modal")).attr("data-repost-id",a),r.attr("data-repost-content",o),r.modal("show"),i()}))},void 0!==window.Vue&&void 0!==$.fn.atwho?e():new window.common.dynamicLoader(["/new-osc/js/utils/vue.min.js","/new-osc/js/utils/plugins/caret/jquery.caret.min.js","/new-osc/js/utils/plugins/atwho/jquery.atwho.min.js"],function(){e()}).loadFiles()});
OSCDefine("space-home-index",function(){var e=function(){this._spaceHome=$(".space-home"),this._spaceIndexContainer=$(".space-index-container"),this._currentInfiniteScroll="";var e=this;this._articleInfiniteScroll={newest:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#newestBlogList",itemListSelector:".space-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".blog-item",loadOnScroll:!0,onAppend:function(){e.optimizeImgShow()}}),popular:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#popularBlogList",itemListSelector:".space-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".blog-item",loadOnScroll:!0,onAppend:function(){e.optimizeImgShow()}}),activity:new OSCInfiniteScroll({pagePath:".pagination__next",containerSelector:"#activityList",itemListSelector:".space-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".activity-item",loadOnScroll:!0,onAppend:function(){e.parseEmoticon()}}),tweet:new OSCInfiniteScroll({pagePath:".pagination__next",containerSelector:"#tweetList",itemListSelector:".space-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".tweet-item",loadOnScroll:!0,onAppend:function(){e.parseEmoticon(),OSCMultipleImageViewer&&OSCMultipleImageViewer.initSmallImages()}})}};return e.prototype={constructor:e,initArticleInfiniteScroll:function(){var e,t=this;t._articleInfiniteScroll[t._currentInfiniteScroll]&&t._articleInfiniteScroll[t._currentInfiniteScroll].destroy(),e=t._spaceHome.find("input[name=currentTab]").val(),t._articleInfiniteScroll[e]&&(t._articleInfiniteScroll[e].init(),t._currentInfiniteScroll=e)},setPageTitle:function(){var e,t,o=this._spaceHome.find("input[name=currentTab]").val(),n="";switch(o){case"newest":n="全部博文",(e=$(".blog-dropdown > .text .text"))&&(n=e.text());break;case"popular":n="热门博文";break;case"activity":n="动态";break;case"tweet":n="动弹"}t=page.g_space_title+" - 开源中国",document.title=n?n+" - "+t:t},initBlogDropdown:function(){var e=$(".blog-dropdown");e.dropdown({className:{active:"on"}}),e.on("click",".text",function(e){var t=$(this).find(".text").html(),o=$(this).siblings(".menu").find("a").first();t===o.find(".text").html()&&o.trigger("click")})},initPJAX:function(){var n=this,i=$(".space-index-container-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".space-tab a.item, .space-scope-menu a.item, .space-index-container .blog-item .catalog-name-link",".space-index-container",{scrollTo:!1}),$(document).on("pjax:send",function(){i.addClass("active")}),$(document).on("pjax:complete",function(e){var t,o=$(e.relatedTarget);i.removeClass("active"),o&&o.hasClass("catalog-name-link")&&(0<(t=$(".space-index-container").offset().top)-50&&(t-=50),$("html, body").stop(!0).animate({scrollTop:t},500,"swing")),n.initBlogDropdown(),n.setPageTitle(),n.initArticleInfiniteScroll(),n.parseEmoticon(),n.optimizeImgShow(),OSCMultipleImageViewer&&OSCMultipleImageViewer.initSmallImages(),n.scrollScopeMenuPositionOffset()})},scrollScopeMenuPositionOffset:function(){var e,t,o,n=$(".space-scope-menu");n&&0<n.length&&(t=(e=n.find(".active.item")).offset().left,o=e.get(0).offsetWidth,window.innerWidth<t+o+10&&n.stop(!0).animate({scrollLeft:t},500,"swing"))},bindSearchBtn:function(){this._spaceIndexContainer.on("click",".search-form .search.link.icon",function(){var e=$(this).parents(".search-form:eq(0)"),t=e.find("input[name=q]").val().trim();0<t.length&&e.submit()})},bindDeleteBlog:function(){this._spaceIndexContainer.on("click",".blog-item .delete-btn",function(){var t=$(this).parents(".blog-item:eq(0)"),e=t.attr("data-id"),o=$(".delete-blog.modal");o.modal({onApprove:function(){$.post(page.space_user_url+"/blog/delete",{id:e,user_code:page.g_user_code||""},function(e){1===e.code?($("body").toast({type:"success",content:"删除成功"}),t.fadeOut(function(){t.remove()})):$("body").toast({type:"error",content:e.message||"删除失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},bindDeleteTweet:function(){this._spaceIndexContainer.on("click",".tweet-item .meta a.remove[data-tweet-remove-btn]",function(){var t=$(this).parents(".tweet-item:eq(0)"),e=t.attr("data-tweet-id"),o=$(".delete-tweet.modal");o.modal({onApprove:function(){$.post(page.space_user_url+"/tweet/deleteTweet",{id:e,user_code:page.g_user_code||""},function(e){1===e.code?($("body").toast({type:"success",content:"删除成功"}),t.fadeOut(function(){t.remove()})):$("body").toast({type:"error",content:e.message||"删除失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},bindDeleteTweetComment:function(){this._spaceIndexContainer.on("click",".tweet-item .meta a.remove[data-tweet-comment-remove-btn]",function(){var t=$(this).parents(".tweet-item:eq(0)"),e=t.attr("data-tweet-comment-id"),o=$(".delete-tweet-comment.modal");o.modal({onApprove:function(){$.post(page.space_user_url+"/tweet/deleteComment",{id:e,user_code:page.g_user_code||""},function(e){1===e.code?($("body").toast({type:"success",content:"删除成功"}),t.fadeOut(function(){t.remove()})):$("body").toast({type:"error",content:e.message||"删除失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},parseEmoticon:function(){$(function(){$("[data-emoji-render]").emoticon()})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},register:function(){this.initArticleInfiniteScroll(),this.initBlogDropdown(),this.initPJAX(),this.bindSearchBtn(),this.bindDeleteBlog(),this.bindDeleteTweet(),this.bindDeleteTweetComment(),this.parseEmoticon(),this.optimizeImgShow(),this.scrollScopeMenuPositionOffset()}},e});
OSCDefine("space-home-radar",function(){return function(){$(".skill").progress(),$(".space-radar .share.dropdown").dropdown()}});
OSCDefine("space-home-following",function(){return function(){function t(){$(".sort-dropdown").dropdown()}var i,d,m,l=$(".followers-wrap");t(),i=$(".followers-loader"),$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a, .sort-dropdown .item",".followers-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(){i.addClass("active")}),$(document).on("pjax:complete",function(e){var a,n;i.removeClass("active"),a=e.relatedTarget,$(a).parent().hasClass("pagination")&&(768<=window.innerWidth?$("html, body").stop(!0).animate({scrollTop:0},500,"swing"):(0<(n=$(".followers-wrap").offset().top)-50&&(n-=50),$("html, body").stop(!0).animate({scrollTop:n},500,"swing"))),t()}),d=$(".set-nickname.modal"),(m=$(".set-nickname-form")).form({inline:!0,keyboardShortcuts:!1,fields:{nickname:{rules:[{type:"maxLength[32]",prompt:"备注长度不能超过 {ruleValue} 个字符"}]}}}).api({url:page.space_user_url+"/user/set_follow_user_name",method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var a=e.data;return e.data={friendid:a.id,name:a.nickname},e},onSuccess:function(e,a,n){var t,i,s,o,r;1===e.code?($(this).message({type:"positive",content:"保存成功"}),t=m.find("input[name=id]").val(),i=m.find("input[name=nickname]").val(),(s=l.find('.friend-item[data-user-id="'+t+'"]')).attr("data-nickname",i),r='<span class="nickname-wrap"> (备注名：<span class="nickname">'+i+"</span>)</span>",0===(o=s.find(".nickname-wrap")).length?(o=$(r),s.find(".author-name").append(o)):o.html(r),0===i.trim().length?o.hide():o.show(),setTimeout(function(){d.modal("hide")},2e3)):$(this).message({type:"negative",content:e.message})},onFailure:function(e,a){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}}),d.modal({onShow:function(){var e,a,n;m.form("reset"),m.message("hideAll"),e=$(this).attr("data-user-id")||"",a=$(this).attr("data-user-name")||"",n=$(this).attr("data-nickname")||"",$(this).find("input[name=id]").val(e),$(this).find("span.username").text(a),$(this).find("input[name=nickname]").val(n)},onApprove:function(){return m.message("hideAll"),m.form("submit"),!1}}),l.on("click",".item a.set-nickname-btn",function(){var e=$(this).parents(".friend-item:eq(0)"),a=e.attr("data-user-id"),n=e.attr("data-user-name"),t=e.attr("data-nickname");d.attr("data-user-id",a),d.attr("data-user-name",n),d.attr("data-nickname",t),d.modal("show")})}});
OSCDefine("space-home-followers",function(){return function(){function n(){$(".sort-dropdown").dropdown()}n();var t=$(".followers-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a, .sort-dropdown .item",".followers-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(){t.addClass("active")}),$(document).on("pjax:complete",function(o){var e,a;t.removeClass("active"),e=o.relatedTarget,$(e).parent().hasClass("pagination")&&(768<=window.innerWidth?$("html, body").stop(!0).animate({scrollTop:0},500,"swing"):(0<(a=$(".followers-wrap").offset().top)-50&&(a-=50),$("html, body").stop(!0).animate({scrollTop:a},500,"swing"))),n()})}});
OSCDefine("space-home-favorites-tags",function(){return function(){var s,r,m=$(".favorites-wrap"),n=$(".favorites-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a, .space-tab a.item",".favorites-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(){n.addClass("active")}),$(document).on("pjax:complete",function(t){var a,e;n.removeClass("active"),a=t.relatedTarget,$(a).parent().hasClass("pagination")&&(768<=window.innerWidth?$("html, body").stop(!0).animate({scrollTop:0},500,"swing"):(0<(e=$(".favorites-wrap").offset().top)-50&&(e-=50),$("html, body").stop(!0).animate({scrollTop:e},500,"swing")))}),$.fn.form.settings.rules.hasComma=function(t){return!/[，,]/.test(t)},s=$(".edit-tag.modal"),(r=$(".edit-tag-form")).form({inline:!0,fields:{tag:{rules:[{type:"empty",prompt:"请输入标签名"},{type:"hasComma",prompt:"标签名不允许包含逗号"}]}}}).api({url:page.space_user_url+"/favorites/updateTagInAll",method:"post",serializeForm:!0,beforeSend:function(t){$(this).message("hideAll");var a=t.data;return t.data={preTag:a.preTag,tag:a.tag},t},onSuccess:function(t,a,e){var n,o,i;1===t.code?($(this).message({type:"positive",content:"修改成功"}),n=r.find("input[name=preTag]").val(),o=r.find("input[name=tag]").val(),(i=m.find('.tag-item[data-tag="'+n+'"]')).attr("data-tag",o),i.find(".tag-name").text(o),setTimeout(function(){s.modal("hide")},2e3)):$(this).message({type:"negative",content:t.message||"修改失败"})},onFailure:function(t,a){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}}),s.modal({onShow:function(){r.form("reset"),r.message("hideAll");var t=$(this).attr("data-tag")||"";$(this).find("input[name=preTag]").val(t),$(this).find("input[name=tag]").val(t)},onApprove:function(){return r.message("hideAll"),r.form("submit"),!1}}),m.on("click",".tag-item a.edit-tag-btn",function(){var t=$(this).parents(".tag-item:eq(0)"),a=t.attr("data-tag");s.attr("data-tag",a),s.modal("show")}),m.on("click",".tag-item a.delete-tag-btn",function(){var e=$(this).parents(".tag-item:eq(0)"),t=e.attr("data-tag"),a=$(".delete-tag.modal");a.modal({onApprove:function(){$.post(page.space_user_url+"/favorites/updateTagInAll",{preTag:t,tag:""},function(t,a){1===t.code?($(this).message({type:"positive",content:t.message||"删除成功"}),e.fadeOut(function(){e.remove()})):$("body").toast({type:"error",content:t.message||"删除失败"})}).fail(function(){})}}).modal("show")}),$(".search-form").on("click",".search.link.icon",function(){var t=$(this).parents(".search-form:eq(0)"),a=t.find("input[name=q]").val().trim();0<a.length&&t.submit()})}});
OSCDefine("space-home-favorites",function(){return function(){var i,o,e=$(".favorites-wrap"),n=$(".favorites-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a, .space-tab a.item",".favorites-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(){n.addClass("active")}),$(document).on("pjax:complete",function(e){var t,a;n.removeClass("active"),t=e.relatedTarget,$(t).parent().hasClass("pagination")&&(0<(a=$(".favorites-wrap").offset().top)-50&&(a-=50),$("html, body").stop(!0).animate({scrollTop:a},500,"swing"))}),i=$(".set-tag.modal"),(o=$(".set-tag-form")).form({inline:!0,keyboardShortcuts:!1,fields:{tags:{rules:[{type:"empty",prompt:"请输入标签"}]}}}).api({url:page.space_user_url+"/favorites/edit",method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=e.data;return e.data={id:t.id,type:t.type,tags:t.tags,user:page.userId},e},onSuccess:function(e,t,a){1===e.code?($(this).message({type:"positive",content:"设置成功",disappear:2e3}),setTimeout(function(){i.modal("hide"),location.reload()},2e3)):$(this).message({type:"negative",content:e.message,disappear:2e3})},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}}),i.modal({onShow:function(){var e,t,a;o.form("reset"),o.message("hideAll"),e=$(this).data("obj-id")||"",t=$(this).data("obj-type")||"",a=$(this).data("tags")||"",$(this).find("input[name=id]").val(e),$(this).find("input[name=type]").val(t),$(this).find("input[name=tags]").val(a)},onApprove:function(){return o.message("hideAll"),o.form("submit"),!1}}),e.on("click",".obj-item a.set-tag-btn",function(){var e=$(this).parents(".obj-item:eq(0)"),t=e.data("obj-id"),a=e.data("obj-type"),o=e.data("tags");i.data("obj-id",t),i.data("obj-type",a),i.data("tags",o),i.modal("show")}),e.on("click",".obj-item a.remove-btn",function(){var a=$(this).parents(".obj-item:eq(0)"),e=a.data("obj-id"),t=a.data("obj-type"),o=$(".remove-favorite.modal");o.modal({onApprove:function(){$.post(page.space_user_url+"/favorites/cancel",{id:e,type:t},function(e,t){a.fadeOut(function(){a.remove()})}).fail(function(){})}}).modal("show")}),e.on("click",".search-form .search.link.icon",function(){var e=$(this).parents(".search-form:eq(0)"),t=e.find("input[name=q]").val().trim();0<t.length&&e.submit()})}});
var CryptoJS=CryptoJS||function(a,t){var e,n={},i=n.lib={},r=function(){},s=i.Base={extend:function(t){r.prototype=this;var n=new r;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),(n.init.prototype=n).$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=i.WordArray=s.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=null!=n?n:4*t.length},toString:function(t){return(t||h).stringify(this)},concat:function(t){var n,i=this.words,e=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(n=0;n<t;n++)i[r+n>>>2]|=(e[n>>>2]>>>24-n%4*8&255)<<24-(r+n)%4*8;else if(65535<e.length)for(n=0;n<t;n+=4)i[r+n>>>2]=e[n>>>2];else i.push.apply(i,e);return this.sigBytes+=t,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=a.ceil(n/4)},clone:function(){var t=s.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var n=[],i=0;i<t;i+=4)n.push(4294967296*a.random()|0);return new c.init(n,t)}}),o=n.enc={},h=o.Hex={stringify:function(t){var n,i,e,r=t.words;for(t=t.sigBytes,n=[],i=0;i<t;i++)e=r[i>>>2]>>>24-i%4*8&255,n.push((e>>>4).toString(16)),n.push((15&e).toString(16));return n.join("")},parse:function(t){for(var n=t.length,i=[],e=0;e<n;e+=2)i[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new c.init(i,n/2)}},u=o.Latin1={stringify:function(t){var n,i,e=t.words;for(t=t.sigBytes,n=[],i=0;i<t;i++)n.push(String.fromCharCode(e[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(t){for(var n=t.length,i=[],e=0;e<n;e++)i[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new c.init(i,n)}},f=o.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},l=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var n,i=this._data,e=i.words,r=i.sigBytes,s=this.blockSize,o=r/(4*s);if(t=(o=t?a.ceil(o):a.max((0|o)-this._minBufferSize,0))*s,r=a.min(4*t,r),t){for(n=0;n<t;n+=s)this._doProcessBlock(e,n);n=e.splice(0,t),i.sigBytes-=r}return new c.init(n,r)},clone:function(){var t=s.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});return i.Hasher=l.extend({cfg:s.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(t,n){return new i.init(n).finalize(t)}},_createHmacHelper:function(i){return function(t,n){return new e.HMAC.init(i,n).finalize(t)}}}),e=n.algo={},n}(Math);!function(){var t=CryptoJS,n=(e=t.lib).WordArray,i=e.Hasher,u=[],e=t.algo.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,n){var i,e,r,s,o,a,c,h;for(e=(i=this._hash.words)[0],r=i[1],s=i[2],o=i[3],a=i[4],c=0;c<80;c++)u[c]=c<16?0|t[n+c]:(h=u[c-3]^u[c-8]^u[c-14]^u[c-16])<<1|h>>>31,h=(e<<5|e>>>27)+a+u[c],h=c<20?h+(1518500249+(r&s|~r&o)):c<40?h+(1859775393+(r^s^o)):c<60?h+((r&s|r&o|s&o)-1894007588):h+((r^s^o)-899497514),a=o,o=s,s=r<<30|r>>>2,r=e,e=h;i[0]=i[0]+e|0,i[1]=i[1]+r|0,i[2]=i[2]+s|0,i[3]=i[3]+o|0,i[4]=i[4]+a|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,e=8*t.sigBytes;return n[e>>>5]|=128<<24-e%32,n[14+(e+64>>>9<<4)]=Math.floor(i/4294967296),n[15+(e+64>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=i._createHelper(e),t.HmacSHA1=i._createHmacHelper(e)}();
!function(r,t){var e=function(t){var e=this;t&&!t.refreshSelector&&(t.refreshSelector=t.imgSelector),e.opts=e.extend(e.defaultConf,t),e._imgEl=r(e.opts.imgSelector),e._refreshEl=r(e.opts.refreshSelector),e._inputEl=r(e.opts.inputSelector),e._captchaUrl=e.opts.captchaUrl,e._refreshEl.on("click",function(t){e.refresh(),0<e._inputEl.length&&e._inputEl.focus()})};e.prototype.refresh=function(){this._imgEl.attr("src",this._captchaUrl+"?t="+Math.random()),0<this._inputEl.length&&this._inputEl.val("")},e.prototype.defaultConf={imgSelector:".captcha img",refreshSelector:".captcha",inputSelector:"input[name=verifyCode]",captchaUrl:"https://www.oschina.net/action/user/captcha"},e.prototype.extend=function(t,e){var r,o,n={};for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);for(o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);return n},t.OSCCaptcha=e}(window.jQuery||window.$,window);
OSCDefine("space-admin-bind-tel",function(){var e=function(){var e=this;e._bindTelForm=$(".bind-tel.form"),e._unbindTelForm=$(".unbind-tel.form"),e._changeBindTelForm=$(".change-bind-tel.form")};return e.prototype={constructor:e,initBindTelForm:function(){function n(e){var t,n=e||60;o.addClass("disabled"),o.text(n+"s 后重新发送"),window.localStorage&&localStorage.setItem("bind_phone_code",parseInt((new Date).getTime()/1e3)+n),t=setInterval(function(){--n<1?(clearInterval(t),o.removeClass("disabled"),o.text("获取验证码")):(o.text(n+"s 后重新发送"),window.localStorage&&localStorage.setItem("bind_phone_code",parseInt((new Date).getTime()/1e3)+n))},1e3)}var o,a=this;a._bindTelCaptcha=new OSCCaptcha({imgSelector:".bind-tel.form .captcha img",refreshSelector:".bind-tel.form .captcha",inputSelector:".bind-tel.form input[name=verifyCode]",captchaUrl:page.space_user_url+"/admin/captcha"}),(o=a._bindTelForm.find(".send-phone-code")).on("click",function(){a._bindTelForm.form("validate field","phone")&&a._bindTelForm.form("validate field","verifyCode")&&(o.addClass("loading"),$.ajax({type:"POST",url:page.space_user_url+"/user/sendVerifyCodeForBindPhoneWithCode",data:{phoneNumber:a._bindTelForm.form("get value","phone"),verifyCode:a._bindTelForm.form("get value","verifyCode")},success:function(e){switch(e.message){case"success":n();break;case"not_allow_to_send":a._bindTelForm.form("add prompt","phone_v_code","发送次数过多，暂时不可获取验证码");break;case"fail":a._bindTelForm.form("add prompt","phone_v_code","短信发送失败");break;case"phone_exist":a._bindTelForm.form("add prompt","phone","该手机号码已绑定其它帐号");break;case"图片验证码输入有误":a._bindTelForm.form("add prompt","verifyCode","请输入正确的图片验证码"),a._bindTelCaptcha.refresh(),a._bindTelForm.find("input[name=verifyCode]").focus();break;default:a._bindTelCaptcha.refresh(),e.result&&""!==e.result?a._bindTelForm.form("add prompt",e.result,e.message||"发送失败"):setTimeout(function(){a._bindTelForm.message({type:"negative",content:e.message||"短信验证码发送失败"})},2e3)}},dataType:"json"}).fail(function(){a._bindTelForm.form("add prompt","phone_v_code","短信发送失败")}).always(function(){o.removeClass("loading")}))}),$(function(){var e,t=0;window.localStorage&&(t=localStorage.getItem("bind_phone_code"))&&(0<(e=t-parseInt((new Date).getTime()/1e3))?n(e):localStorage.removeItem("bind_phone_code")),a._bindTelForm.find("input[name=phone]").focus()}),$.fn.form.settings.rules.phoneExist=function(e){var t=!1;return $.ajax({async:!1,url:page.space_user_url+"/user/check_phone_available",type:"POST",data:{phone:e},dataType:"json",success:function(e){0===e.code&&"success"!==e.message&&(t=!0,setTimeout(function(){$(this).message({type:"negative",content:e.message||"该手机号码已绑定至其他帐号"})},2e3))}}),!t},a._bindTelForm.form({inline:!0,fields:{pwd:{rules:[{type:"empty",prompt:"请输入登录密码"}]},phone:{rules:[{type:"empty",prompt:"请输入手机号码"},{type:"regExp",value:/^1([0-9]{10})$/,prompt:"请输入正确的手机号码"},{type:"phoneExist",prompt:"该手机号码已绑定至其他帐号"}]},verifyCode:{rules:[{type:"empty",prompt:"请输入验证码"}]},vCode:{rules:[{type:"empty",prompt:"请输入短信验证码"}]}}}).api({url:page.space_user_url+"/user/request_bind_phone",method:"post",serializeForm:!0,beforeSend:function(e){$(this).find(".error").removeClass("error").find(".prompt").remove(),$(this).message("hideAll");var t=e.data;return e.data.pwd=CryptoJS.SHA1(t.pwd).toString(),e},onSuccess:function(e){1===e.code?($(this).message({type:"positive",content:e.message||"绑定成功"}),setTimeout(function(){location.reload()},2e3)):(a._bindTelCaptcha.refresh(),"pwd"===e.result||"phone"===e.result||"verifyCode"===e.result||"vCode"===e.result?($(this).form("add prompt",e.result,e.message),$(this).find('input[name="'+e.result+'"]').focus()):$(this).message({type:"negative",content:e.message||"绑定失败"}))},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}})},initUnbindTelForm:function(){this._unbindTelForm.form({inline:!0,fields:{pwd:{rules:[{type:"empty",prompt:"请输入登录密码"}]}}}).api({url:page.space_user_url+"/user/request_unbind_phone",method:"post",serializeForm:!0,beforeSend:function(e){$(this).find(".error").removeClass("error").find(".prompt").remove(),$(this).message("hideAll");var t=e.data;return e.data.pwd=CryptoJS.SHA1(t.pwd).toString(),e},onSuccess:function(e){1===e.code?($(this).message({type:"positive",content:e.message||"解绑成功"}),setTimeout(function(){location.reload()},2e3)):"pwd"===e.result?($(this).form("add prompt",e.result,e.message),$(this).find('input[name="'+e.result+'"]').focus()):$(this).message({type:"negative",content:e.message||"解绑失败"})},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}})},initChangeBindTelForm:function(){function n(e){var t,n=e||60;o.addClass("disabled"),o.text(n+"s 后重新发送"),window.localStorage&&localStorage.setItem("change_bind_phone_code",parseInt((new Date).getTime()/1e3)+n),t=setInterval(function(){--n<1?(clearInterval(t),o.removeClass("disabled"),o.text("获取验证码")):(o.text(n+"s 后重新发送"),window.localStorage&&localStorage.setItem("change_bind_phone_code",parseInt((new Date).getTime()/1e3)+n))},1e3)}var o,a=this;a._changeBindTelCaptcha=new OSCCaptcha({imgSelector:".change-bind-tel.form .captcha img",refreshSelector:".change-bind-tel.form .captcha",inputSelector:".change-bind-tel.form input[name=verifyCode]",captchaUrl:page.space_user_url+"/admin/captcha"}),(o=a._changeBindTelForm.find(".send-phone-code")).on("click",function(){a._changeBindTelForm.form("validate field","phone")&&a._changeBindTelForm.form("validate field","verifyCode")&&(o.addClass("loading"),$.ajax({type:"POST",url:page.space_user_url+"/user/sendVerifyCodeForBindPhoneWithCode",data:{phoneNumber:a._changeBindTelForm.form("get value","phone"),verifyCode:a._changeBindTelForm.form("get value","verifyCode")},success:function(e){switch(e.message){case"success":n();break;case"not_allow_to_send":a._changeBindTelForm.form("add prompt","phone_v_code","发送次数过多，暂时不可获取验证码");break;case"fail":a._changeBindTelForm.form("add prompt","phone_v_code","短信发送失败");break;case"phone_exist":a._changeBindTelForm.form("add prompt","phone","该手机号码已绑定其它帐号");break;case"图片验证码输入有误":a._changeBindTelForm.form("add prompt","verifyCode","请输入正确的图片验证码"),a._changeBindTelCaptcha.refresh(),a._changeBindTelForm.find("input[name=verifyCode]").focus();break;default:a._changeBindTelCaptcha.refresh(),e.result&&""!==e.result?a._changeBindTelForm.form("add prompt",e.result,e.message||"发送失败"):setTimeout(function(){a._changeBindTelForm.message({type:"negative",content:e.message||"短信验证码发送失败"})},2e3)}},dataType:"json"}).fail(function(){a._changeBindTelForm.form("add prompt","phone_v_code","短信发送失败")}).always(function(){o.removeClass("loading")}))}),$(function(){var e,t=0;window.localStorage&&(t=localStorage.getItem("change_bind_phone_code"))&&(0<(e=t-parseInt((new Date).getTime()/1e3))?n(e):localStorage.removeItem("change_bind_phone_code")),a._changeBindTelForm.find("input[name=phone]").focus()}),$.fn.form.settings.rules.phoneExist=function(e){var t=!1;return $.ajax({async:!1,url:page.space_user_url+"/user/check_phone_available",type:"POST",data:{phone:e},dataType:"json",success:function(e){0===e.code&&"success"!==e.message&&(t=!0,setTimeout(function(){$(this).message({type:"negative",content:e.message||"该手机号码已绑定至其他帐号"})},2e3))}}),!t},a._changeBindTelForm.form({inline:!0,fields:{pwd:{rules:[{type:"empty",prompt:"请输入登录密码"}]},phone:{rules:[{type:"empty",prompt:"请输入手机号码"},{type:"regExp",value:/^1([0-9]{10})$/,prompt:"请输入正确的手机号码"},{type:"phoneExist",prompt:"该手机号码已绑定至其他帐号"}]},verifyCode:{rules:[{type:"empty",prompt:"请输入验证码"}]},vCode:{rules:[{type:"empty",prompt:"请输入短信验证码"}]}}}).api({url:page.space_user_url+"/user/request_change_bind_phone",method:"post",serializeForm:!0,beforeSend:function(e){$(this).find(".error").removeClass("error").find(".prompt").remove(),$(this).message("hideAll");var t=e.data;return e.data.pwd=CryptoJS.SHA1(t.pwd).toString(),e},onSuccess:function(e){1===e.code?($(this).message({type:"positive",content:e.message||"更换号码成功"}),setTimeout(function(){location.reload()},2e3)):(a._changeBindTelCaptcha.refresh(),"pwd"===e.result||"phone"===e.result||"verifyCode"===e.result||"vCode"===e.result?($(this).form("add prompt",e.result,e.message),$(this).find('input[name="'+e.result+'"]').focus()):$(this).message({type:"negative",content:e.message||"更换号码失败"}))},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}})},register:function(){0<this._bindTelForm.length&&this.initBindTelForm(),0<this._changeBindTelForm.length&&this.initChangeBindTelForm()}},e});
OSCDefine("space-admin-blog-catalogs",function(){var a=function(){this._catalogWrap=$(".blog-catalogs-wrap"),this._catalogsTable=$(".catalogs.table"),this._catalogForm=$(".catalog.form")};return a.prototype={constructor:a,bindAddEditCatalogBtn:function(){var n=this,i=$(".catalog.modal");n._catalogWrap.on("click",".add-catalog-btn",function(){i.modal("show")}),n._catalogsTable.on("click",".edit.button",function(a){var t=$(this).parents("tr:eq(0)"),e=t.data("id"),o=t.data("name"),n=t.data("order");i.data("edit",!0),i.data("catalog-id",e),i.data("catalog-name",o),i.data("catalog-order",n),i.modal("show")}),n._catalogForm.form({inline:!0,fields:{name:{rules:[{type:"empty",prompt:"请输入分类名称"}]},order:{rules:[{type:"empty",prompt:"请输入排序值"},{type:"integer",prompt:"请输入正确的排序值"}]}}}).api({url:page.space_user_url+"/blog/add_blog_catalog",method:"post",serializeForm:!0,beforeSend:function(a){var t,e;return $(this).message("hideAll"),t=a.data,e=n._catalogForm.data("edit"),a.data=e?{space:page.spaceId,id:t.id,name:t.name,sort_order:t.order}:{space:page.spaceId,id:0,name:t.name,sort_order:t.order},a},onSuccess:function(a,t,e){if(1===a.code){var o=n._catalogForm.data("edit");$(this).message({type:"positive",content:o?"修改成功":"添加成功"}),setTimeout(function(){parent.location.reload()},1e3)}else 0===a.code?$(this).message({type:"negative",content:a.message}):$(this).message({type:"negative",content:"网络错误，请稍后再试"})},onFailure:function(a,t){$(this).message({type:"negative",content:a.message||"网络错误，请稍后再试",disappear:2e3})}}),i.modal({onShow:function(){var a,t,e;n._catalogForm.form("reset"),n._catalogForm.message("hideAll"),i.data("edit")?(a=$(this).data("catalog-id")||0,t=$(this).data("catalog-name")||"",e=$(this).data("catalog-order")||0,n._catalogForm.data("edit",!0),n._catalogForm.find("input[name=id]").val(a),n._catalogForm.find("input[name=name]").val(t),n._catalogForm.find("input[name=order]").val(e),$(this).find(".header").text("修改分类")):$(this).find(".header").text("添加分类")},onHidden:function(){i.removeData("edit"),i.removeData("catalog-id")},onApprove:function(){return n._catalogForm.message("hideAll"),n._catalogForm.form("submit"),!1}}),i.on("keydown",function(a){(a.metaKey||a.ctrlKey)&&13===a.keyCode&&i.find(".positive.button").click()})},bindDeleteBtn:function(){this._catalogsTable.on("click",".delete.button",function(a){var e=$(this).parents("tr:eq(0)"),t=e.data("id"),o=$(".delete-catalog.modal");o.find("span.catalog").text(e.data("name")),o.modal({onApprove:function(){$.post(page.space_user_url+"/blog/delete_blog_catalog",{space:page.spaceId,id:t,user_code:page.g_user_code||""},function(a,t){1===a.code?(e.fadeOut(function(){e.remove()}),$("body").toast({type:"success",content:"删除成功"})):(a.code,$("body").toast({type:"error",content:a.message}))}).fail(function(){$("body").toast({type:"error",content:res.message})})}}).modal("show")})},register:function(){this.bindDeleteBtn(),this.bindAddEditCatalogBtn()}},a});
OSCDefine("space-admin-blog-comments",function(){var e=function(){this._commentsWrap=$(".blog-comments-wrap")};return e.prototype={constructor:e,initPJAX:function(){var e=this,t=$(".comments-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a",".blog-comments-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(){t.addClass("active")}),$(document).on("pjax:complete",function(){t.removeClass("active"),$("html, body").stop().animate({scrollTop:0},500,"swing"),e.parseEmoticon()})},bindDeleteUserAllBtn:function(){this._commentsWrap.on("click",".delete-user-all.button",function(e){var t=$(this).parents(".comment:eq(0)"),o=t.data("user-id"),n=$(".delete-user-all-comment.modal"),a=$(".delete-user-all-comment-confirm.modal");n.modal({onApprove:function(){a.modal({onApprove:function(){$.post(page.space_user_url+"/blog/delete_blog_comments_by_user?space="+page.spaceId,{user:o,user_code:page.g_user_code||""},function(e,t){$("body").toast({type:"success",content:"删除成功"}),setTimeout(function(){parent.location.reload()},1e3)}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")}}).modal("show")})},bindDeleteBtn:function(){this._commentsWrap.on("click",".delete.button",function(e){var o=$(this).parents(".comment:eq(0)"),t=o.data("blog-id"),n=o.data("user-id"),a=o.data("comment-id"),s=$(".delete-comment.modal");s.modal({onApprove:function(){$.post(page.space_user_url+"/blog/delete_blog_comments",{space:page.spaceId,id:a,user:n,blog:t,user_code:page.g_user_code||""},function(e,t){1===e.code?($("body").toast({type:"success",content:"删除成功"}),o.fadeOut(function(){o.remove()})):$("body").toast({type:"error",content:e.message||"删除失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},parseEmoticon:function(){$(function(){$("[data-emoji-render]").emoticon()})},register:function(){this.initPJAX(),this.bindDeleteUserAllBtn(),this.bindDeleteBtn(),this.parseEmoticon()}},e});
OSCDefine("space-admin-blog-settings",function(){return function(){var e=$(".blog-settings.form");e.find(".ui.checkbox").checkbox(),e.form({inline:!0,keyboardShortcuts:!1,fields:{donate_message:{rules:[{type:"empty",prompt:"请输入打赏描述"},{type:"maxLength[100]",prompt:"打赏描述长度不能超过 {ruleValue} 个字符"}]}}}).api({url:page.space_user_url+"/blog/update_settings",method:"post",serializeForm:!0,beforeSend:function(e){$(this).find(".error").removeClass("error").find(".prompt").remove(),$(this).message("hideAll");var t=e.data;return e.data={user_code:t.user_code,blog_editor:t.blog_editor,donate_switch:t.donate_switch,donate_message:t.donate_message},e},onSuccess:function(e,t,s){1===e.code?$(this).message({type:"positive",content:e.message||"修改成功",disappear:2e3}):-1<["blog_editor","donate_switch","donate_message"].indexOf(e.result)?$(this).form("add prompt",e.result,e.message):$(this).message({type:"negative",content:e.message||"修改失败",disappear:2e3})},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}})}});
OSCDefine("space-admin-change-email",function(){return function(){var e=$(".change-email.form"),t=new OSCCaptcha({imgSelector:".change-email.form .captcha img",refreshSelector:".change-email.form .captcha",inputSelector:".change-email.form input[name=verifyCode]",captchaUrl:page.space_user_url+"/admin/captcha"});e.form({inline:!0,fields:{password:{rules:[{type:"empty",prompt:"请输入登录密码"}]},email:{rules:[{type:"empty",prompt:"请输入新邮箱"},{type:"email",prompt:"请输入正确的邮箱地址"}]},verifyCode:{rules:[{type:"empty",prompt:"请输入验证码"}]}}}).api({url:page.space_user_url+"/admin/request_change_email_new",method:"post",serializeForm:!0,beforeSend:function(e){$(this).find(".error").removeClass("error").find(".prompt").remove(),$(this).message("hideAll");var a=e.data;return e.data={password:CryptoJS.SHA1(a.password).toString(),email:a.email,verifyCode:a.verifyCode},e},onSuccess:function(e,a,r){1===e.code?($(this).message({type:"positive",content:e.message||"修改成功"}),$.post(page.g_user_url+"/user/logout",{session:page.g_user_code},function(e){200===e.code&&(location.href=page.login_page||"")}),setTimeout(function(){location.reload()},2e3)):("password"===e.result||"email"===e.result||"verifyCode"===e.result?$(this).form("add prompt",e.result,e.message):$(this).message({type:"negative",content:e.message||"修改失败"}),t.refresh())},onFailure:function(e,a){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}}),$(function(){e.find("input[name=password]").focus()})}});
OSCDefine("space-admin-chpwd",function(){return function(){$(".chpwd.form").form({inline:!0,fields:{pwd:{rules:[{type:"empty",prompt:"请输入旧的登录密码"}]},newpwd:{rules:[{type:"empty",prompt:"请输入新密码"},{type:"minLength[8]",prompt:"密码长度至少 {ruleValue} 位"},{type:"maxLength[20]",prompt:"密码长度不能超过 {ruleValue} 位"},{type:"password",prompt:"密码必须由字母或特殊字符和数字组成"}]},newpwdConfirm:{rules:[{type:"empty",prompt:"请再次输入新密码"},{type:"match[newpwd]",prompt:"两次密码输入不一致"}]}}}).api({url:page.space_user_url+"/admin/passwd",method:"post",serializeForm:!0,beforeSend:function(e){$(this).find(".error").removeClass("error").find(".prompt").remove(),$(this).message("hideAll");var t=e.data;return e.data={pwd:CryptoJS.SHA1(t.pwd).toString(),newpwd:CryptoJS.SHA1(t.newpwd).toString(),newpwd2:CryptoJS.SHA1(t.newpwd2).toString()},e},onSuccess:function(e,t,p){1===e.code?$(this).message({type:"positive",content:e.message||"修改成功"}):-1<["pwd","newpwd","newpwd2"].indexOf(e.result)?$(this).form("add prompt",e.result,e.message):$(this).message({type:"negative",content:e.message||"修改失败",disappear:2e3})},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}})}});
OSCDefine("space-admin-drafts",function(){var t=function(){this._draftsWrap=$(".drafts-wrap")};return t.prototype={constructor:t,initPAJX:function(){var t=this,e=$(".drafts-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a",".drafts-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(){e.addClass("active")}),$(document).on("pjax:complete",function(){e.removeClass("active"),t.optimizeImgShow(),$("html, body").stop().animate({scrollTop:0},500,"swing")})},bindDeleteBtn:function(){this._draftsWrap.on("click",".delete-btn",function(t){var e=$(this).parents(".draft:eq(0)"),o=e.data("blog-id"),n=$(".delete-draft.modal");n.modal({onApprove:function(){$.post(page.space_user_url+"/blog/delete_draft",{id:o,user_code:page.g_user_code||""},function(t){1===t.code?($("body").toast({type:"success",content:"删除成功"}),e.fadeOut(function(){e.remove()}),parent.location.reload()):$("body").toast({type:"error",content:t.message||"删除失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},register:function(){this.initPAJX(),this.bindDeleteBtn(),this.optimizeImgShow()}},t});
OSCDefine("space-admin-inbox",function(){var e=function(){this._inboxWrap=$(".inbox-wrap")};return e.prototype={constructor:e,initPJAX:function(){var e=this,t=$(".inbox-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a, .space-tab a.item",".inbox-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(){t.addClass("active")}),$(document).on("pjax:complete",function(){t.removeClass("active"),$("html, body").stop().animate({scrollTop:0},500,"swing"),e.parseEmoticon()})},bindDeleteBtn:function(){this._inboxWrap.on("click",".messages-wrap a.delete",function(e){var n=$(this).parents(".private-message:eq(0)"),t=n.data("user-id"),a=$(".delete-message.modal");a.modal({onApprove:function(){$.post(page.space_user_url+"/msg/delete_user",{user:page.g_user_id,user_code:page.g_user_code,friend:t},function(e,t){1===e.code?($("body").toast({type:"success",content:"删除成功"}),n.fadeOut(function(){n.remove()}),location.reload()):$("body").toast({type:"error",content:"删除失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},bindClearAllBtn:function(){var t=$(".clear-all.modal"),n=$(".clear-all-confirm.modal");this._inboxWrap.on("click",".clear-all.button",function(e){t.modal({onApprove:function(){n.modal({onApprove:function(){$.post(page.space_user_url+"/msg/cleanup",{userId:page.g_user_id,type:$('input[name="msg_type"]').val()||0},function(e,t){1===e.code?($("body").toast({type:"success",content:"清空成功"}),location.reload()):$("body").toast({type:"error",content:"清空失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")}}).modal("show")})},bindMarkReadAll:function(){this._inboxWrap.on("click",".mark-read-all.button",function(e){$.post(page.space_user_url+"/msg/updateAllMsgRead",{userId:page.g_user_id},function(e){1===e.code?(window.pollingMsg&&window.pollingMsg.fetchMsgCount(),$(".messages-wrap").find(".private-message.un-read").removeClass("un-read"),$("body").toast({type:"success",content:"成功设置全部已读"})):$("body").toast({type:"error",content:"网络错误，请稍后再试"})})})},bindSendMessageBtn:function(){var a=$(".send-private-msg.modal"),o=a.find(".send-private-msg.form");this._inboxWrap.on("click",".messages-wrap a.reply",function(){var e=$(this).parents(".private-message:eq(0)"),t=e.data("user-id"),n=e.data("user-name");a.data("user-id",t),a.data("user-name",n),a.data("reply-mode",!0),a.modal("show")}),this._inboxWrap.on("click",".send-private-msg.button",function(){a.modal("show")}),o.form({inline:!0,fields:{receiver:{rules:[{type:"empty",prompt:"请输入对方昵称"}]},content:{rules:[{type:"empty",prompt:"请输入内容"},{type:"maxLength[250]",prompt:"内容长度不能超过 {ruleValue} 个字"}]}}}).api({url:page.space_user_url+"/msg/send",method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=e.data;return e.data={receiver:t.receiver,content:t.content},e},onSuccess:function(e,t,n){1===e.code?($(this).message({type:"positive",content:"发送成功"}),o.form("reset"),setTimeout(function(){a.modal("hide"),location.reload()},1e3)):$(this).message({type:"negative",content:e.message||"发送失败",disappear:2e3})},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}}),o.find(".select-user.dropdown").dropdown({templates:{menu:function(e,a){var t=e[a.values]||{},o="";return $.each(t,function(e,t){var n=t.avatar?'<img class="ui mini avatar image" src="'+t.avatar+'"/> ':"";o+='<div class="item" data-value="'+t[a.value]+'">',o+=n+t[a.name],o+="</div>"}),o}},fields:{remoteValues:"results",value:"id",name:"name"},filterRemoteData:!1,apiSettings:{url:page.space_user_url+"/admin/user_liaison_Info?q={query}",method:"get",dataType:"JSON",onResponse:function(e){var t=[];return 1===e.code&&Array.isArray(e.result)&&0<e.result.length&&(t=e.result),{results:t}}}}),a.modal({autofocus:!1,onShow:function(){var e,t;o.form("reset"),o.message("hideAll"),a.data("reply-mode")?(e=$(this).data("user-id")||"",t=$(this).data("user-name")||"",$(this).find("span.user-name").html(t),$(this).find("input[name=receiver]").val(e),$(this).find(".send-mode").hide(),$(this).find(".reply-mode").show()):($(this).find(".send-mode").show(),$(this).find(".reply-mode").hide())},onVisible:function(){a.data("reply-mode")&&$(this).find("textarea[name=content]").focus()},onHidden:function(){a.removeData("reply-mode")},onApprove:function(){return o.message("hideAll"),o.form("submit"),!1}}),a.on("keydown",function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&a.find(".positive.button").click()})},parseEmoticon:function(){$(function(){$("[data-emoji-render]").emoticon()})},bindUnreadMsgLink:function(){this._inboxWrap.on("click",".messages-wrap .private-message.un-read .content > .description a",function(){var t=$(this).parents(".private-message:eq(0)"),e=t.data("user-id");$.post(page.space_user_url+"/msg/readFriendMsg",{friend:e},function(e){1===e.code&&(window.pollingMsg&&window.pollingMsg.fetchMsgCount(),t.removeClass("un-read"))})})},register:function(){this.initPJAX(),this.bindDeleteBtn(),this.bindMarkReadAll(),this.bindSendMessageBtn(),this.bindUnreadMsgLink(),this.parseEmoticon()}},e});
OSCDefine("space-admin-msgs",function(){var e=function(){this._msgsWrap=$(".inbox-wrap")};return e.prototype={constructor:e,initPJAX:function(){var e=this,t=$(".inbox-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a",".inbox-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(){t.addClass("active")}),$(document).on("pjax:complete",function(){t.removeClass("active"),$("html, body").stop().animate({scrollTop:0},500,"swing"),e.parseEmoticon()})},bindDeleteBtn:function(){this._msgsWrap.on("click",".private-message a.delete",function(){var n=$(this).parents(".private-message:eq(0)"),e=n.data("id"),t=$(".delete-message.modal");t.modal({onApprove:function(){$.post(page.space_user_url+"/msg/delete",{msg:e},function(e,t){n.fadeOut(function(){n.remove()})}).fail(function(){})}}).modal("show")})},bindForwardBtn:function(){var e=this,a=$(".forward-msg.modal"),o=a.find(".forward-msg.form");e._msgsWrap.on("click",".private-message a.forward",function(){var e=$(this).parents(".private-message:eq(0)"),t=e.data("user-name")||"",n=e.find(".description").text()||"";a.modal({autofocus:!1,onShow:function(){o.form("reset"),o.message("hideAll"),$(this).find("textarea[name=content]").val("@"+t.trim()+" "+n.trim())},onApprove:function(){return o.message("hideAll"),o.form("submit"),!1}}),a.modal("show")}),o.form({inline:!0,fields:{receiver:{rules:[{type:"empty",prompt:"请输入对方昵称"}]},content:{rules:[{type:"empty",prompt:"请输入内容"},{type:"maxLength[250]",prompt:"内容长度不能超过 {ruleValue} 个字"}]}}}).api({url:page.space_user_url+"/msg/send",method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=e.data;return e.data={receiver:t.receiver,content:t.content},e},onSuccess:function(e,t,n){1===e.code?($(this).message({type:"positive",content:e.message||"发送成功"}),o.form("reset"),setTimeout(function(){a.modal("hide"),location.reload()},2e3)):$(this).message({type:"negative",content:e.message||"发送失败"})},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}}),o.find(".select-user.dropdown").dropdown({templates:{menu:function(e,a){var t=e[a.values]||{},o="";return $.each(t,function(e,t){var n=t.avatar?'<img class="ui mini avatar image" src="'+t.avatar+'"/> ':"";o+='<div class="item" data-value="'+t[a.value]+'">',o+=n+t[a.name],o+="</div>"}),o}},fields:{remoteValues:"results",value:"id",name:"name"},filterRemoteData:!1,apiSettings:{url:page.space_user_url+"/admin/user_liaison_Info?q={query}",method:"get",dataType:"JSON",onResponse:function(e){var t=[];return 1===e.code&&Array.isArray(e.result)&&0<e.result.length&&(t=e.result),{results:t}}}}),a.on("keydown",function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&a.find(".positive.button").click()})},initSendMessageForm:function(){var a=$(".reply-message");a.form({inline:!0,fields:{content:{rules:[{type:"empty",prompt:"请输入内容"},{type:"maxLength[250]",prompt:"内容长度不能超过 {ruleValue} 个字"}]}}}).api({url:page.space_user_url+"/msg/send",method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=e.data;return e.data={receiver:t.receiver,content:t.content},e},onSuccess:function(e,t,n){1===e.code?($(this).message({type:"positive",content:e.message||"发送成功"}),a.form("reset"),setTimeout(function(){location.reload()},500)):$(this).message({type:"negative",content:e.message||"发送失败"})},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}}),a.on("keydown",function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&a.find(".positive.button").click()})},parseEmoticon:function(){$(function(){$("[data-emoji-render]").emoticon()})},register:function(){this.initPJAX(),this.bindDeleteBtn(),this.bindForwardBtn(),this.initSendMessageForm(),this.parseEmoticon()}},e});
OSCDefine("space-admin-mail-settings",function(){return function(){var t=$(".mail-settings.form");t.find(".ui.checkbox").checkbox(),t.form({inline:!0,keyboardShortcuts:!1,fields:{notify_email:{rules:[{type:"empty",prompt:"请输入接收邮箱"},{type:"email",prompt:"请输入正确的邮箱"}]}}}).api({url:page.space_user_url+"/admin/change_notify_setting",method:"post",serializeForm:!0,beforeSend:function(e){return $(this).find(".error").removeClass("error").find(".prompt").remove(),$(this).message("hideAll"),e},onSuccess:function(e,t,i){1===e.code?$(this).message({type:"positive",content:e.message||"修改成功",disappear:2e3}):"notify_email"===e.result?$(this).form("add prompt",e.result,e.message):$(this).message({type:"negative",content:e.message||"修改失败",disappear:2e3})},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}}),t.find(".resend-email").on("click",function(e){e.preventDefault(),t.form("validate field","notify_email")&&$.post(page.space_user_url+"/favorites/reactivate_notify_email",{notify_email:t.find("input[name=notify_email]").val()},function(e){1===e.code?t.message({type:"positive",content:e.message||"发送成功",disappear:2e3}):"notify_email"===e.result?t.form("add prompt",e.result,e.message):t.message({type:"negative",content:e.message||"发送失败",disappear:2e3})})})}});
OSCDefine("space-admin-openid",function(){var t=function(){$(".bind-openid.dropdown").dropdown(),this._bindingTable=$(".binding.table")};return t.prototype={constructor:t,setStatus:function(t,n){var e=t.find(".status"),o=t.find(".control.button");0===n?(e.html('<div class="ui red empty circular label"></div> 已禁用'),e.removeClass("positive").addClass("negative"),o.removeClass("disable").addClass("enable"),o.html("启用")):1===n&&(e.html('<div class="ui green empty circular label"></div> 使用中'),e.removeClass("negative").addClass("positive"),o.removeClass("enable").addClass("disable"),o.html("禁用"))},bindEnableBtn:function(){var a=this;this._bindingTable.on("click",".enable.button",function(t){var e=$(this).parents("tr:eq(0)"),n=e.data("provider"),o=e.data("account"),i=$(".enable-binding.modal");i.find("span.provider").text(n),i.modal({onApprove:function(){$.post(page.space_user_url+"/openid/do_lock",{provider:n,account:o,status:0},function(t,n){1===t.code?a.setStatus(e,1):$("body").toast({type:"error",content:"启用失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},bindDisableBtn:function(){var a=this;this._bindingTable.on("click",".disable.button",function(t){var e=$(this).parents("tr:eq(0)"),n=e.data("provider"),o=e.data("account"),i=$(".disable-binding.modal");i.find("span.provider").text(n),i.modal({onApprove:function(){$.post(page.space_user_url+"/openid/do_lock",{provider:n,account:o,status:1},function(t,n){1===t.code?a.setStatus(e,0):$("body").toast({type:"error",content:"禁用失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},bindDeleteBtn:function(){var a=page.login_bindings_size;this._bindingTable.on("click",".delete.button",function(t){var e=$(this).parents("tr:eq(0)"),n=e.data("provider"),o=e.data("account"),i=$(".delete-binding.modal");i.find("span.provider").text(n),i.modal({onApprove:function(){$.post(page.space_user_url+"/openid/del_bind",{provider:n,account:o},function(t,n){1===t.code?(e.fadeOut(function(){e.remove()}),--a<=0&&$(".openid-wrap").append("<tr class='center aligned'><td colspan='6' style='height: 100px'>尚未绑定过其他登录帐号</td></tr>")):$("body").toast({type:"error",content:"删除失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},register:function(){this.bindEnableBtn(),this.bindDisableBtn(),this.bindDeleteBtn()}},t});
OSCDefine("space-admin-privacy",function(){return function(){var e=$(".privacy-settings.form");e.find(".ui.checkbox").checkbox(),e.form({}).api({url:page.space_user_url+"/admin/update_privacy_setting",method:"post",serializeForm:!0,beforeSend:function(e){$(this).find(".error").removeClass("error").find(".prompt").remove(),$(this).message("hideAll");var o=e.data;return e.data={user_code:o.user_code,"log.post":o.post,"log.code_comment":o.code_comment,"log.news_comment":o.news_comment,"log.blog_comment":o.blog_comment},e},onSuccess:function(e,o,t){1===e.code?$(this).message({type:"positive",content:e.message||"修改成功",disappear:2e3}):$(this).message({type:"negative",content:e.message||"修改失败",disappear:2e3})},onFailure:function(e,o){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}})}});
OSCDefine("space-admin-blacklist",function(){var e=function(){var e=this;e._container=$(".blacklist-container"),e._addWrap=e._container.find(".blacklist-add-wrap"),e._usernameSearchEl=e._addWrap.find(".user-name.dropdown"),e._usersContainer=e._container.find(".blacklist-users-container"),e._usersWrap=e._usersContainer.find(".users-wrapper")};return e.prototype={constructor:e,addInputUsernameAutoComplete:function(){this._usernameSearchEl.dropdown({fields:{remoteValues:"results",value:"value",name:"name"},filterRemoteData:!0,apiSettings:{url:page.space_user_url+"/user/query_user?name={query}",method:"post",dataType:"JSON",cache:!0,throttle:400,interruptRequests:!0,onResponse:function(e){var t=[];return 1===e.code&&Array.isArray(e.result)&&0<e.result.length&&(t=e.result.map(function(e){return{name:e.name,value:e.id}})),{results:t}}},onNoResults:function(e){return!!(null!=e&&0<e.trim().length)}})},bindAddUserAction:function(){var t=this;t._addWrap.on("click",".add-btn",function(){t._addBlockUser()}),t._addWrap.on("keydown",function(e){13===e.keyCode&&t._addBlockUser()})},_addBlockUser:function(){var t=this,e=t._addWrap.find('input[name="userId"]'),n=e.val();if(null==n||0===n.length)return $("body").toast({type:"error",content:"请输入要屏蔽的帐号"}),!1;$.post(page.space_user_url+"/user/update_blacklist",{blackId:n},function(e){1===e.code?(page.fetchUsersUrl&&$.get(page.fetchUsersUrl,function(e){t._usersWrap.html(e)}),t._usernameSearchEl.dropdown("clear")):$("body").toast({type:"error",content:e.message||"操作失败"})}).fail(function(){$("body").toast({type:"error",content:"网络异常，请稍后再试"})})},initListPJAX:function(){var e=$(".users-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a",".blacklist-users-container .users-wrapper",{scrollTo:!1}),$(document).on("pjax:send",function(){e.addClass("active")}),$(document).on("pjax:complete",function(){e.removeClass("active"),$("html, body").stop().animate({scrollTop:0},500,"swing")})},register:function(){this.initListPJAX(),this.addInputUsernameAutoComplete(),this.bindAddUserAction()}},e});
$(function(){0!==$(".avatar-wrap").length&&new window.common.dynamicLoader(["/new-osc/js/utils/plugins/osc-crop-image.js"],function(){var n,o,i,t,e,a=$(".avatar-wrap");0!==a.find(".upload-btn-wrap").length&&(a.find(".avatar-container").dimmer({on:"hover"}),n=$(".upload-avatar.modal"),o=n.find(".upload-message"),i=null,t=!1,e=page.space_user_url+"/user/save_portrait_new",n.modal({onShow:function(){var a=$(this).attr("data-avatar-url")||"";t||(i=new OSCCropImage({containerSelector:".osc-crop-image-panel",initUrl:a,uploadInputSelector:".upload-file-input",submitCallback:function(a){if(a){o.show();var t={img:a,user_code:page.g_user_code||""};$.ajax({url:e,method:"post",dataType:"json",data:t,success:function(a){var t,e,r;1===a.code?(o.html("头像上传成功"),a.result&&(t=(new Date).getTime(),e=$(".current-user-avatar"),r=a.result+"?t="+t,e.find(".text-portrait")?e.html('<img src="'+r+'"/>'):e.find("img").attr("src",r),setTimeout(function(){i.setInitPicUrl(r),i.showEmptyTips(),i.setInitPic(),o.hide(),n.modal("hide")},1e3))):o.html(a.message||"头像上传失败")},error:function(){o.html("网络错误，请稍后再试")}})}}}),t=!0)}}),$(document).on("click",".upload-avatar-btn",function(){var a=$(this).parents(".avatar-wrap:eq(0)"),t=a.find("img");n.attr("data-avatar-url",t.attr("src")||""),n.modal("show")}))}).loadFiles()});
!function(se,e,C,M){"use strict";e=void 0!==e&&e.Math==Math?e:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),se.fn.calendar=function(h){var g,e=se(this),m=(e.selector,(new Date).getTime()),y=[],D=h,v="string"==typeof D,b=[].slice.call(arguments,1);return e.each(function(){var c,oe,re=se.isPlainObject(h)?se.extend(!0,{},se.fn.calendar.settings,h):se.extend({},se.fn.calendar.settings),ie=re.className,e=re.namespace,t=re.selector,le=re.formatter,a=re.parser,de=re.metadata,l=re.error,n="."+e,o="module-"+e,r=se(this),i=r.find(t.input),ue=r.find(t.popup),d=r.find(t.activator),u=this,s=r.data(o),f=!1,p=!1;oe={initialize:function(){oe.debug("Initializing calendar for",u),c=oe.get.isTouch(),oe.setup.popup(),oe.setup.inline(),oe.setup.input(),oe.setup.date(),oe.create.calendar(),oe.bind.events(),oe.instantiate()},instantiate:function(){oe.verbose("Storing instance of calendar"),s=oe,r.data(o,s)},destroy:function(){oe.verbose("Destroying previous calendar for",u),r.removeData(o),oe.unbind.events()},setup:{popup:function(){var e,t,a,n,o;if(!re.inline&&(d.length||(d=r.children().first()).length)){if(se.fn.popup===M)return void oe.error(l.popup);ue.length||(ue=se("<div/>").addClass(ie.popup).prependTo(d.parent())),ue.addClass(ie.calendar),e=re.onVisible,t=re.onHidden,i.length||(ue.attr("tabindex","0"),e=function(){return oe.focus(),re.onVisible.apply(ue,arguments)},t=function(){return oe.blur(),re.onHidden.apply(ue,arguments)}),a=function(){return oe.set.focusDate(oe.get.date()),oe.set.mode(re.startMode),re.onShow.apply(ue,arguments)},n=re.on||(i.length?"focus":"click"),o=se.extend({},re.popupOptions,{popup:ue,on:n,hoverable:"hover"===n,onShow:a,onVisible:e,onHide:re.onHide,onHidden:t}),oe.popup(o)}},inline:function(){d.length&&!re.inline||(ue=se("<div/>").addClass(ie.calendar).appendTo(r),i.length||ue.attr("tabindex","0"))},input:function(){re.touchReadonly&&i.length&&c&&i.prop("readonly",!0)},date:function(){if(i.length){var e=i.val(),t=a.date(e,re);oe.set.date(t,re.formatInput,!1)}}},create:{calendar:function(){var e,t,a,n,o,r,i,l,d,u,s,p,c,f,h,g,m,y,D,v,b,C,M,w,x,k,T,F,H,O,I,N,Y,R,E,j,A,S,V,P,q,K,J,W,z,L,B,U,Q,Z,G,X,$,_=oe.get.mode(),ee=new Date,te=oe.get.date(),ae=oe.get.focusDate(),ne=ae||te||re.initialDate||ee;for(ne=oe.helper.dateInRange(ne),ae||(ae=ne,oe.set.focusDate(ae,!1,!1)),l="year"===_,d="month"===_,u="day"===_,s="hour"===_,p="minute"===_,c="time"===re.type,f=Math.max(re.multiMonth,1),h=u?oe.get.monthOffset():0,g=ne.getMinutes(),m=ne.getHours(),y=ne.getDate(),D=ne.getMonth()+h,v=ne.getFullYear(),C=7===(b=u?7:s?4:3)?"seven":4===b?"four":"three",M=u||s?6:4,w=u?f:1,(x=ue).empty(),1<w&&(i=se("<div/>").addClass(ie.grid).appendTo(x)),n=0;n<w;n++){if(1<w&&(x=se("<div/>").addClass(ie.column).appendTo(i)),k=D+n,T=(new Date(v,k,1).getDay()-re.firstDayOfWeek%7+7)%7,!re.constantHeight&&u&&(F=new Date(v,k+1,0).getDate()+T,M=Math.ceil(F/7)),H=l?10:d?1:0,O=u?1:0,I=s||p?1:0,N=s||p?y:1,Y=new Date(v-H,k-O,N-I,m),R=new Date(v+H,k+O,N+I,m),E=l?new Date(10*Math.ceil(v/10)-9,0,0):d?new Date(v,0,0):u?new Date(v,k,0):new Date(v,k,y,-1),j=l?new Date(10*Math.ceil(v/10)+1,0,1):d?new Date(v+1,0,1):u?new Date(v,k+1,1):new Date(v,k,y+1),A=se("<table/>").addClass(ie.table).addClass(C+" column").addClass(_).appendTo(x),!c&&(S=se("<thead/>").appendTo(A),o=se("<tr/>").appendTo(S),r=se("<th/>").attr("colspan",""+b).appendTo(o),V=l||d?new Date(v,0,1):u?new Date(v,k,1):new Date(v,k,y,m,g),(P=se("<span/>").addClass(ie.link).appendTo(r)).text(le.header(V,_,re)),q=d?re.disableYear?"day":"year":u?re.disableMonth?"year":"month":"day",P.data(de.mode,q),0===n&&((K=se("<span/>").addClass(ie.prev).appendTo(r)).data(de.focusDate,Y),K.toggleClass(ie.disabledCell,!oe.helper.isDateInRange(E,_)),se("<i/>").addClass(ie.prevIcon).appendTo(K)),n===w-1&&((J=se("<span/>").addClass(ie.next).appendTo(r)).data(de.focusDate,R),J.toggleClass(ie.disabledCell,!oe.helper.isDateInRange(j,_)),se("<i/>").addClass(ie.nextIcon).appendTo(J)),u))for(o=se("<tr/>").appendTo(S),e=0;e<b;e++)(r=se("<th/>").appendTo(o)).text(le.dayColumnHeader((e+re.firstDayOfWeek)%7,re));for(W=se("<tbody/>").appendTo(A),e=l?10*Math.ceil(v/10)-9:u?1-T:0,t=0;t<M;t++)for(o=se("<tr/>").appendTo(W),a=0;a<b;a++,e++)z=l?new Date(e,k,1,m,g):d?new Date(v,e,1,m,g):u?new Date(v,k,e,m,g):s?new Date(v,k,y,e):new Date(v,k,y,m,5*e),L=l?e:d?re.text.monthsShort[e]:u?z.getDate():le.time(z,re,!0),(r=se("<td/>").addClass(ie.cell).appendTo(o)).text(L),r.data(de.date,z),U=(B=u&&z.getMonth()!==(k+12)%12)||!oe.helper.isDateInRange(z,_)||re.isDisabled(z,_),Q=oe.helper.dateEqual(z,te,_),Z=oe.helper.dateEqual(z,ee,_),r.toggleClass(ie.adjacentCell,B),r.toggleClass(ie.disabledCell,U),r.toggleClass(ie.activeCell,Q&&!B),s||p||r.toggleClass(ie.todayCell,!B&&Z),G={mode:_,adjacent:B,disabled:U,active:Q,today:Z},le.cell(r,z,G),oe.helper.dateEqual(z,ae,_)&&oe.set.focusDate(z,!1,!1);re.today&&(X=se("<tr/>").appendTo(W),($=se("<td/>").attr("colspan",""+b).addClass(ie.today).appendTo(X)).text(le.today(re)),$.data(de.date,ee)),oe.update.focus(!1,A)}}},update:{focus:function(e,t){t=t||ue;var l=oe.get.mode(),a=oe.get.date(),d=oe.get.focusDate(),u=oe.get.startDate(),s=oe.get.endDate(),p=(e?d:null)||a||(c?null:d);t.find("td").each(function(){var e,t,a,n,o,r=se(this),i=r.data(de.date);i&&(e=r.hasClass(ie.disabledCell),t=r.hasClass(ie.activeCell),a=r.hasClass(ie.adjacentCell),n=oe.helper.dateEqual(i,d,l),o=!!p&&(!!u&&oe.helper.isDateInRange(i,l,u,p)||!!s&&oe.helper.isDateInRange(i,l,p,s)),r.toggleClass(ie.focusCell,n&&(!c||f)&&!a),r.toggleClass(ie.rangeCell,o&&!t&&!e))})}},refresh:function(){oe.create.calendar()},bind:{events:function(){ue.on("mousedown"+n,oe.event.mousedown),ue.on("touchstart"+n,oe.event.mousedown),ue.on("mouseup"+n,oe.event.mouseup),ue.on("touchend"+n,oe.event.mouseup),ue.on("mouseover"+n,oe.event.mouseover),i.length?(i.on("input"+n,oe.event.inputChange),i.on("focus"+n,oe.event.inputFocus),i.on("blur"+n,oe.event.inputBlur),i.on("click"+n,oe.event.inputClick),i.on("keydown"+n,oe.event.keydown)):ue.on("keydown"+n,oe.event.keydown)}},unbind:{events:function(){ue.off(n),i.length&&i.off(n)}},event:{mouseover:function(e){var t=se(e.target).data(de.date),a=1===e.buttons;t&&oe.set.focusDate(t,!1,!0,a)},mousedown:function(e){i.length&&e.preventDefault(),f=0<=e.type.indexOf("touch");var t=se(e.target).data(de.date);t&&oe.set.focusDate(t,!1,!0,!0)},mouseup:function(e){var t,a,n,o,r,i;oe.focus(),e.preventDefault(),e.stopPropagation(),f=!1,((a=(t=se(e.target)).parent()).data(de.date)||a.data(de.focusDate)||a.data(de.mode))&&(t=a),n=t.data(de.date),o=t.data(de.focusDate),r=t.data(de.mode),n?(i=t.hasClass(ie.today),oe.selectDate(n,i)):o?oe.set.focusDate(o):r&&oe.set.mode(r)},keydown:function(e){var t,a,n,o,r,i,l,d,u,s,p;27!==e.keyCode&&9!==e.keyCode||oe.popup("hide"),oe.popup("is visible")&&(37===e.keyCode||38===e.keyCode||39===e.keyCode||40===e.keyCode?(a="day"===(t=oe.get.mode())?7:"hour"===t?4:3,n=37===e.keyCode?-1:38===e.keyCode?-a:39==e.keyCode?1:a,n*="minute"===t?5:1,r=(o=oe.get.focusDate()||oe.get.date()||new Date).getFullYear()+("year"===t?n:0),i=o.getMonth()+("month"===t?n:0),l=o.getDate()+("day"===t?n:0),d=o.getHours()+("hour"===t?n:0),u=o.getMinutes()+("minute"===t?n:0),s=new Date(r,i,l,d,u),"time"===re.type&&(s=oe.helper.mergeDateTime(o,s)),oe.helper.isDateInRange(s,t)&&oe.set.focusDate(s)):13===e.keyCode&&(t=oe.get.mode(),(p=oe.get.focusDate())&&!re.isDisabled(p,t)&&oe.selectDate(p),e.preventDefault(),e.stopPropagation())),38!==e.keyCode&&40!==e.keyCode||(e.preventDefault(),oe.popup("show"))},inputChange:function(){var e=i.val(),t=a.date(e,re);oe.set.date(t,!1)},inputFocus:function(){ue.addClass(ie.active)},inputBlur:function(){if(ue.removeClass(ie.active),re.formatInput){var e=oe.get.date(),t=le.datetime(e,re);i.val(t)}},inputClick:function(){oe.popup("show")}},get:{date:function(){return r.data(de.date)||null},focusDate:function(){return r.data(de.focusDate)||null},startDate:function(){var e=oe.get.calendarModule(re.startCalendar);return(e?e.get.date():r.data(de.startDate))||null},endDate:function(){var e=oe.get.calendarModule(re.endCalendar);return(e?e.get.date():r.data(de.endDate))||null},monthOffset:function(){return r.data(de.monthOffset)||0},mode:function(){var e=r.data(de.mode)||re.startMode,t=oe.get.validModes();return 0<=se.inArray(e,t)?e:"time"===re.type?"hour":"month"===re.type?"month":"year"===re.type?"year":"day"},validModes:function(){var e=[];return"time"!==re.type&&(re.disableYear&&"year"!==re.type||e.push("year"),(!re.disableMonth&&"year"!==re.type||"month"===re.type)&&e.push("month"),0<=re.type.indexOf("date")&&e.push("day")),0<=re.type.indexOf("time")&&(e.push("hour"),re.disableMinute||e.push("minute")),e},isTouch:function(){try{return C.createEvent("TouchEvent"),!0}catch(e){return!1}},calendarModule:function(e){return e?(e instanceof se||(e=r.parent().children(e).first()),e.data(o)):null}},set:{date:function(e,t,a){var n,o,r;return t=!1!==t,a=!1!==a,e=oe.helper.sanitiseDate(e),e=oe.helper.dateInRange(e),n=oe.get.mode(),o=le.datetime(e,re),(!a||!1!==re.onChange.call(u,e,o,n))&&(oe.set.focusDate(e),!re.isDisabled(e,n)&&((r=oe.get.endDate())&&e&&r<e&&oe.set.endDate(M),oe.set.dataKeyValue(de.date,e),void(t&&i.length&&i.val(o))))},startDate:function(e,t){e=oe.helper.sanitiseDate(e);var a=oe.get.calendarModule(re.startCalendar);a&&a.set.date(e),oe.set.dataKeyValue(de.startDate,e,t)},endDate:function(e,t){e=oe.helper.sanitiseDate(e);var a=oe.get.calendarModule(re.endCalendar);a&&a.set.date(e),oe.set.dataKeyValue(de.endDate,e,t)},focusDate:function(e,t,a,n){var o,r,i,l,d;e=oe.helper.sanitiseDate(e),e=oe.helper.dateInRange(e),o="day"===oe.get.mode(),r=oe.get.focusDate(),o&&e&&r&&(i=12*(e.getFullYear()-r.getFullYear())+e.getMonth()-r.getMonth())&&(l=oe.get.monthOffset()-i,oe.set.monthOffset(l,!1)),d=oe.set.dataKeyValue(de.focusDate,e,t),a=!1!==a&&d&&!1===t||p!=n,p=n,a&&oe.update.focus(n)},monthOffset:function(e,t){var a=Math.max(re.multiMonth,1);e=Math.max(1-a,Math.min(0,e)),oe.set.dataKeyValue(de.monthOffset,e,t)},mode:function(e,t){oe.set.dataKeyValue(de.mode,e,t)},dataKeyValue:function(e,t,a){var n=r.data(e),o=n===t||n<=t&&t<=n;return t?r.data(e,t):r.removeData(e),(a=!1!==a&&!o)&&oe.create.calendar(),!o}},selectDate:function(e,t){var a,n,o=oe.get.mode(),r=t||"minute"===o||re.disableMinute&&"hour"===o||"date"===re.type&&"day"===o||"month"===re.type&&"month"===o||"year"===re.type&&"year"===o;r?!(!1===oe.set.date(e))&&re.closable&&(oe.popup("hide"),(a=oe.get.calendarModule(re.endCalendar))&&(a.popup("show"),a.focus())):(n="year"===o?re.disableMonth?"day":"month":"month"===o?"day":"day"===o?"hour":"minute",oe.set.mode(n),"hour"===o||"day"===o&&oe.get.date()?oe.set.date(e):oe.set.focusDate(e))},changeDate:function(e){oe.set.date(e)},clear:function(){oe.set.date(M)},popup:function(){return d.popup.apply(d,arguments)},focus:function(){i.length?i.focus():ue.focus()},blur:function(){i.length?i.blur():ue.blur()},helper:{sanitiseDate:function(e){return e?(e instanceof Date||(e=a.date(""+e,re)),isNaN(e.getTime())?M:e):M},dateDiff:function(e,t,a){a=a||"day";var n="time"===re.type,o="year"===a,r=o||"month"===a,i="minute"===a,l=i||"hour"===a;return e=new Date(n?2e3:e.getFullYear(),n?0:o?0:e.getMonth(),n?1:r?1:e.getDate(),l?e.getHours():0,i?5*Math.floor(e.getMinutes()/5):0),(t=new Date(n?2e3:t.getFullYear(),n?0:o?0:t.getMonth(),n?1:r?1:t.getDate(),l?t.getHours():0,i?5*Math.floor(t.getMinutes()/5):0)).getTime()-e.getTime()},dateEqual:function(e,t,a){return!!e&&!!t&&0===oe.helper.dateDiff(e,t,a)},isDateInRange:function(e,t,a,n){if(!a&&!n){var o=oe.get.startDate();a=o&&re.minDate?new Date(Math.max(o,re.minDate)):o||re.minDate,n=re.maxDate}return a=a&&new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),5*Math.ceil(a.getMinutes()/5)),!(!e||a&&0<oe.helper.dateDiff(e,a,t)||n&&0<oe.helper.dateDiff(n,e,t))},dateInRange:function(e,t,a){var n,o;return t||a||(t=(n=oe.get.startDate())&&re.minDate?new Date(Math.max(n,re.minDate)):n||re.minDate,a=re.maxDate),t=t&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),5*Math.ceil(t.getMinutes()/5)),o="time"===re.type,e?t&&0<oe.helper.dateDiff(e,t,"minute")?o?oe.helper.mergeDateTime(e,t):t:a&&0<oe.helper.dateDiff(a,e,"minute")?o?oe.helper.mergeDateTime(e,a):a:e:e},mergeDateTime:function(e,t){return e&&t?new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes()):t}},setting:function(e,t){if(oe.debug("Changing setting",e,t),se.isPlainObject(e))se.extend(!0,re,e);else{if(t===M)return re[e];se.isPlainObject(re[e])?se.extend(!0,re[e],t):re[e]=t}},internal:function(e,t){return oe.debug("Changing internal",e,t),t===M?oe[e]:void(se.isPlainObject(e)?se.extend(!0,oe,e):oe[e]=t)},debug:function(){!re.silent&&re.debug&&(re.performance?oe.performance.log(arguments):(oe.debug=Function.prototype.bind.call(console.info,console,re.name+":"),oe.debug.apply(console,arguments)))},verbose:function(){!re.silent&&re.verbose&&re.debug&&(re.performance?oe.performance.log(arguments):(oe.verbose=Function.prototype.bind.call(console.info,console,re.name+":"),oe.verbose.apply(console,arguments)))},error:function(){re.silent||(oe.error=Function.prototype.bind.call(console.error,console,re.name+":"),oe.error.apply(console,arguments))},performance:{log:function(e){var t,a;re.performance&&(a=(t=(new Date).getTime())-(m||t),m=t,y.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:u,"Execution Time":a})),clearTimeout(oe.performance.timer),oe.performance.timer=setTimeout(oe.performance.display,500)},display:function(){re.name;var a=0;m=!1,clearTimeout(oe.performance.timer),se.each(y,function(e,t){a+=t["Execution Time"]}),(console.group!==M||console.table!==M)&&0<y.length&&(console.table||se.each(y,function(e,t){})),y=[]}},invoke:function(n,e,t){var o,r,a,i=s;return e=e||b,t=u||t,"string"==typeof n&&i!==M&&(n=n.split(/[\. ]/),o=n.length-1,se.each(n,function(e,t){var a=e!=o?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(se.isPlainObject(i[a])&&e!=o)i=i[a];else{if(i[a]!==M)return r=i[a],!1;if(!se.isPlainObject(i[t])||e==o)return i[t]!==M?r=i[t]:oe.error(l.method,n),!1;i=i[t]}})),se.isFunction(r)?a=r.apply(t,e):r!==M&&(a=r),se.isArray(g)?g.push(a):g!==M?g=[g,a]:a!==M&&(g=a),r}},v?(s===M&&oe.initialize(),oe.invoke(D)):(s!==M&&s.invoke("destroy"),oe.initialize())}),g!==M?g:this},se.fn.calendar.settings={name:"Calendar",namespace:"calendar",silent:!1,debug:!1,verbose:!1,performance:!1,type:"datetime",firstDayOfWeek:0,constantHeight:!0,today:!1,closable:!0,monthFirst:!0,touchReadonly:!0,inline:!1,on:null,initialDate:null,startMode:!1,minDate:null,maxDate:null,ampm:!0,disableYear:!1,disableMonth:!1,disableMinute:!1,formatInput:!0,startCalendar:null,endCalendar:null,multiMonth:1,popupOptions:{position:"bottom left",lastResort:"bottom left",prefer:"opposite",hideOnScroll:!1},text:{days:["S","M","T","W","T","F","S"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",now:"Now",am:"AM",pm:"PM"},formatter:{header:function(e,t,a){return"year"===t?a.formatter.yearHeader(e,a):"month"===t?a.formatter.monthHeader(e,a):"day"===t?a.formatter.dayHeader(e,a):"hour"===t?a.formatter.hourHeader(e,a):a.formatter.minuteHeader(e,a)},yearHeader:function(e,t){var a=10*Math.ceil(e.getFullYear()/10);return a-9+" - "+(a+2)},monthHeader:function(e,t){return e.getFullYear()},dayHeader:function(e,t){return t.text.months[e.getMonth()]+" "+e.getFullYear()},hourHeader:function(e,t){return t.formatter.date(e,t)},minuteHeader:function(e,t){return t.formatter.date(e,t)},dayColumnHeader:function(e,t){return t.text.days[e]},datetime:function(e,t){if(!e)return"";var a="time"===t.type?"":t.formatter.date(e,t),n=t.type.indexOf("time")<0?"":t.formatter.time(e,t,!1);return a+("datetime"===t.type?" ":"")+n},date:function(e,t){if(!e)return"";var a=e.getDate(),n=t.text.months[e.getMonth()],o=e.getFullYear();return"year"===t.type?o:"month"===t.type?n+" "+o:(t.monthFirst?n+" "+a:a+" "+n)+", "+o},time:function(e,t,a){if(!e)return"";var n=e.getHours(),o=e.getMinutes(),r="";return t.ampm&&(r=" "+(n<12?t.text.am:t.text.pm),n=0===n?12:12<n?n-12:n),n+":"+(o<10?"0":"")+o+r},today:function(e){return"date"===e.type?e.text.today:e.text.now},cell:function(e,t,a){}},parser:{date:function(e,t){var a,n,o,r,i,l,d,u,s,p,c,f,h,g,m,y,D,v;if(!e)return null;if(0===(e=(""+e).trim().toLowerCase()).length)return null;if(u=d=l=i=r=-1,s=M,p="time"===t.type,c=t.type.indexOf("time")<0,f=e.split(t.regExp.dateWords),h=e.split(t.regExp.dateNumbers),!c)for(s=0<=se.inArray(t.text.am.toLowerCase(),f)||!(0<=se.inArray(t.text.pm.toLowerCase(),f))&&M,a=0;a<h.length;a++)if(0<=(g=h[a]).indexOf(":")){if(i<0||r<0)for(m=g.split(":"),o=0;o<Math.min(2,m.length);o++)n=parseInt(m[o]),isNaN(n)&&(n=0),0===o?i=n%24:r=n%60;h.splice(a,1)}if(!p){for(a=0;a<f.length;a++)if(!((y=f[a]).length<=0)){for(y=y.substring(0,Math.min(y.length,3)),n=0;n<t.text.months.length;n++)if((D=(D=t.text.months[n]).substring(0,Math.min(y.length,Math.min(D.length,3))).toLowerCase())===y){d=n+1;break}if(0<=d)break}for(a=0;a<h.length;a++)if(n=parseInt(h[a]),!isNaN(n)&&59<n){u=n,h.splice(a,1);break}if(d<0)for(a=0;a<h.length;a++)if(o=1<a||t.monthFirst?a:1===a?0:1,n=parseInt(h[o]),!isNaN(n)&&1<=n&&n<=12){d=n,h.splice(o,1);break}for(a=0;a<h.length;a++)if(n=parseInt(h[a]),!isNaN(n)&&1<=n&&n<=31){l=n,h.splice(a,1);break}if(u<0)for(a=h.length-1;0<=a;a--)if(n=parseInt(h[a]),!isNaN(n)){n<99&&(n+=2e3),u=n,h.splice(a,1);break}}if(!c){if(i<0)for(a=0;a<h.length;a++)if(n=parseInt(h[a]),!isNaN(n)&&0<=n&&n<=23){i=n,h.splice(a,1);break}if(r<0)for(a=0;a<h.length;a++)if(n=parseInt(h[a]),!isNaN(n)&&0<=n&&n<=59){r=n,h.splice(a,1);break}}return r<0&&i<0&&l<0&&d<0&&u<0?null:(r<0&&(r=0),i<0&&(i=0),l<0&&(l=1),d<0&&(d=1),u<0&&(u=(new Date).getFullYear()),s!==M&&(s?12===i&&(i=0):i<12&&(i+=12)),(v=new Date(u,d-1,l,i,r)).getMonth()===d-1&&v.getFullYear()===u||(v=new Date(u,d,0,i,r)),isNaN(v.getTime())?null:v)}},onChange:function(e,t,a){return!0},onShow:function(){},onVisible:function(){},onHide:function(){},onHidden:function(){},isDisabled:function(e,t){return!1},selector:{popup:".ui.popup",input:"input",activator:"input"},regExp:{dateWords:/[^A-Za-z\u00C0-\u024F]+/g,dateNumbers:/[^\d:]+/g},error:{popup:"UI Popup, a required component is not included in this page",method:"The method you called is not defined."},className:{calendar:"calendar",active:"active",popup:"ui popup",grid:"ui equal width grid",column:"column",table:"ui celled center aligned unstackable table",prev:"prev link",next:"next link",prevIcon:"chevron left icon",nextIcon:"chevron right icon",link:"link",cell:"link",disabledCell:"disabled",adjacentCell:"adjacent",activeCell:"active",rangeCell:"range",focusCell:"focus",todayCell:"today",today:"today link"},metadata:{date:"date",focusDate:"focusDate",startDate:"startDate",endDate:"endDate",mode:"mode",monthOffset:"monthOffset"}}}(jQuery,window,document);
OSCDefine("space-admin-profile",function(){var e=function(){function n(e){var t,n,i=window.location.search.substring(1),o=i.split("&");for(t=0;t<o.length;t++)if((n=o[t].split("="))[0]===e)return n[1];return""}var i=$(".space-tab.menu"),o=i.find(".item.active").data("tab");i.find(".item").tab({onLoad:function(e){var t;o!==e&&(t=e,n("tab")!==t&&history.pushState(null,"","?tab="+t),o=e)}}),window.addEventListener("popstate",function(e){var t=n("tab");null!=t&&i.find(".item").tab("change tab",t)})};return e.prototype={constructor:e,initBaseInfoForm:function(){function o(e,t){var n,i=r[e];if(i)for(n=t.options.length=0;n<i.length;n++)t.options[n]=new Option(i[n],i[n])}var r,a=$(".base-info.form");a.find(".ui.checkbox").checkbox(),a.find(".birthday").calendar({type:"date",text:{days:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今天",now:"现在",am:"上午",pm:"下午"},formatter:{date:function(e,t){var n;return e?(n=function(e){return 9<parseInt(e)?e+"":"0"+e})(e.getFullYear())+"-"+n(e.getMonth()+1)+"-"+n(e.getDate()):""}}}),r={"北京":["东城","西城","朝阳","丰台","石景山","海淀","门头沟","房山","通州","顺义","昌平","大兴","平谷","怀柔","密云","延庆"],"上海":["崇明","黄浦","卢湾","徐汇","长宁","静安","普陀","闸北","虹口","杨浦","闵行","宝山","嘉定","浦东","金山","松江","青浦","南汇","奉贤"],"广东":["广州","深圳","珠海","东莞","中山","佛山","惠州","河源","潮州","江门","揭阳","茂名","梅州","清远","汕头","汕尾","韶关","顺德","阳江","云浮","湛江","肇庆"],"江苏":["南京","常熟","常州","海门","淮安","江都","江阴","昆山","连云港","南通","启东","沭阳","宿迁","苏州","太仓","泰州","同里","无锡","徐州","盐城","扬州","宜兴","仪征","张家港","镇江","周庄"],"重庆":["万州","涪陵","渝中","大渡口","江北","沙坪坝","九龙坡","南岸","北碚","万盛","双挢","渝北","巴南","黔江","长寿","綦江","潼南","铜梁","大足","荣昌","壁山","梁平","城口","丰都","垫江","武隆","忠县","开县","云阳","奉节","巫山","巫溪","石柱","秀山","酉阳","彭水","江津","合川","永川","南川"],"安徽":["合肥","安庆","蚌埠","亳州","巢湖","滁州","阜阳","贵池","淮北","淮化","淮南","黄山","九华山","六安","马鞍山","宿州","铜陵","屯溪","芜湖","宣城"],"福建":["福州","厦门","泉州","漳州","龙岩","南平","宁德","莆田","三明"],"甘肃":["兰州","白银","定西","敦煌","甘南","金昌","酒泉","临夏","平凉","天水","武都","武威","西峰","张掖"],"广西":["南宁","百色","北海","桂林","防城港","贵港","河池","贺州","柳州","钦州","梧州","玉林"],"贵州":["贵阳","安顺","毕节","都匀","凯里","六盘水","铜仁","兴义","玉屏","遵义"],"海南":["海口","儋县","陵水","琼海","三亚","通什","万宁"],"河北":["石家庄","保定","北戴河","沧州","承德","丰润","邯郸","衡水","廊坊","南戴河","秦皇岛","唐山","新城","邢台","张家口"],"黑龙江":["哈尔滨","北安","大庆","大兴安岭","鹤岗","黑河","佳木斯","鸡西","牡丹江","齐齐哈尔","七台河","双鸭山","绥化","伊春"],"河南":["郑州","安阳","鹤壁","潢川","焦作","济源","开封","漯河","洛阳","南阳","平顶山","濮阳","三门峡","商丘","新乡","信阳","许昌","周口","驻马店"],"香港":["香港","九龙","新界"],"湖北":["武汉","恩施","鄂州","黄冈","黄石","荆门","荆州","潜江","十堰","随州","武穴","仙桃","咸宁","襄阳","襄樊","孝感","宜昌"],"湖南":["长沙","常德","郴州","衡阳","怀化","吉首","娄底","邵阳","湘潭","益阳","岳阳","永州","张家界","株洲"],"江西":["南昌","抚州","赣州","吉安","景德镇","井冈山","九江","庐山","萍乡","上饶","新余","宜春","鹰潭"],"吉林":["长春","吉林","白城","白山","珲春","辽源","梅河","四平","松原","通化","延吉"],"辽宁":["沈阳","鞍山","本溪","朝阳","大连","丹东","抚顺","阜新","葫芦岛","锦州","辽阳","盘锦","铁岭","营口"],"澳门":["澳门"],"内蒙古":["呼和浩特","阿拉善盟","包头","赤峰","东胜","海拉尔","集宁","临河","通辽","乌海","乌兰浩特","锡林浩特"],"宁夏":["银川","固源","石嘴山","吴忠"],"青海":["西宁","德令哈","格尔木","共和","海东","海晏","玛沁","同仁","玉树"],"山东":["济南","滨州","兖州","德州","东营","菏泽","济宁","莱芜","聊城","临沂","蓬莱","青岛","曲阜","日照","泰安","潍坊","威海","烟台","枣庄","淄博"],"山西":["太原","长治","大同","候马","晋城","离石","临汾","宁武","朔州","忻州","阳泉","榆次","运城"],"陕西":["西安","安康","宝鸡","汉中","渭南","商州","绥德","铜川","咸阳","延安","榆林"],"四川":["成都","巴中","达川","德阳","都江堰","峨眉山","涪陵","广安","广元","九寨沟","康定","乐山","泸州","马尔康","绵阳","眉山","南充","内江","攀枝花","遂宁","汶川","西昌","雅安","宜宾","自贡","资阳"],"台湾":["台北","基隆","台南","台中","高雄","屏东","南投","云林","新竹","彰化","苗栗","嘉义","花莲","桃园","宜兰","台东","金门","马祖","澎湖"],"天津":["天津","和平","东丽","河东","西青","河西","津南","南开","北辰","河北","武清","红挢","塘沽","汉沽","大港","宁河","静海","宝坻","蓟县"],"新疆":["乌鲁木齐","阿克苏","阿勒泰","阿图什","博乐","昌吉","东山","哈密","和田","喀什","克拉玛依","库车","库尔勒","奎屯","石河子","塔城","吐鲁番","伊宁"],"西藏":["拉萨","阿里","昌都","林芝","那曲","日喀则","山南"],"云南":["昆明","大理","保山","楚雄","大理","东川","个旧","景洪","开远","临沧","丽江","六库","潞西","曲靖","思茅","文山","西双版纳","玉溪","中甸","昭通"],"浙江":["杭州","安吉","慈溪","定海","奉化","海盐","黄岩","湖州","嘉兴","金华","临安","临海","丽水","宁波","瓯海","平湖","千岛湖","衢州","江山","瑞安","绍兴","嵊州","台州","温岭","温州","余姚","舟山"],"海外":["美国","日本","英国","法国","德国","其它"]},$(function(){var e=a.find("select[name=province]"),t=a.find("select[name=city]"),n=page.province||"",i=page.city||"";o(n,t.get(0)),e.dropdown({onChange:function(e){o(e,t.get(0))}}),t.dropdown(),e.dropdown("set selected",n),t.dropdown("set selected",i)}),$.fn.form.settings.rules.birthday=function(e){return""===e.trim()||/^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$/.test(e)},a.form({inline:!0,fields:{name:{rules:[{type:"empty",prompt:"请输入昵称"},{type:"minLength[2]",prompt:"昵称长度不能少于 {ruleValue} 个字符"},{type:"maxLength[20]",prompt:"昵称长度不能超过 {ruleValue} 个字符"}]},birthday:{rules:[{type:"birthday",prompt:"请输入正确的出生日期"}]},province:{rules:[{type:"empty",prompt:"请选择省份"}]},city:{rules:[{type:"empty",prompt:"请选择地区"}]},signature:{rules:[{type:"maxLength[100]",prompt:"个性签名长度不能超过 {ruleValue} 个字符"}]}}}).api({url:page.space_user_url+"/admin/update_basic_info",method:"post",serializeForm:!0,beforeSend:function(e){var t,n;return $(this).find(".error").removeClass("error").find(".prompt").remove(),$(this).message("hideAll"),t=e.data,e.data={user_code:t.user_code,name:t.name,province:t.province,city:t.city,signature:t.signature,weekly_report:t.weekly_report,notify:t.notify},t.birthday&&(n=t.birthday.split("-"),e.data.y=n[0],e.data.m=n[1],e.data.d=n[2]),e},onSuccess:function(e,t,n){1===e.code?$(this).message({type:"positive",content:e.message||"修改成功",disappear:2e3}):"name"===e.result||"signature"===e.result?$(this).form("add prompt",e.result,e.message):$(this).message({type:"negative",content:e.message||"修改失败",disappear:2e3})},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}})},initContactInfoForm:function(){var o=$(".contact-info.form");o.find(".ui.checkbox").checkbox(),o.find(".set-email").on("click",function(){o.find("input[name=email]").val($(this).data("value")),o.find("input[name=qq]").focus()}),$.fn.form.settings.rules.checkRegExpIf=function(e,t){var n=t.regExp||"",i=t.checkboxName||"";return(0!==e.trim().length||!o.find('input[name="'+i+'"]').is(":checked"))&&!(n instanceof RegExp&&0<e.trim().length&&!e.match(n))},o.form({inline:!0,fields:{tel:{rules:[{type:"checkRegExpIf",value:{regExp:/^1([0-9]{10})$/,checkboxName:"open_tel"},prompt:"请输入正确的联系电话"}]},email:{rules:[{type:"checkRegExpIf",value:{regExp:/[\w-.]+@[\w-]+(.[\w_-]+)+/,checkboxName:"open_email"},prompt:"请输入正确的邮箱地址"}]},qq:{optional:!0,rules:[{type:"integer",prompt:"请输入正确的QQ"}]},website:{optional:!0,rules:[{type:"url",prompt:"请输入正确的网址"}]}}}).api({url:page.space_user_url+"/admin/update_contact_info",method:"post",serializeForm:!0,beforeSend:function(e){return $(this).find(".error").removeClass("error").find(".prompt").remove(),$(this).message("hideAll"),e},onSuccess:function(e,t,n){1===e.code?$(this).message({type:"positive",content:e.message||"修改成功",disappear:2e3}):"tel"===e.result||"email"===e.result||"qq"===e.result||"website"===e.result?$(this).form("add prompt",e.result,e.message):$(this).message({type:"negative",content:e.message||"修改失败",disappear:2e3})},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}})},initSkillInfoForm:function(){var e,t,n=$(".skill-info.form");n.find(".ui.dropdown").dropdown(),n.find(".ui.checkbox").checkbox(),(e=n.find(".lang-field")).find("input[type=checkbox]").on("change",function(){5<=e.find("input[type=checkbox]:checked").length?e.find("input[type=checkbox]:not(:checked)").parent().addClass("disabled"):e.find(".checkbox").removeClass("disabled")}),(t=n.find(".professional-fields-field")).find("input[type=checkbox]").on("change",function(){3<=t.find("input[type=checkbox]:checked").length?t.find("input[type=checkbox]:not(:checked)").parent().addClass("disabled"):t.find(".checkbox").removeClass("disabled")}),n.form({inline:!0,fields:{company:{rules:[{type:"maxLength[30]",prompt:"工作单位长度不能超过 {ruleValue} 个字符"}]}}}).api({url:page.space_user_url+"/admin/update_skill_info",method:"post",serializeForm:!1,beforeSend:function(e){return $(this).find(".error").removeClass("error").find(".prompt").remove(),$(this).message("hideAll"),e.data=n.serialize(),e},onSuccess:function(e,t,n){1===e.code?$(this).message({type:"positive",content:e.message||"修改成功",disappear:2e3}):"company"===e.result?$(this).form("add prompt",e.result,e.message):$(this).message({type:"negative",content:e.message||"修改失败",disappear:2e3})},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}})},register:function(){this.initBaseInfoForm(),this.initContactInfoForm(),this.initSkillInfoForm()}},e});
OSCDefine("space-admin-translation",function(){var t=function(){this._translationWrap=$(".translation-wrap")};return t.prototype={constructor:t,initPJAX:function(){var t=$(".translation-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a",".translation-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(){t.addClass("active")}),$(document).on("pjax:complete",function(){t.removeClass("active"),$("html, body").stop().animate({scrollTop:0},500,"swing")})},bindDeleteBtn:function(){this._translationWrap.on("click",".translate-paragraph a.delete",function(t){var n=$(this).parents(".translate-paragraph:eq(0)"),a=n.data("id"),e=$(".delete-paragraph.modal");e.modal({onApprove:function(){$.post(page.space_user_url+"/translate/delete_translated",{id:a},function(t,a){1===t.code?($("body").toast({type:"success",content:"删除成功"}),n.fadeOut(function(){n.remove()})):$("body").toast({type:"error",content:"删除失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},register:function(){this.initPJAX(),this.bindDeleteBtn()}},t});
OSCDefine("space-admin-translation-delivered",function(){var e=function(){this._translationDeliveredWrap=$(".translation-delivered-wrap")};return e.prototype={constructor:e,initPJAX:function(){var e=$(".translation-delivered-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a",".translation-delivered-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(){e.addClass("active")}),$(document).on("pjax:complete",function(){e.removeClass("active"),$("html, body").stop().animate({scrollTop:0},500,"swing")})},initDeliverArticleModal:function(){var o=$(".deliver-article.modal"),e=o.find("#deliverArticleForm");e.form({inline:!0,keyboardShortcuts:!1,fields:{title_en:{rules:[{type:"empty",prompt:"请输入英文标题"}]},title_cn:{rules:[{type:"empty",prompt:"请输入中文标题"}]},link_en:{rules:[{type:"empty",prompt:"请输入文章原文链接"},{type:"url",prompt:"请输入正确的原文链接"}]},category:{rules:[{type:"empty",prompt:"请选择分类"}]}}}).api({url:page.space_user_url+"/translate/deliver_article",method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=e.data;return e.data={title_en:t.title_en,title_cn:t.title_cn,link_en:t.link_en,category:t.category},e},onSuccess:function(e,t,n){1===e.code?($("body").toast({type:"success",content:"投递成功"}),o.modal("hide"),$(this).form("reset"),setTimeout(function(){location.reload()},1e3)):$("body").toast({type:"error",content:e.message||"投递失败"})},onFailure:function(e,t){$("body").toast({type:"error",content:"网络异常，请稍后再试"})}}),e.find(".category.dropdown").dropdown(),o.modal({onApprove:function(){return e.message("hideAll"),e.form("submit"),!1}}),this._translationDeliveredWrap.on("click",".deliver-article-btn",function(){o.modal("show")})},register:function(){this.initPJAX(),this.initDeliverArticleModal()}},e});
OSCDefine("space-admin-projects",function(){var t=function(){this._projectsList=$(".project-list")};return t.prototype={constructor:t,initPJAX:function(){var t=$(".projects-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a",".projects-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(){t.addClass("active")}),$(document).on("pjax:complete",function(){t.removeClass("active"),$("html, body").stop().animate({scrollTop:0},500,"swing")})},bindDeleteBtn:function(){this._projectsList.on("click",".project-wrap a.delete",function(t){var o=$(this).parents(".private-project:eq(0)"),e=o.data("id"),n=$(".delete-project.modal");n.modal({onApprove:function(){$.post(page.space_user_url+"/project/delete_project",{id:e},function(t,e){1===t.code?($("body").toast({type:"success",content:"删除成功"}),o.fadeOut(function(){o.remove()})):$("body").toast({type:"error",content:"删除失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},register:function(){this.initPJAX(),this.bindDeleteBtn()}},t});
OSCDefine("space-admin-releases",function(){return function(){var e=$(".releases-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a",".releases-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(){e.addClass("active")}),$(document).on("pjax:complete",function(){e.removeClass("active"),$("html, body").stop().animate({scrollTop:0},500,"swing")})}});
OSCDefine("space-admin-user-settings",function(){return function(){var e=$(".user-settings.form");e.find(".ui.checkbox").checkbox(),e.form({inline:!0,fields:{ident:{rules:[{type:"maxLength[20]",prompt:"个性网址长度不能超过 {ruleValue} 个字符"}]},space_name:{rules:[{type:"maxLength[40]",prompt:"网页标题长度不能超过 {ruleValue} 个字符"}]}}}).api({url:page.space_user_url+"/admin/update_setting",method:"post",serializeForm:!0,beforeSend:function(e){return $(this).find(".error").removeClass("error").find(".prompt").remove(),$(this).message("hideAll"),e},onSuccess:function(e,s,t){1===e.code?$(this).message({type:"positive",content:e.message||"修改成功"}):"ident"===e.result||"space_name"===e.result?$(this).form("add prompt",e.result,e.message):$(this).message({type:"negative",content:e.message||"修改失败",disappear:2e3})},onFailure:function(e,s){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}})}});
OSCDefine("space-admin-publish",function(){return function(){var t,i,e,n,a,o,r=$("#publishWrapper"),l=$(".publish-news.form"),s=$(".publish-project.form"),p=$(".publish-link.form"),u=l.find("input[name=title]"),d=l.find("textarea[name=newsDetail]"),c=s.find("input[name=name]"),m=s.find("textarea[name=projectDetail]"),f=p.find("input[name=link]");r.find(".dropdown").dropdown(),r.find(".checkbox").checkbox(),t=$("#publishTabList"),i=function(e){switch(e){case"publish-news":u.focus();break;case"publish-project":c.focus();break;case"publish-link":f.focus()}},t.find(".item").tab({onLoad:function(e){i(e)}}),e={height:350,resize_minHeight:423,resize_maxHeight:1e3,uploadUrl:page.space_user_url+"/space/ckeditor_dialog_img_upload",filebrowserUploadUrl:page.space_user_url+"/space/ckeditor_dialog_img_upload"},n=function(){var i=CKEDITOR.replace(d[0],e);i.on("change",function(e){d.val(e.editor.getData())}),i.on("fileUploadResponse",function(e){setTimeout(function(){d.val(e.editor.getData())},0)}),i.on("mode",function(e){if("source"===this.mode){var t=i.editable();t.attachListener(t,"input",function(){d.val(e.editor.getData())})}})},a=function(){var i=CKEDITOR.replace(m[0],e);i.on("change",function(e){m.val(e.editor.getData())}),i.on("fileUploadResponse",function(e){setTimeout(function(){m.val(e.editor.getData())},0)}),i.on("mode",function(e){if("source"===this.mode){var t=i.editable();t.attachListener(t,"input",function(){m.val(e.editor.getData())})}})},l.form({inline:!0,fields:{title:{identifier:"title",rules:[{type:"empty",prompt:"请输入新闻标题"},{type:"maxLength[50]",prompt:"新闻标题长度不能超过 {ruleValue} 个字符"}]},projectId:{identifier:"projectId",optional:!0,rules:[{type:"empty",prompt:"请选择新闻的关联软件"}]},newsDetail:{identifier:"newsDetail",rules:[{type:"empty",prompt:"请输入新闻内容"}]},flag:{identifier:"flag",rules:[{type:"empty",prompt:"请选择新闻的评论权限"}]},original_url:{identifier:"original_url",optional:!0,rules:[{type:"url",prompt:"请输入正确的原文链接"}]}}}).api({url:page.space_user_url+"/space/add_news",method:"post",serializeForm:!0,beforeSend:function(e){var t,i,n;return $(this).message("hideAll"),t=e.data,"关联软件"===(i=l.find(".project-name.dropdown").dropdown("get text"))&&(i=""),n=l.find(".project-name.dropdown").dropdown("get value")||-1,e.data={type:t.type,title:t.title,projectName:i,pid:n,detail:t.newsDetail,original_name:t.original_name,original_url:t.original_url,flag:t.flag},e},onSuccess:function(e,t,i){if(1===e.code){$(this).message({type:"positive",content:"投递成功"}),window.onbeforeunload=null;var n=page.space_user_url+"/admin/releases";setTimeout(function(){window.location.href=n},2e3)}else $(this).message({type:"positive",content:e.message||"投递失败"})},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}}),l.find(".project-name.dropdown").dropdown({fields:{remoteValues:"results",value:"value",name:"name"},filterRemoteData:!1,apiSettings:{url:page.space_user_url+"/space/list_projects?q={query}",method:"get",dataType:"JSON",cache:!1,throttle:200,interruptRequests:!0,onResponse:function(e){var t=[];return 1===e.code&&Array.isArray(e.result)&&0<e.result.length&&(t=e.result.map(function(e){return{name:e.name,value:e.pid+""}})),{results:t}}},onNoResults:function(e){return!!(e&&0<e.trim().length)}}),s.form({inline:!0,fields:{name:{identifier:"name",rules:[{type:"empty",prompt:"请输入软件名称"},{type:"maxLength[50]",prompt:"软件名称长度不能超过 {ruleValue} 个字符"}]},home_url:{identifier:"home_url",rules:[{type:"empty",prompt:"请输入软件网址"},{type:"url",prompt:"请输入正确的软件网址"}]},download_url:{identifier:"download_url",optional:!0,rules:[{type:"url",prompt:"请输入正确的下载地址"}]},doc_url:{identifier:"doc_url",optional:!0,rules:[{type:"url",prompt:"请输入正确的文档地址"}]},projectDetail:{identifier:"projectDetail",rules:[{type:"empty",prompt:"请输入详细介绍"}]},license:{identifier:"license",rules:[{type:"empty",prompt:"请选择开源许可证"}]}}}).api({url:page.space_user_url+"/space/add_project",method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=e.data;return e.data={name:t.name,home_url:t.home_url,download_url:t.download_url,doc_url:t.doc_url,detail:t.projectDetail,license:t.license},e},onSuccess:function(e,t,i){if(1===e.code){$(this).message({type:"positive",content:e.message||"添加成功"}),window.onbeforeunload=null;var n=page.space_user_url+"/admin/projects";setTimeout(function(){window.location.href=n},2e3)}else $(this).message({type:"negative",content:e.message||"添加失败"})},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}}),p.form({inline:!0,keyboardShortcuts:!1,fields:{link:{identifier:"link",rules:[{type:"empty",prompt:"请输入文章链接"},{type:"url",prompt:"请输入正确的文章链接"}]}}}).api({url:page.space_user_url+"/space/addLink",method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=e.data;return e.data={link:t.link,userId:page.g_user_id},e},onSuccess:function(e,t,i){1===e.code?$(this).message({type:"positive",content:"投递成功"}):$(this).message({type:"negative",content:e.message||"投递失败"})},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}}),(o=$(".check-link.button")).on("click",function(){p.form("validate field","link")&&(o.addClass("loading"),p.message("hideAll"),$.ajax({type:"POST",url:page.space_user_url+"/space/checkURL",data:{link:p.find("input[name=link]").val()},dataType:"json",success:function(e){1===e.code?p.message({type:"positive",content:"投递链接合法"}):p.message({type:"negative",content:"投递链接有误"})}}).fail(function(){p.message({type:"negative",content:"网络错误，请稍后再试"})}).always(function(){o.removeClass("loading")}))}),$(function(){n(),a();var e=t.find(".item.active");e&&i(e.attr("data-tab")||"publish-news"),window.onbeforeunload=function(){var e=u.val().trim(),t=d.val().trim(),i=c.val().trim(),n=m.val().trim();if(""!==e||""!==t||""!==i||""!==n)return"确认放弃此文章"}})}});
OSCDefine("space-admin-publish-news",function(){return function(){var t,e,r,o=$(".publish-news.form"),i=o.find("input[name=title]"),n=o.find("textarea[name=newsDetail]"),a={add:page.space_user_url+"/space/add_news",edit:page.space_user_url+"/space/edit_news"};o.find(".dropdown").dropdown(),o.find(".checkbox").checkbox(),t={height:350,resize_minHeight:423,resize_maxHeight:1e3,uploadUrl:page.space_user_url+"/space/ckeditor_dialog_img_upload",filebrowserUploadUrl:page.space_user_url+"/space/ckeditor_dialog_img_upload"},e=function(){var e=CKEDITOR.replace(n[0],t);e.on("change",function(e){e.editor.updateElement()}),e.on("fileUploadResponse",function(e){setTimeout(function(){e.editor.updateElement()},0)}),e.on("mode",function(e){if("source"===e.editor.mode){var t=e.editor.editable();t.attachListener(t,"input",function(){e.editor.updateElement()})}})},r=a.add,page.is_edit&&(r=a.edit),o.form({inline:!0,fields:{title:{identifier:"title",rules:[{type:"empty",prompt:"请输入新闻标题"},{type:"maxLength[50]",prompt:"新闻标题长度不能超过 {ruleValue} 个字符"}]},projectId:{identifier:"projectId",optional:!0,rules:[{type:"empty",prompt:"请选择新闻的关联软件"}]},newsDetail:{identifier:"newsDetail",rules:[{type:"empty",prompt:"请输入新闻内容"}]},flag:{identifier:"flag",rules:[{type:"empty",prompt:"请选择新闻的评论权限"}]},original_url:{identifier:"original_url",optional:!0,rules:[{type:"url",prompt:"请输入正确的原文链接"}]}}}).api({url:r,method:"post",serializeForm:!0,beforeSend:function(e){var t,i,n;return $(this).message("hideAll"),e.url=r,t=e.data,"关联软件"===(i=o.find(".project-name.dropdown").dropdown("get text"))&&(i=""),n=o.find(".project-name.dropdown").dropdown("get value")||-1,e.data={id:t.id,editor:t.editor,type:t.type,title:t.title,projectName:i,pid:n,detail:t.newsDetail,source:t.source,original_url:t.original_url,flag:t.flag},e},onSuccess:function(e,t,i){if(1===e.code){$(this).message({type:"positive",content:e.message||(page.is_edit?"保存成功":"投递成功")}),window.onbeforeunload=null;var n=page.space_user_url+"/admin/releases";setTimeout(function(){window.location.href=n},2e3)}else $(this).message({type:"negative",content:e.message||(page.is_edit?"保存失败":"投递失败")})},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}}),o.find(".project-name.dropdown").dropdown({fields:{remoteValues:"results",value:"value",name:"name"},filterRemoteData:!1,apiSettings:{url:page.space_user_url+"/space/list_projects?q={query}",method:"get",dataType:"JSON",cache:!1,throttle:200,interruptRequests:!0,onResponse:function(e){var t=[];return 1===e.code&&Array.isArray(e.result)&&0<e.result.length&&(t=e.result.map(function(e){return{name:e.name,value:e.pid+""}})),{results:t}}},onNoResults:function(e){return!!(e&&0<e.trim().length)}}),$(function(){e(),i.focus(),window.onbeforeunload=function(){var e=i.val().trim(),t=n.val().trim();if(""!==e||""!==t)return"确认放弃此文章"}})}});
OSCDefine("space-admin-publish-project",function(){return function(){var e,t,i,o=$(".publish-project.form"),r=o.find("input[name=name]"),a=o.find("textarea[name=projectDetail]"),n={add:page.space_user_url+"/space/add_project",edit:page.space_user_url+"/space/edit_project"};o.find(".checkbox").checkbox(),e={height:350,resize_minHeight:423,resize_maxHeight:1e3,uploadUrl:page.space_user_url+"/space/ckeditor_dialog_img_upload",filebrowserUploadUrl:page.space_user_url+"/space/ckeditor_dialog_img_upload"},t=function(){var i=CKEDITOR.replace(a[0],e);i.on("change",function(e){a.val(e.editor.getData())}),i.on("fileUploadResponse",function(e){setTimeout(function(){a.val(e.editor.getData())},0)}),i.on("mode",function(e){if("source"===this.mode){var t=i.editable();t.attachListener(t,"input",function(){a.val(e.editor.getData())})}})},i=n.add,page.is_edit&&(i=n.edit),o.form({inline:!0,fields:{name:{identifier:"name",rules:[{type:"empty",prompt:"请输入软件名称"},{type:"maxLength[50]",prompt:"软件名称长度不能超过 {ruleValue} 个字符"}]},home_url:{identifier:"home_url",rules:[{type:"empty",prompt:"请输入软件网址"},{type:"url",prompt:"请输入正确的软件网址"}]},download_url:{identifier:"download_url",optional:!0,rules:[{type:"url",prompt:"请输入正确的下载地址"}]},doc_url:{identifier:"doc_url",optional:!0,rules:[{type:"url",prompt:"请输入正确的文档地址"}]},projectDetail:{identifier:"projectDetail",rules:[{type:"empty",prompt:"请输入详细介绍"}]},license:{identifier:"license",rules:[{type:"empty",prompt:"请选择开源许可证"}]}}}).api({url:i,method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll"),e.url=i;var t=e.data;return e.data={id:t.id,name:t.name,home_url:t.home_url,download_url:t.download_url,doc_url:t.doc_url,detail:t.projectDetail,license:t.license},e},onSuccess:function(e,t,i){if(1===e.code){$(this).message({type:"positive",content:e.message||(page.is_edit?"保存成功":"添加成功")}),window.onbeforeunload=null;var o=page.space_user_url+"/admin/projects";setTimeout(function(){window.location.href=o},2e3)}else $(this).message({type:"negative",content:e.message||(page.is_edit?"保存失败":"添加失败")})},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}}),$(function(){t(),r.focus(),window.onbeforeunload=function(){var e=r.val().trim(),t=a.val().trim();if(""!==e||""!==t)return"确认放弃此软件"}})}});
!function(){function t(t,e,i){this.node_get=document.getElementById(e)||document.body,this.content="",this.id=0,this.url=window.location.href,this.url=this.url.split("#")[0],this.last_node=[0],this.last_id=0;this.countTotalElement(this.node_get);"function"==typeof i&&i(0===this.content.length),this.content+="</ul>",document.getElementById(t).innerHTML=this.content}t.prototype.countTotalElement=function(t){var e,i,s,n=0;if(1===t.nodeType){if(0<=t.className.indexOf("osc_git_box"))return n;switch(n++,e=0,t.tagName.toLowerCase()){case"h1":e=1;break;case"h2":e=2;break;case"h3":e=3;break;case"h4":e=4;break;case"h5":e=5;break;case"h6":e=6}if(0<e){for(this.id++;e<this.last_node[this.last_id];this.last_id--)1<this.last_id?(this.content+="</ul>",this.tagNum--):(this.last_node[1]=e,this.last_id++);e>this.last_node[this.last_id]&&(this.content+="<ul>",++this.last_id,this.last_node[this.last_id]=e,this.tagNum++),t.setAttribute("id",t.tagName.toLowerCase()+"_"+this.id),this.content+='<li><a href="'+this.url+"#"+t.tagName.toLowerCase()+"_"+this.id+'">'+t.innerText+"</a></li>\n"}}for(i=t.childNodes,s=0;s<i.length;s++)n+=this.countTotalElement(i[s]);return n},window.OSCCatalogue=t}();
!function(u){var t,o,d={btnSelector:".collect-btn",btnLabelSelector:"[data-label]",popupSelector:".collect.popup",formSelector:".collect.form",uniqueFlag:"",objectId:"",objectKey:"",objectFromOSC:!0,objectTypeId:"",userId:"",recommendTags:[],maxNum:99,requiredTags:!1,activeClass:"active",nonActivatedIconClass:"outline",initFormatLabel:!0},m=function(t){var o=this;if("object"==typeof t)return o.option=u.extend({},d,t),o._collectPopupBtn=u(o.option.btnSelector+'[data-flag="'+o.option.uniqueFlag+'"]'),o._collectLabel=o._collectPopupBtn.find(o.option.btnLabelSelector),o._collectPopup=u(o.option.popupSelector+'[data-flag="'+o.option.uniqueFlag+'"]'),void(o._collectForm=o._collectPopup.find(o.option.formSelector))};m.prototype.init=function(){var t=this;t.option.initFormatLabel&&0<t._collectLabel.length&&m.labelFormat(t._collectLabel,t.option.maxNum),t.insertRecommendTags(),t.btnPopup(),t.blurTagEvent(),t.formInit(),t.bindTagsEvent()},m.prototype.insertRecommendTags=function(){var t,o,e,n,a,c=this;if(0<c.option.recommendTags.length){for(t="",o=c.option.recommendTags.length,e=c._collectPopup.find(".recommend-tags"),n=0;n<o;n++)t+='<a class="ui label" data-value="'+(a=c.option.recommendTags[n])+'">'+a+"</a>";e.find(".labels").html(t+e.find(".labels").html()),e.show()}},m.prototype.btnPopup=function(){var l=this;l._collectPopupBtn.popup({popup:l._collectPopup,position:"bottom center",on:"click",onShow:function(){if(l._collectPopupBtn.hasClass(l.option.activeClass)){var t={type:l.option.objectTypeId,user:l.option.userId};return l.option.objectFromOSC?t.id=l.option.objectId:t.articleKey=l.option.objectKey,u.post(page.space_user_url+"/favorites/cancel",t,function(t){var o,e,n,a,c=t&&"string"==typeof t?JSON.parse(t):t;1===c.code?(o=m.getCollectNumFriendly(c.result,l.option.maxNum),e='[data-obj-type="'+l.option.objectTypeId+'"]',l.option.objectFromOSC?e+='[data-id="'+l.option.objectId+'"]':e+='[data-key="'+l.option.objectKey+'"]',(n=u(l.option.btnSelector+e)).removeClass(l.option.activeClass),n.find(".icon").addClass(l.option.nonActivatedIconClass),0<(a=n.find(l.option.btnLabelSelector)).length&&a.html("收藏("+o+")"),u("[data-collect-count]"+e).html(o)):u("body").toast({type:"error",content:"取消收藏失败"})}),!1}l._collectForm.form("reset"),l._collectForm.message("hideAll")},onVisible:function(){l._collectPopupBtn.hasClass(l.option.activeClass)||l._collectForm.find('input[name="tags"]').focus()}})},m.prototype.showPopup=function(){this._collectPopupBtn.popup("show")},m.prototype.blurTagEvent=function(){var t=this,o=t._collectForm.find("input[name=tags]");t._collectForm.on("focusout",o,function(t){setTimeout(function(){o.scrollLeft(o[0].scrollWidth)},0)})},m.prototype.formInit=function(){var r=this;r._collectForm.form({inline:!0,keyboardShortcuts:!1,on:"blur"}),r.option.requiredTags&&r._collectForm.form("add rule","tags",{identifier:"tags",rules:[{type:"empty",prompt:"必须填写收藏标签"}]}),r._collectForm.api({url:page.space_user_url+"/favorites/add",method:"post",serializeForm:!0,beforeSend:function(t){if(r._collectForm.message("hideAll"),!r._collectForm.form("validate form"))return!1;var o=t.data;return t.data={type:r.option.objectTypeId,user:r.option.userId,tags:o.tags},r.option.objectFromOSC?t.data.id=r.option.objectId:t.data.articleKey=r.option.objectKey,t},onSuccess:function(t,o,e){var n,a,c,l;1===t.code?(n=m.getCollectNumFriendly(t.result,r.option.maxNum),r._collectForm.form("reset"),a='[data-obj-type="'+r.option.objectTypeId+'"]',r.option.objectFromOSC?a+='[data-id="'+r.option.objectId+'"]':a+='[data-key="'+r.option.objectKey+'"]',(c=u(r.option.btnSelector+a)).addClass(r.option.activeClass),c.find(".icon").removeClass(r.option.nonActivatedIconClass),0<(l=c.find(r.option.btnLabelSelector)).length&&l.html("已收藏("+n+")"),u("[data-collect-count]"+a).html(n),r._collectPopupBtn.popup("hide")):r._collectForm.message({type:"negative",content:"收藏失败"})},onFailure:function(t,o){r._collectForm.message({type:"negative",content:"网络错误，请稍后再试"})}})},m.prototype.bindTagsEvent=function(){var l=this;l._collectForm.on("click",".label",function(t){var e=u(this).attr("data-value"),o=l._collectForm.find("input[name=tags]"),n=m.commaStr2Arr(o.val()),a=-1,c=n.some(function(t,o){return t.trim()===e&&(a=o,!0)});c?n.splice(a,1):n.push(e),o.val(n.join(",")).focus(),l._collectForm.form("validate form")})},m.getCollectNumFriendly=function(t,o){return t},m.labelFormat=function(t,e){var o=t.html();o=o.replace(/\((.*)?\)/,function(t,o){return"("+m.getCollectNumFriendly(o,e)+")"}),t.html(o)},m.commaStr2Arr=function(t){var o=[];return t&&0<t.trim().length&&(o=(o=t.trim().replace(/，/gi,",").split(",")).filter(function(t){return t&&t.trim()})),o},window.OSCCollect=m,t=function(){u(".collect-btn span.label").each(function(t,o){var e=u(o),n=parseInt(e.attr("data-max"))||d.maxNum;m.labelFormat(e,n)})},o=function(){u(document).on("click",".collect-btn",function(t){var o,e,n,a,c,l,r,i,p,s;if(!window.common.checkLogin())return!1;if(e=(o=u(this)).attr("data-user-id"),n=parseInt(o.attr("data-obj-type")),e===o.attr("data-current-user-id")){switch(a="内容",n){case 1:a="软件";break;case 2:a="问答";break;case 3:a="博客";break;case 4:a="新闻"}return u("body").toast({type:"error",content:"不能收藏自己的"+a}),!1}c=o.attr("data-flag")||Math.random().toString(36).substr(2,6),o.attr("data-flag",c),l=m.commaStr2Arr(o.attr("data-recommend-tags")),r=o.attr("data-id"),i=o.attr("data-key"),p=!0,r&&""!==r&&0<parseInt(r)?p=!0:i&&""!==i&&(p=!1),s={btnSelector:".collect-btn",popupSelector:".collect.popup",uniqueFlag:c,objectId:r,objectKey:i,objectFromOSC:p,objectTypeId:o.attr("data-obj-type"),userId:o.attr("data-current-user-id"),recommendTags:l,maxNum:parseInt(o.attr("data-max"))||d.maxNum,requiredTag:void 0!==o.attr("data-tag-required"),initFormatLabel:!1},0===u('.collect.popup[data-flag="'+c+'"]').length&&!0!==window.oscCollectLoading&&(window.oscCollectLoading=!0,u.get(page.space_user_url+"/widgets/collect_popup",function(t){var o,e=document.createElement("div");e.innerHTML=t,u(e).find(".collect.popup").attr("data-flag",c),document.body.appendChild(e),(o=new m(s)).init(),o.showPopup()}).always(function(){window.oscCollectLoading=!1}))})},new window.common.dynamicLoader(["/new-osc/js/utils/plugins/jquery.serialize-object.min.js","/new-osc/js/utils/plugins/osc-message.js"]).loadFiles(),t(),o()}(window.jQuery||window.$);
!function(){var a={bindLink:function(){var u=this;$(document).on("click","a.donate[donate]",function(a){var e=$(this),t=e.attr("data-id"),n=e.attr("data-obj-type"),o=e.attr("data-subject"),i=e.attr("data-donater"),r=e.attr("data-author"),d=e.attr("data-return-url"),s=e.attr("data-notify-url");0===$.find(".donate.modal").length&&!0!==window.oscDonateLoading?(window.oscDonateLoading=!0,$.get(page.space_user_url+"/widgets/donate_modal?userId="+r,function(a){var e=document.createElement("div");e.innerHTML=a,document.body.appendChild(e),u.initModal(),u.showModal(t,n,o,i,r,d,s)}).always(function(){window.oscDonateLoading=!1})):u.showModal(t,n,o,i,r,d,s)})},initModal:function(){var u=this,l=$(".donate.modal"),d=$("#donateForm"),m=l.find(".submit-btn");l.find(".checkbox").checkbox(),this.initMoneyRadio(d),$.fn.form.settings.rules.money=function(a){return/^\d+(\.\d+)?$/.test(a)},$.fn.form.settings.rules.range=function(a,e){var t=e.split(","),n=parseInt(t[0]),o=parseInt(t[1]);return n<=a&&a<=o},$.fn.form.settings.rules.decimalPlaces=function(a,e){var t=a.split(".");return!(2===t.length&&t[1].length>e)},d.form({inline:!0,fields:{payMoney:{rules:[{type:"empty",prompt:"请输入金额"},{type:"money",prompt:"请输入正确的金额"},{type:"range[1,10000]",prompt:"打赏金额为 1-10000 元以内"},{type:"decimalPlaces[2]",prompt:"最多支持2位小数"}]},message:{rules:[{type:"maxLength[100]",prompt:"留言内容长度不能超过 {ruleValue} 个字"}]}}}).api({url:page.space_user_url+"/donate/donate",method:"post",serializeForm:!0,beforeSend:function(a){var e,t,n,o,i,r,d,s;return m.addClass("loading disabled"),$(this).message("hideAll"),e=l.attr("data-id"),t=l.attr("data-obj-type"),n=l.attr("data-subject"),o=l.attr("data-donater"),i=l.attr("data-author"),r=l.attr("data-return-url"),d=l.attr("data-notify-url"),s=a.data,50<n.length&&(n=n.substring(0,48)+"……"),a.data={payMoney:s.payMoney,money:u.accMul(parseFloat(s.payMoney),100),donaterName:s.donaterName,message:s.message,"reward-way":s.rewardWay,objType:t,objId:e,donater:o,subject:n,author:i,returnUrl:r,notifyUrl:d,sign:""},a},onSuccess:function(a,e,t){var n,o,i,r;m.removeClass("loading disabled"),a.success?"wepay"===a.payType?(o=(n=l.find(".wepay-box")).find(".qr-code-wrap"),i=n.find(".wepay-amount"),d.hide(),(r=((r=d.find("input[name=payMoney]").val())+"").replace(/^0+\./g,"0.")).match(/^0+[1-9]+/)&&(r=r.replace(/^0+/g,"")),i.text(r),o.html('<img src="data:image/png;base64,'+a.data+'"/>'),l.find(".actions").hide(),n.fadeIn(),u.donateWePayOrderStatusInit(a.order)):(l.find(".alipay-dialog").html(a.data),l.modal("hide")):$(this).message({type:"negative",content:a.msg})},onFailure:function(a,e){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}}),l.modal({onShow:function(){d.form("reset"),d.message("hideAll")},onApprove:function(){return d.message("hideAll"),d.form("submit"),!1},onHidden:function(){l.find(".wepay-dialog").hide(),l.find(".actions").show(),d.show()}}),l.on("keydown",function(a){(a.metaKey||a.ctrlKey)&&13===a.keyCode&&l.find(".positive.button").click()})},showModal:function(a,e,t,n,o,i,r){var d=$(".donate.modal");d.attr("data-id",a),d.attr("data-obj-type",e),d.attr("data-subject",t),d.attr("data-donater",n),d.attr("data-author",o),d.attr("data-return-url",i),d.attr("data-notify-url",r),d.modal("show")},initMoneyRadio:function(t){function n(a){a.addClass("active").closest(".ui.menu").find(".item").not(a).removeClass("active")}var o=$(".money.menu");o.on("click",".item",function(){var a=t.find("input[name=payMoney]"),e=$(this).data("value");a.val(e),n($(this)),""===e&&a.focus()}),t.on("keyup","input[name=payMoney]",function(){var a,e=$(this).val();""!==e.trim()&&(0===(a=o.find('.item[data-value="'+e+'"]')).length&&(a=o.find('.item[data-value=""]')),n(a))})},accMul:function(a,e){if("number"!=typeof a||"number"!=typeof e)return 0;var t=0,n=a+"",o=e+"";return-1<n.indexOf(".")&&(t+=n.split(".")[1].length),-1<o.indexOf(".")&&(t+=o.split(".")[1].length),Number(n.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,t)},donateWePayOrderStatusInit:function(e){var a=$(".donate.modal"),n=$("#donateForm"),o=a.find(".wepay-box"),i=a.find(".wepay-success"),r=this,t=0;page.g_user_code&&(t=page.g_user_id),setTimeout(function a(){r.payTimer&&(clearTimeout(r.payTimer),r.payTimer=null),r.payTimer=setTimeout(a,1e3),$.post(page.space_user_url+"/donate/queryStatus",{orderCode:e,uid:t},function(a){var e,t;e=i.find(".wepay-amount"),a.data&&3===a.data.status&&r.payTimer&&(clearTimeout(r.payTimer),r.payTimer=null,o.hide(),i.fadeIn(),t=n.find("input[name=payMoney]").val(),e.text(t),n.form("reset"))}).fail(function(){r.payTimer&&(clearTimeout(r.payTimer),r.payTimer=null)})},3e3)}},e=new window.common.dynamicLoader(["/new-osc/js/utils/plugins/jquery.serialize-object.min.js","/new-osc/js/utils/plugins/osc-message.js"]);e.loadFiles(),a.bindLink()}();
OSCPlugin("blog-detail-comments",function(){return function(){var t={config:{objId:0,fetchCommentsUrl:"",publishCommentUrl:"",replyCommentUrl:"",deleteCommentUrl:""},init:function(e){this._commentsContainer=$("#commentsContainer"),this._commentsWrap=this._commentsContainer.find(".comments-wrap"),this.config=$.isPlainObject(e)?$.extend(!0,{},this.config,e):$.extend({},this.config)},loadComments:function(){var t=this;$.get(t.config.fetchCommentsUrl,function(e){t._commentsWrap.html(e),t.parseEmoticon()})},initCommentForm:function(){var a=this;a.commentFormVue=new Vue({el:"#commentForm",data:function(){return{commentMaxLength:1e3,commentContent:"",commentPublishLoading:!1,tipMessage:{show:!1,content:"",className:""},curEmojiType:"People",emojiList:[{type:"People",items:["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","disappointed_relieved","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","cry","sob","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","fu","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","dancer","dancers","ok_woman","no_good","information_desk_person","raising_hand","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface"]},{type:"Nature",items:["sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel"]},{type:"Objects",items:["bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","package","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn"]},{type:"Places",items:["house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de"]},{type:"Symbols",items:["one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","sparkle","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","back","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_small_square","white_small_square","black_medium_small_square","white_medium_small_square","black_medium_square","white_medium_square","black_large_square","white_large_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"]}]}},computed:{curEmojiItems:function(){for(var e=0,t=this.emojiList.length;e<t;e++)if(this.emojiList[e].type===this.curEmojiType)return this.emojiList[e].items;return this.emojiList[0].items},commentContentIsEmpty:function(){return 0===this.commentContent.length},commentCountText:function(){return this.commentContent.length+"/"+this.commentMaxLength}},methods:{insertEmoji:function(e){this.clearMessage();var t=":"+e+":";this.insertContent(t),$(this.$refs.showEmojiBox).popup("hide")},insertProject:function(){var e,t,o;this.clearMessage(),e="#此处输入软件#",this.insertContent(e)&&(o=(t=selectRange.of(this.$refs.commentTextarea)).getCurPos(),t.setSelectText(o-(e.length-1),o-1))},publishComment:function(){var n,e;(n=this).tweetPublishLoading||(n.clearMessage(),n.commentContentIsEmpty?n.showMessage("error","内容不能为空",2e3):n.commentContent.length>n.commentMaxLength?n.showMessage("error","最多只能输入"+n.commentMaxLength+"个字符！",2e3):(n.commentPublishLoading=!0,e={blog:a.config.objId,content:n.commentContent},$.post(a.config.publishCommentUrl,e,function(e){var t,o;1===e.code?(n.commentContent="",a.loadComments(),t=$(".float-menu .comment-btn"),e.result&&void 0!==e.result.replyCount&&(o=e.result.replyCount,$("[data-article-reply-count]").html(o),t.attr("title","共有 "+o+" 条评论")),t.find(".icon").removeClass("outline"),$("html, body").stop().animate({scrollTop:a._commentsWrap.offset().top-80},500,"swing")):n.showMessage("error",e.message||"发布失败",2e3)}).fail(function(){n.showMessage("error","网络错误，请稍后再试！",2e3)}).always(function(){n.commentPublishLoading=!1})))},commentContentOnKeyDown:function(e){(e.metaKey||e.ctrlKey)&&13==e.keyCode&&this.publishComment()},insertContent:function(e){return!this.commentPublishLoading&&(this.commentContent.length>=this.commentMaxLength||this.commentContent.length+e.length>this.commentMaxLength?void this.showMessage("error","最多只能输入"+this.commentMaxLength+"个字符！",2e3):(selectRange.of(this.$refs.commentTextarea).insertAfterText(e),this.commentContent=this.$refs.commentTextarea.value,!0))},showMessage:function(e,t,o){var n,a=this;a.tipMessage.className="success"===e?"positive":"negative",a.tipMessage.content=t,n=parseInt(o)||0,a.tipMessage.show=!0,0<n&&setTimeout(function(){a.clearMessage()},n)},clearMessage:function(){var e=this;e.tipMessage.className="",e.tipMessage.content="",e.tipMessage.show=!1}}}),$("#commentForm").find(".comment-form .toolbox > .item[data-popup]").each(function(e,t){var o=$(t),n=$(o).parent(),a=n.find(".toolbox-popup."+o.attr("data-popup"));o.popup({position:"bottom left",popup:a,on:"toolbox-picture"===o.attr("data-popup")?"manual":"click",exclusive:!0})})},initCommentDeleteModal:function(){var s=this,o=$(".delete-comment.modal");o.modal({onDeny:function(){var e=$(this).attr("data-comment-id"),i=s._commentsWrap.find("div.comment[data-comment-id="+e+"]"),t=i.attr("data-comment-user-id");$.post(s.config.deleteCommentUrl,{space:page.space_user_id,id:e,user:t,blog:s.config.objId},function(e){var t,o,n,a,r;1===e.code?($("body").toast({type:"success",content:"删除成功"}),i.fadeOut(function(){i.remove()}),o=(t=s._commentsWrap.find("> .header span")).text(),n=$("[data-article-reply-count]"),a=$(".float-menu .comment-btn"),o?((r=parseInt(o)-(1+i.find("div.comment").length))<0&&(r=0),t.text(r),n.html(r),a.attr("title","共有 "+r+" 条评论")):(t.text(0),n.html(0),a.attr("title","共有 0 条评论")),e.result&&void 0!==e.result.selfCommentCount&&e.result.selfCommentCount<=0&&a.find(".icon").addClass("outline")):$("body").toast({type:"error",content:e.message||"删除失败"})})}}),s._commentsWrap.on("click",".actions a.remove",function(e){var t;e.stopPropagation(),t=$(e.target).parents(".comment:eq(0)").attr("data-comment-id"),o.attr("data-comment-id",t),o.modal("show")})},initReplyCommentModal:function(){var r=this,i=$(".reply-comment.modal"),s=$("#replyCommentForm");i.modal({onShow:function(){var e,t;s.form("reset"),s.message("hideAll"),e=$(this).attr("data-comment-user-id")||-1,t=$(this).attr("data-comment-id")||-1,s.find("input[name=reply_id]").val(e+"_"+t)},onApprove:function(){return s.message("hideAll"),s.form("submit"),!1}}),s.form({inline:!0,fields:{content:{rules:[{type:"empty",prompt:"请输入评论内容"},{type:"maxLength[1000]",prompt:"内容长度不能超过 {ruleValue} 个字"}]}}}).api({url:r.config.replyCommentUrl,method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=e.data;return e.data={blog:r.config.objId,reply_id:t.reply_id,content:t.content},e},onSuccess:function(e,t,o){var n,a;1===e.code?($(this).message({type:"positive",content:"评论回复成功"}),s.form("reset"),r.loadComments(),n=$(".float-menu .comment-btn"),e.result&&void 0!==e.result.replyCount&&(a=e.result.replyCount,$("[data-article-reply-count]").html(a),n.attr("title","共有 "+a+" 条评论")),n.find(".icon").removeClass("outline"),setTimeout(function(){i.modal("hide")},2e3)):$(this).message({type:"negative",content:e.message||"回复失败"})},onFailure:function(e,t){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}}),i.on("keydown",function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&i.find(".positive.button").click()}),r._commentsWrap.on("click",".actions a.reply",function(e){var t,o,n;if(e.stopPropagation(),!window.common.checkLogin())return!1;o=(t=$(e.target).parents(".comment:eq(0)")).attr("data-comment-user-id"),n=t.attr("data-comment-id"),i.attr("data-comment-user-id",o),i.attr("data-comment-id",n),i.modal("show")})},bindReplyBtn:function(){var i=this;i._commentsWrap.on("click",".actions a.reply",function(e){var n,a,r,t;return e.stopPropagation(),!!window.common.checkLogin()&&(n=$(e.target).parents(".comment:eq(0)"),a=n.attr("data-comment-user-id"),r=n.attr("data-comment-id"),0<n.find(".content:eq(0) [data-rely-comment-form]").length?((t=n.find(".content:eq(0) [data-rely-comment-form]").get(0)).vueInstance&&t.vueInstance.focus(),!1):($("[data-rely-comment-form]").each(function(e,t){var o=$(t);t.vueInstance&&t.vueInstance.$destroy(),o.remove()}),void(0===$('[data-reply-comment-form][data-comment-id="'+r+'"]').length&&!0!==window.oscReplyCommentFormLoading&&(window.oscReplyCommentFormLoading=!0,$.get(page.space_user_url+"/widgets/comments_reply_form",function(e){var t,o=document.createElement("div");o.innerHTML=e,$(o).find("[data-reply-comment-form]").attr("data-comment-id",r),n.find(".content:eq(0)").append(o),(t=new OSCCommentForm({commentFormSelector:"#replyCommentForm",commentsWrapEl:i._commentsWrap,toggleLoadComments:function(){i.loadComments()},url:i.config.replyCommentUrl,params:{blog:page.objId,reply_id:a+"_"+r},commentedAutoScrollToTop:!0,contentField:"content"})).init(),t.focus()}).always(function(){window.oscReplyCommentFormLoading=!1})))))})},initCommentsListPJAX:function(){var e=this,t=$(".comments-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a","#commentsContainer .comments-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(){t.addClass("active")}),$(document).on("pjax:complete",function(){e.parseEmoticon(),t.removeClass("active"),$("html, body").stop().animate({scrollTop:e._commentsWrap.offset().top-80},500,"swing")})},parseEmoticon:function(){$(function(){$("[data-emoji-render]").emoticon()})}},e=new window.common.dynamicLoader(["/new-osc/js/utils/vue.min.js"],function(){var e=window.page;t.init({objId:e.objId,fetchCommentsUrl:e.fetchCommentsUrl,publishCommentUrl:e.publishCommentUrl,replyCommentUrl:e.replyCommentUrl,deleteCommentUrl:e.deleteCommentUrl}),t.initCommentForm(),t.initCommentDeleteModal(),t.bindReplyBtn(),t.initCommentsListPJAX(),t.parseEmoticon()});e.loadFiles()}});
OSCDefine("space-blog-detail",["blog-detail-comments"],function(){var t=function(){this._blogDetailEl=$(".blog-detail")};return t.prototype={constructor:t,articleCatalogue:function(){var t=$("#sideMenu");t.sidebar({dimPage:!1,exclusive:!0,transition:"overlay",mobileTransition:"overlay"}),t.sidebar("attach events","#sideMenuLauncher"),new OSCCatalogue("sideMenuBody","articleContent",function(t){t||$("#sideMenuLauncher").show()})},like:function(){this._blogDetailEl.on("click","a.like.article-like",function(t){var n=$(this),a=n.attr("data-id"),e=!!n.hasClass("active");if(!window.common.checkLogin())return!1;$.post(page.space_user_url+"/blog/vote",{id:a,user:page.g_user_id,vote:!e},function(t){var e,o;1===t.code?(e=$('a.like.article-like[data-id="'+a+'"]'),n.hasClass("active")?(e.removeClass("active"),e.find(".icon").addClass("outline")):(e.addClass("active"),e.find(".icon").removeClass("outline")),t.result&&void 0!==t.result.vote&&(o=t.result.vote,$("[data-article-like-count]").html(o))):$("body").toast({type:"error",content:t.message||"点赞失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})})},hightlight:function(){$("pre code").each(function(t,e){var o,n=$(this),a=n.attr("class")||"",i=a.match(/language-(.*)/);i&&1<i.length&&(o=i[i.length-1],n.attr("class","hljs "+o)),hljs.highlightBlock(e)})},articleList:function(){var e,t=this,o={relArticleList:1,newArticleList:1},n={relArticleList:new OSCInfiniteScroll({pagePath:".rel-pagination.pagination__next",checkLastPage:!0,containerSelector:"#relArticleList",itemListSelector:".blog-detail-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:0,itemSelector:".item.blog-item",loadOnScroll:!1,onAppend:function(){t.optimizeImgShow()}}),newArticleList:new OSCInfiniteScroll({pagePath:".news-pagination.pagination__next",checkLastPage:!0,containerSelector:"#newArticleList",itemListSelector:".blog-detail-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:0,itemSelector:".item.blog-item",loadOnScroll:!1,onAppend:function(){t.optimizeImgShow()}})};n.relArticleList.init(),e="relArticleList",$(".spaceBlog-tab.menu .item").tab({onLoad:function(t){e!==t&&(n[e]._infScroll&&(o[e]=n[e]._infScroll.pageIndex),n[e].destroy(),n[t].init(),n[t]._infScroll&&(n[t]._infScroll.pageIndex=o[t]),e=t)}})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},shareMenu:function(){this._blogDetailEl.find(".share.dropdown").dropdown()},initManagerMenu:function(){var t=$("#managerMenu");t.dropdown(),t.on("click","a.item.delete-btn",function(){var t=page.objId,e=$(".delete-blog.modal").modal({onApprove:function(){$.post(page.space_user_url+"/blog/delete",{id:t,user_code:page.g_user_code||""},function(t){1===t.code?($("body").toast({type:"success",content:"删除成功"}),setTimeout(function(){location.href=page.space_user_url},1e3)):$("body").toast({type:"error",content:t.message||"删除失败"})})}});e.modal("show")}),t.on("click",".item.recommend-self-btn",function(){var e=$(this),t=page.objId,o=$(".recommend-self.modal").modal({onApprove:function(){$.post(page.space_user_url+"/blog/self_recommend",{id:t},function(t){1===t.code?($("body").toast({type:"success",content:"自荐成功"}),e.find("span").text("已推荐")):$("body").toast({type:"error",content:t.message||"自荐失败"})})}});o.modal("show")}),t.on("click",".item.recommend-blog-btn",function(){var e=$(this),t=1===parseInt(e.attr("data-value")),o=page.objId,n=$(".recommend-blog.modal");n.modal({onShow:function(){t?(n.find(".header").text("取消推荐文章"),n.find(".content p").text("确定取消推荐此文章吗？")):(n.find(".header").text("推荐文章"),n.find(".content p").text("确定推荐此文章吗？"))},onApprove:function(){$.post(page.space_user_url+"/blog/toggle_recomm",{id:o},function(t){1===t.code?1===t.result?($("body").toast({type:"success",content:"推荐成功"}),e.find("span").text("已推荐"),e.attr("data-value",1)):(e.find("span").text("推荐"),$("body").toast({type:"success",content:"取消推荐成功"}),e.attr("data-value",0)):$("body").toast({type:"error",content:t.message||"推荐失败"})})}}),n.modal("show")}),t.on("click",".item.recommend-author-btn",function(){var e=$(this),t=1===parseInt(e.attr("data-value")),o=page.author_id||0,n=$(".recommend-author.modal");n.modal({onShow:function(){t?(n.find(".header").text("取消推荐博主"),n.find(".content p").text("确定取消推荐此博主吗？")):(n.find(".header").text("推荐博主"),n.find(".content p").text("确定推荐此博主吗？"))},onApprove:function(){$.post(page.space_user_url+"/blog/toggle_recomm_author",{id:o},function(t){1===t.code?1===t.result?(e.find("span").text("已推荐博主"),$("body").toast({type:"success",content:"推荐博主成功"}),e.attr("data-value",1)):(e.find("span").text("推荐博主"),$("body").toast({type:"success",content:"取消推荐博主成功"}),e.attr("data-value",0)):$("body").toast({type:"error",content:t.message||"推荐博主失败"})})}}),n.modal("show")})},floatMenu:function(){$("#floatMenu").sticky({context:".float-menu-content",offset:200})},donateUserList:function(){var t=$(".reward-list");if(null==t||0===t.length)return!1;$.ajax({url:page.space_user_url+"/donate/donate_user_list",type:"post",dataType:"json",data:{blogId:page.objId},success:function(i){if(i.success&&!(i.count<=0)){if($.isNumeric(i.money))$("#donate_money").text(", 总额 "+i.money+" 元");$(i.list).each(function(t,e){var o,n=$("#reward-num"),a=$("<a></a>").addClass("donate-user-item  popup-donate");a.attr("href",e.home),a.attr("data-inverted",""),a.attr("data-tooltip",e.name+" "+e.donateTime+" ￥"+e.money),a.attr("data-position","bottom left"),"#"!=e.home&&a.attr("target","_blank"),o='<img src="'+e.image+'" class="ui avatar image" />',n.text(i.count),a.append(o),$("#donate_user_list").append(a)}),$(".popup-donate").popup({inline:!0,hoverable:!0,visible:"visible",delay:{show:300,hide:0}}),t.removeClass("hide")}},error:function(t){}})},initAuthorCardMedals:function(){$(".blog-detail .popup-oscer").popup({inline:!0,hoverable:!0,position:"top center",visible:"visible",delay:{show:300,hide:0}})},registerBeforeWeChatShareHook:function(){window.page&&(window.page.beforeWeChatShareHook=function(t){var e=window.common.getWeChatShareImgUrl(".article-detail .content img:not(.ad-wrap img)");return e&&(t.imgUrl=e),t})},register:function(){this.articleCatalogue(),this.like(),this.hightlight(),this.articleList(),this.shareMenu(),this.initManagerMenu(),this.floatMenu(),this.donateUserList(),this.initAuthorCardMedals(),this.optimizeImgShow()}},t});
OSCDefine("space-blog-write",function(){var _blogWrite=function(){var ckeditorConf,CONTENT_TYPE,editorManger,submitUrl,saveType,publish_as_blog,autoSaveDraft,changeEditorTab,originUrlInput,_writeArticleWrapper=$("#writeArticleWrapper"),_writeArticleForm=$(".write-article.form"),_writeTitle=_writeArticleForm.find("input[name=title]"),_bodyTextarea=_writeArticleForm.find("textarea[name=body]"),_editorTabListEl=$("#editorTabList"),_catalogForm=$(".catalog.form"),_enableAutoSaveDraft=!0,isSavedDraftByAutoSave=!1,apiUrl={save:page.space_user_url+"/blog/save",draft:page.space_user_url+"/blog/save_draft",edit:page.space_user_url+"/blog/edit"};_writeArticleWrapper.find(".dropdown").dropdown(),_writeArticleWrapper.find(".checkbox").checkbox(),ckeditorConf={height:350,resize_minHeight:423,resize_maxHeight:1e3,uploadUrl:page.space_user_url+"/space/ckeditor_dialog_img_upload",filebrowserUploadUrl:page.space_user_url+"/space/ckeditor_dialog_img_upload"},CONTENT_TYPE={MARKDOWN:3,CKEDITOR:4},editorManger={markdownEditorInstance:null,ckeditor:{init:function(t){var i=CKEDITOR.instances.body;_bodyTextarea.hide(),i?i.focus():((i=CKEDITOR.replace(_bodyTextarea[0],ckeditorConf)).on("instanceReady",function(e){t&&i.focus()}),i.on("change",function(e){_bodyTextarea.val(e.editor.getData()),isSavedDraftByAutoSave=!1}),i.on("change",autoSaveDraft),i.on("fileUploadResponse",function(e){setTimeout(function(){_bodyTextarea.val(e.editor.getData()),isSavedDraftByAutoSave=!1},0)}),i.on("fileUploadResponse",autoSaveDraft),i.on("mode",function(e){if("source"===this.mode){var t=i.editable();t.attachListener(t,"input",function(){_bodyTextarea.val(e.editor.getData()),isSavedDraftByAutoSave=!1}),t.attachListener(t,"input",autoSaveDraft)}}))},getMarkdown:function(){var e={headingStyle:"atx",hr:"---",bulletListMarker:"-",codeBlockStyle:"fenced"},t=new TurndownService(e),i=turndownPluginGfm.tables;return t.use([i]),t.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(e){return"~~"+e+"~~"}}),t.turndown(_bodyTextarea.val())},destroy:function(){var e=CKEDITOR.instances.body;_bodyTextarea.show(),e&&e.destroy()}},markdown:{init:function(e){var t,i,a=editorManger.markdownEditorInstance;_bodyTextarea.hide(),a?a.focus():($("#bodyEditorWrap").append('<div id="editormd"></div>'),t=["undo","redo","|","bold","italic","hr","|","quote","list-ul","list-ol","|","link","image","code","|","preview","watch","||","fullscreen"],i=["undo","redo","|","bold","italic","del","quote","ucwords","uppercase","lowercase","|","h1","h2","h3","h4","h5","h6","|","list-ul","list-ol","hr","|","link","reference-link","image","code","code-block","table","datetime","html-entities","pagebreak","|","goto-line","clear","|","preview","watch","||","fullscreen"],a=editormd({height:423,id:"editormd",placeholder:"",markdown:_bodyTextarea.val(),path:(window.__STATIC_DOMAIN||"")+"/new-osc/js/utils/plugins/editormd/lib/",syncScrolling:!0,toc:!1,emoji:!1,watch:!1,lineNumbers:!1,previewTheme:"osc",autoFocus:!!e,imageUpload:!0,matchWordHighlight:!1,imageFormats:["jpg","jpeg","gif","png","bmp","webp"],imageUploadURL:page.space_user_url+"/space/markdown_img_upload",toolbarIcons:function(){return t},onfullscreen:function(){this.cm.setOption("lineNumbers",!0),this.codeMirror.find(".CodeMirror-gutters").css("border-right","1px solid #ddd;"),this.settings.toolbarIcons=function(){return i},this.setToolbar(),this.watch(),this.resize(),this.focus()},onfullscreenExit:function(){this.cm.setOption("lineNumbers",!1),this.codeMirror.find(".CodeMirror-gutters").css("border-right","none"),this.settings.toolbarIcons=function(){return t},this.setToolbar(),this.unwatch(),this.resize(),this.focus()},onload:function(){$("#editormd").append('<div class="editormd__resize"></div>'),dropResize.init({resizeEl:"#editormd",draggerEl:".editormd__resize",maxWith:0,maxHeight:1e3,allowResizeWidth:!1,allowResizeHeight:!0,mustGtInitHeight:!0,mousemoveCallback:function(){},mouseupCallback:function(){}}),this.cm.on("change",function(){_bodyTextarea.val(a.getMarkdown()),isSavedDraftByAutoSave=!1,autoSaveDraft()})}}),(editorManger.markdownEditorInstance=a).editor.get(0).addEventListener("paste",this._pasteUpload))},getHTML:function(){var e,t,i=editormd.$markdownit,a=i("commonmark",{html:!1,linkify:!0});return a.enable(["table","strikethrough","linkify"]),e=editormd.$yamlFront.loadFront(_bodyTextarea.val()),t=_bodyTextarea.val(),e&&(t=e.__content||""),t=a.render(t)},destroy:function(){var e=editorManger.markdownEditorInstance;_bodyTextarea.show(),e&&(e.editor.get(0).removeEventListener("paste",this._pasteUpload),e.editor.remove(),editorManger.markdownEditorInstance=null,dropResize.destroy())},_pasteUpload:function(event){var items,item,types,i,file,formData,clipboardData=event.clipboardData;if(clipboardData){if(items=clipboardData.items,!items)return;for(types=clipboardData.types||[],i=0;i<types.length;i++)if("Files"===types[i]){item=items[i];break}if(item&&"file"===item.kind&&item.type.match(/^image\//i)){if(file=item.getAsFile(),!file)return!1;formData=new FormData,formData.append("editormd-image-file",file),$.ajax({url:page.space_user_url+"/space/markdown_img_upload",type:"post",data:formData,processData:!1,contentType:!1,success:function(res){var data,imgUrlMarkdown;res=res||"",data=void 0!==JSON.parse?JSON.parse(res):eval("("+res+")"),data&&1===data.success&&data.url&&(imgUrlMarkdown="![]("+data.url+")",editorManger.markdownEditorInstance.insertValue(imgUrlMarkdown))}})}}}},switchEditor:function(e,t){var i,a;"markdown"===e||e===CONTENT_TYPE.MARKDOWN?(CKEDITOR.instances.body&&(i=this.ckeditor.getMarkdown(),this.ckeditor.destroy(),_bodyTextarea.val(i)),this.markdown.init(!!t)):"ckeditor"!==e&&e!==CONTENT_TYPE.CKEDITOR||(this.markdownEditorInstance&&(a=this.markdown.getHTML(),this.markdown.destroy(),_bodyTextarea.val(a)),this.ckeditor.init(!!t))}},submitUrl=apiUrl.save,saveType="save",publish_as_blog=null,page.is_edit&&(publish_as_blog=(saveType=page.is_draft?(submitUrl=apiUrl.draft,"draft"):(submitUrl=apiUrl.edit,"edit"),null)),_writeArticleForm.on("click",".actions .button",function(){submitUrl=apiUrl[$(this).data("value")],saveType=$(this).data("value"),publish_as_blog=$(this).data("publish")}),$.fn.form.settings.rules.checkOriginUrl=function(e){return!(!_writeArticleForm.find("input[name=type]").is(":checked")&&(""===e.trim()||!/[a-zA-z]+:\/\/[^\s]*/.test(e)))},_writeArticleForm.form({inline:!0,fields:{title:{identifier:"title",rules:[{type:"empty",prompt:"请输入文章标题"},{type:"maxLength[100]",prompt:"文章标题长度不能超过 {ruleValue} 个字符"}]},classification:{identifier:"classification",rules:[{type:"empty",prompt:"请选择文章分类"}]},body:{identifier:"body",rules:[{type:"empty",prompt:"请输入文章内容"}]},origin_url:{identifier:"origin_url",rules:[{type:"checkOriginUrl",prompt:"请输入正确的原文链接"}]}}}).api({url:submitUrl,method:"post",serializeForm:!0,beforeSend:function(e){_enableAutoSaveDraft=!1,$(this).message("hideAll"),e.url=submitUrl;var t=e.data;return e.data={publish_as_blog:publish_as_blog,draft:t.draft,id:t.id,user_code:t.user_code,title:t.title,content:t.body,content_type:t.content_type,catalog:t.catalog,classification:t.classification,type:t.type,origin_url:t.origin_url,privacy:t.privacy,deny_comment:t.deny_comment,as_top:t.as_top,downloadImg:t.downloadImg,isRecommend:0},e},onSuccess:function(e,t,i){if(1===e.code)if("save"===saveType)$(this).message({type:"positive",content:e.message||"发表成功"}),window.onbeforeunload=null,setTimeout(function(){window.location.href=page.blog_url+"/"+e.result.id},2e3);else if("edit"===saveType)$(this).message({type:"positive",content:e.message||"编辑成功"}),window.onbeforeunload=null,setTimeout(function(){window.location.href=page.blog_url+"/"+e.result.id},2e3);else{_writeArticleForm.find('input[name="draft"]').val(e.result.draft);var a=e.time||"";a=a.substr(11,8),_writeArticleForm.find(".save-draft-tip").html("最后保存时间 "+a),_enableAutoSaveDraft=!0,$(this).message({type:"positive",content:"保存成功",disappear:2e3})}else _enableAutoSaveDraft=!0,$(this).message({type:"negative",content:e.message||"操作失败",disappear:2e3})},onError:function(e,t){_enableAutoSaveDraft=!0,$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}}),autoSaveDraft=window.common.throttle(function(e){var t,i,a;_enableAutoSaveDraft&&(t=page.is_edit,i=page.is_draft,t&&!i||""!==_writeTitle.val()&&""!==_bodyTextarea.val()&&(a={draft:_writeArticleForm.find("input[name=draft]").val(),id:_writeArticleForm.find("input[name=id]").val(),user_code:_writeArticleForm.find("input[name=user_code]").val(),title:_writeTitle.val(),content:_bodyTextarea.val(),content_type:_writeArticleForm.find("input[name=content_type]").val(),catalog:_writeArticleForm.find("select[name=catalog]").val(),classification:_writeArticleForm.find("select[name=classification] option:selected").val(),type:_writeArticleForm.find("input[name=type]").val(),origin_url:_writeArticleForm.find("input[name=origin_url]").val(),privacy:_writeArticleForm.find("input[name=privacy]").val(),deny_comment:_writeArticleForm.find("input[name=deny_comment]").val(),as_top:_writeArticleForm.find("input[name=as_top]").val(),downloadImg:_writeArticleForm.find("input[name=downloadImg]").val(),isRecommend:0},$.ajax({url:apiUrl.draft,method:"post",data:a,dataType:"json",success:function(e,t,i){if(1===e.code){_writeArticleForm.find('input[name="draft"]').val(e.result.draft);var a=e.time||"";a=a.substr(11,8),_writeArticleForm.find(".save-draft-tip").html("最后保存时间 "+a),isSavedDraftByAutoSave=!0}},error:function(e,t){}})))},5e3),changeEditorTab=function(e,t){var i=_editorTabListEl.find('.item[data-value="'+e+'"]');_writeArticleForm.find("input[name=content_type]").val(e),i.addClass("active").closest(".ui.menu").find(".item").not(i).removeClass("active"),editorManger.switchEditor(e,!!t),_writeArticleForm.find(".error").removeClass("error").find(".prompt").remove()},_editorTabListEl.find(".item").on("click",function(){var e=$(this).data("value");changeEditorTab(e,!0)}),_writeArticleForm.on("click",".add-catalog-btn",function(){var i=_writeArticleForm.find("input[name=user_code]").val(),s=$(".add-catalog.modal");_catalogForm.form({inline:!0,keyboardShortcuts:!1,fields:{name:{rules:[{type:"empty",prompt:"请输入分类名称"}]}}}).api({url:page.space_user_url+"/blog/quick_add_blog_catalog",method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=e.data;return e.data={space:page.spaceId,userCode:i,user_code:page.g_user_code||"",name:t.name},e},onSuccess:function(e,t,i){var a,r,o,n,l,d;if(1===e.code){if(!((a=e.result)&&a.id&&a.catalogs))return $("body").toast({type:"error",content:e.message||"添加失败"}),!1;r=a.id,o=a.catalogs,Array.isArray(o)&&0<o.length&&((n={values:[]}).values=o.map(function(e){return{name:window.common.htmlEncode(e.name),text:window.common.htmlEncode(e.name),value:e.id}}),l=n.values[0].value,n.values.some(function(e){return e.value===r})&&(l=r),d="",o.forEach(function(e){d+='<option value="'+e.id+'">'+e.name+"</option>"}),_writeArticleForm.find("#catalogDropdown").html(d),_writeArticleForm.find("#catalogDropdown").dropdown("setup menu",n),_writeArticleForm.find("#catalogDropdown").dropdown("set selected",l)),s.modal("hide"),$("body").toast({type:"success",content:"添加成功"}),_catalogForm.form("reset")}else $("body").toast({type:"error",content:e.message||"添加失败"})},onFailure:function(e,t){$("body").toast({type:"error",content:e.message||"添加失败"})}}),s.modal({onApprove:function(){return _catalogForm.message("hideAll"),_catalogForm.form("submit"),!1}}),_catalogForm.on("keydown",function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&_catalogForm.find(".actions .ok").click()}),s.modal({onApprove:function(){return _catalogForm.message("hideAll"),_catalogForm.form("submit"),!1}}).modal("show")}),$(function(){var e=_editorTabListEl.find(".active.item"),t=e.data("value")||CONTENT_TYPE.CKEDITOR;window.onbeforeunload=function(){var e=_writeArticleForm.find("input[name=title]").val().trim(),t=_bodyTextarea.val().trim();if((""!==e||""!==t)&&!isSavedDraftByAutoSave)return"确认放弃此文章"},changeEditorTab(t,!1),_writeTitle.focus(),_writeTitle.on("input propertychange change",function(){isSavedDraftByAutoSave=!1,autoSaveDraft()})}),originUrlInput=_writeArticleForm.find(".origin-url-input"),_writeArticleForm.find("input[name=type]").on("change",function(){var e=originUrlInput.find("input[name=origin_url]");$(this).is(":checked")?(originUrlInput.hide(),e.val("")):(originUrlInput.show(),setTimeout(function(){e.focus()},0))})};return _blogWrite});
OSCDefine("space-tweet-detail",function(){var e=function(){this.tweetCommentFormVue=null,this.tweetCommentsList=$("#tweetCommentsList .tweet-comments-list-container"),this.atUsers=[],this.atUsersId=[]};return e.prototype={constructor:e,thumbupsList:function(){$(".thumbups-wrap .thumbups .dropdown").dropdown()},codeHighlight:function(){$(".tweet-detail .code pre code").each(function(e,t){hljs.highlightBlock(t)})},initAsTop:function(){var r='<i class="arrow up icon"></i> 置顶',s='<i class="undo icon"></i> 取消置顶';$(".tweet-detail").on("click",".meta a.mark-as-top",function(e){var t,o=$(".tweet-detail"),a=o.attr("data-tweet-id"),n=o.find(".meta a.mark-as-top"),i=1===n.data("value");(t=$(".mark-as-top-tweet.modal")).modal({onShow:function(){i?(t.find(".header").text("取消置顶动弹"),t.find(".content p").text("确定取消置顶此动弹吗？")):(t.find(".header").text("置顶动弹"),t.find(".content p").text("确定置顶此动弹吗？"))},onApprove:function(){$.post(page.space_user_url+"/tweet/asTop",{id:a,user_code:page.g_user_code||""},function(e){1===e.code?i?($("body").toast({type:"success",content:"取消置顶成功"}),n.html(r),n.data("value",0)):($("body").toast({type:"success",content:"置顶成功"}),n.html(s),n.data("value",1)):$("body").toast({type:"error",content:e.message||"操作失败"})})}}),t.modal("show")})},initDeleteTweet:function(){$(".delete-tweet.modal").modal({onApprove:function(){var e=$(".tweet-detail").attr("data-tweet-id");$.post(page.space_user_url+"/tweet/deleteTweet",{id:e,user_code:page.g_user_code||""},function(e){1===e.code?location.href=page.space_user_url:$("body").toast({type:"error",content:e.message||"删除失败"})})}}),$(".tweet-detail").on("click",".meta a.remove",function(e){$(".delete-tweet.modal").modal("show")})},initCommentForm:function(){var n=this;n.tweetCommentFormVue=new Vue({el:"#tweetCommentForm",data:function(){return{commentMaxLength:160,commentContent:"",commentPublishLoading:!1,tipMessage:{show:!1,content:"",className:""},curEmojiType:"People",emojiList:[{type:"People",items:["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","disappointed_relieved","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","cry","sob","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","fu","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","dancer","dancers","ok_woman","no_good","information_desk_person","raising_hand","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface"]},{type:"Nature",items:["sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel"]},{type:"Objects",items:["bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","package","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn"]},{type:"Places",items:["house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de"]},{type:"Symbols",items:["one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","sparkle","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","back","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_small_square","white_small_square","black_medium_small_square","white_medium_small_square","black_medium_square","white_medium_square","black_large_square","white_large_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"]}],tweetId:page.tweetId||"",isPubTweet:!0,isPubTweetCookieName:"OSC_IS_PUB_TWEET"}},computed:{curEmojiItems:function(){for(var e=0,t=this.emojiList.length;e<t;e++)if(this.emojiList[e].type===this.curEmojiType)return this.emojiList[e].items;return this.emojiList[0].items},commentContentIsEmpty:function(){return 0===this.commentContent.length},commentCountText:function(){return this.commentContent.length+"/"+this.commentMaxLength}},created:function(){this.initIsPubTweetFromCookie()},methods:{initIsPubTweetFromCookie:function(){var e=this,t=window.common.getCookie(e.isPubTweetCookieName);null!=t&&!1===Boolean(t)&&(e.isPubTweet=!1)},insertEmoji:function(e){this.clearMessage();var t=":"+e+":";this.insertContent(t),$(this.$refs.showEmojiBox).popup("hide")},insertTopic:function(){var e,t,o;this.clearMessage(),e="#此处输入话题#",this.insertContent(e)&&(o=(t=selectRange.of(this.$refs.commentTextarea)).getCurPos(),t.setSelectText(o-(e.length-1),o-1))},publishComment:function(){var a,e;if(a=this,!window.common.checkLogin())return!1;a.tweetPublishLoading||(a.clearMessage(),a.commentContentIsEmpty?a.showMessage("error","内容不能为空",2e3):a.commentContent.length>a.commentMaxLength?a.showMessage("error","最多只能输入"+a.commentMaxLength+"个字符！",2e3):(a.commentPublishLoading=!0,e={id:a.tweetId,isPostToMyZone:a.isPubTweet?1:0,content:a.commentContent,userId:page.g_user_id},$.post(page.space_user_url+"/tweet/publishComment",e,function(e){var t,o;1===e.code?(a.commentContent="",e.result&&void 0!==e.result.reply_count&&(t=e.result.reply_count,$('[data-tweet-reply-count][data-tweet-id="'+a.tweetId+'"]').html(t)),o=$("#tweetCommentsList .tweet-comments-list-container"),$.get(page.space_user_url+"/widgets/_tweet_comment_item_ajax?tweetId="+a.tweetId+"&commentId="+e.result.log,function(e){$("#tweetCommentsList .empty-tips").remove(),o.prepend(e),n.parseEmoticon(),$(".osc-gitee-6th-label").popup()})):a.showMessage("error",e.message||"评论失败，请稍后再试！",2e3)}).fail(function(){a.showMessage("error","网络错误，请稍后再试！",2e3)}).always(function(){a.commentPublishLoading=!1})))},commentContentOnKeyDown:function(e){(e.metaKey||e.ctrlKey)&&13==e.keyCode&&this.publishComment()},insertContent:function(e){return!this.commentPublishLoading&&(this.commentContent.length>=this.commentMaxLength||this.commentContent.length+e.length>this.commentMaxLength?void this.showMessage("error","最多只能输入"+this.commentMaxLength+"个字符！",2e3):(selectRange.of(this.$refs.commentTextarea).insertAfterText(e),this.commentContent=this.$refs.commentTextarea.value,!0))},showMessage:function(e,t,o){var a,n=this;n.tipMessage.className="success"===e?"positive":"negative",n.tipMessage.content=t,a=parseInt(o)||0,n.tipMessage.show=!0,0<a&&setTimeout(function(){n.clearMessage()},a)},clearMessage:function(){var e=this;e.tipMessage.className="",e.tipMessage.content="",e.tipMessage.show=!1}},watch:{isPubTweet:function(e,t){window.common.setCookie(this.isPubTweetCookieName,e?1:0)}}}),$(".tweet-form .toolbox > .item[data-popup]").each(function(e,t){var o=$(t),a=$(o).parent(),n=a.find(".toolbox-popup."+o.attr("data-popup"));o.popup({position:"bottom left",popup:n,on:"toolbox-picture"===o.attr("data-popup")?"manual":"click",exclusive:!0})})},_generateAtUserItem:function(e,t,o){var a,n=page.g_user_id||-1;return t=t||"",o=o||"",-1!==n&&e!==n&&""!==o&&(a="",Pinyin.isSupported()&&(a=Pinyin.convertToPinyin(o,"",!0)||""),{name:o,searchKey:t+o+a})},updateAtTips:function(){var e,t,o,a,n,i,s=this;if(!page.g_user||window.innerWidth<768)return!1;(e=$(".tweet-detail")).data("tweet-owner-at-init")||(t=e.attr("data-tweet-owner-id")||-1,o=e.attr("data-tweet-owner-ident")||"",a=e.attr("data-tweet-owner-name")||"",(n=s._generateAtUserItem(t,o,a))&&(s.atUsers.push(n),s.atUsersId.push(t)),e.data("tweet-owner-at-init",!0)),s.tweetCommentsList.find(".comment-item").each(function(e,t){var o,a,n,i,r=$(t);r.data("comment-user-at-init")||(o=r.attr("data-comment-user-id")||-1,jQuery.inArray(o,s.atUsersId)<0&&(a=r.attr("data-comment-user-ident")||"",n=r.attr("data-comment-user-name")||"",(i=s._generateAtUserItem(o,a,n))&&(s.atUsers.push(i),s.atUsersId.push(o))),r.data("comment-user-at-init",!0))}),(i=$("#tweetCommentForm .tweet-comment-textarea")).atwho({at:"@",data:s.atUsers,searchKey:"searchKey",insertTpl:"${atwho-at}${name}",displayTpl:"<li>${name}</li>",limit:10}),i.on("inserted.atwho",function(e,t,o){s.tweetCommentFormVue&&(s.tweetCommentFormVue.commentContent=s.tweetCommentFormVue.$refs.commentTextarea.value)})},initCommentsList:function(){var e,n=this;$(".delete-comment.modal").modal({onApprove:function(){var e=$(this).attr("data-comment-id"),o=$(".tweet-comments .comment[data-comment-id="+e+"]");$.post(page.space_user_url+"/tweet/deleteComment",{id:e,user_code:page.g_user_code||""},function(e){var t;1===e.code?(o.fadeOut(function(){o.remove()}),e.result&&void 0!==e.result.reply_count&&(t=e.result.reply_count,$('[data-tweet-reply-count][data-tweet-id="'+page.tweetId+'"]').html(t))):$("body").toast({type:"error",content:e.message||"删除失败"})})}}),(e=$("#tweetCommentsList")).on("click",".comment .meta a.remove",function(e){var t=$(".delete-comment.modal"),o=$(this).parents(".comment:eq(0)"),a=o.attr("data-comment-id");t.attr("data-comment-id",a),t.modal("show")}),e.on("click",".comment .meta a.reply",function(e){var t,o=$(this).parents(".comment:eq(0)"),a=o.find(".summary .user").text();0<a.trim().length&&(t="@"+a+" ",n.tweetCommentFormVue.insertContent(t))})},commentInfiniteScroll:function(){var e=this,t={tweetCommentsList:new OSCInfiniteScroll({pagePath:".pagination__next",containerSelector:"#tweetCommentsList",itemListSelector:".tweet-comments-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:2,itemSelector:".comment.event",loadOnScroll:!0,onAppend:function(){e.parseEmoticon(),$(".osc-gitee-6th-label").popup(),e.updateAtTips()}})};t.tweetCommentsList.init()},initFirstPicturePreview:function(){$(function(){OSCMultipleImageViewer.initShowMultiImages($('[data-multi-image-raw="wrapper"]'),0)})},parseEmoticon:function(){$(function(){$("[data-emoji-render]").emoticon()})},registerBeforeWeChatShareHook:function(){window.page&&(window.page.beforeWeChatShareHook=function(e){var t=window.common.getWeChatShareImgUrl("[data-wechat-share-imgs] img");return t&&(e.imgUrl=t),e})},register:function(){this.thumbupsList(),this.codeHighlight(),this.initAsTop(),this.initDeleteTweet(),this.initCommentForm(),this.initCommentsList(),this.commentInfiniteScroll(),this.initFirstPicturePreview(),this.parseEmoticon(),this.updateAtTips()}},e});